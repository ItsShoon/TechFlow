{"ast":null,"code":"window.eve = require('eve');\n\n// Copyright (c) 2017 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar mina = function (eve) {\n  var animations = {},\n    requestAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n      setTimeout(callback, 16, new Date().getTime());\n      return true;\n    },\n    requestID,\n    isArray = Array.isArray || function (a) {\n      return a instanceof Array || Object.prototype.toString.call(a) == \"[object Array]\";\n    },\n    idgen = 0,\n    idprefix = \"M\" + (+new Date()).toString(36),\n    ID = function () {\n      return idprefix + (idgen++).toString(36);\n    },\n    diff = function (a, b, A, B) {\n      if (isArray(a)) {\n        res = [];\n        for (var i = 0, ii = a.length; i < ii; i++) {\n          res[i] = diff(a[i], b, A[i], B);\n        }\n        return res;\n      }\n      var dif = (A - a) / (B - b);\n      return function (bb) {\n        return a + dif * (bb - b);\n      };\n    },\n    timer = Date.now || function () {\n      return +new Date();\n    },\n    sta = function (val) {\n      var a = this;\n      if (val == null) {\n        return a.s;\n      }\n      var ds = a.s - val;\n      a.b += a.dur * ds;\n      a.B += a.dur * ds;\n      a.s = val;\n    },\n    speed = function (val) {\n      var a = this;\n      if (val == null) {\n        return a.spd;\n      }\n      a.spd = val;\n    },\n    duration = function (val) {\n      var a = this;\n      if (val == null) {\n        return a.dur;\n      }\n      a.s = a.s * val / a.dur;\n      a.dur = val;\n    },\n    stopit = function () {\n      var a = this;\n      delete animations[a.id];\n      a.update();\n      eve(\"mina.stop.\" + a.id, a);\n    },\n    pause = function () {\n      var a = this;\n      if (a.pdif) {\n        return;\n      }\n      delete animations[a.id];\n      a.update();\n      a.pdif = a.get() - a.b;\n    },\n    resume = function () {\n      var a = this;\n      if (!a.pdif) {\n        return;\n      }\n      a.b = a.get() - a.pdif;\n      delete a.pdif;\n      animations[a.id] = a;\n      frame();\n    },\n    update = function () {\n      var a = this,\n        res;\n      if (isArray(a.start)) {\n        res = [];\n        for (var j = 0, jj = a.start.length; j < jj; j++) {\n          res[j] = +a.start[j] + (a.end[j] - a.start[j]) * a.easing(a.s);\n        }\n      } else {\n        res = +a.start + (a.end - a.start) * a.easing(a.s);\n      }\n      a.set(res);\n    },\n    frame = function (timeStamp) {\n      // Manual invokation?\n      if (!timeStamp) {\n        // Frame loop stopped?\n        if (!requestID) {\n          // Start frame loop...\n          requestID = requestAnimFrame(frame);\n        }\n        return;\n      }\n      var len = 0;\n      for (var i in animations) if (animations.hasOwnProperty(i)) {\n        var a = animations[i],\n          b = a.get(),\n          res;\n        len++;\n        a.s = (b - a.b) / (a.dur / a.spd);\n        if (a.s >= 1) {\n          delete animations[i];\n          a.s = 1;\n          len--;\n          (function (a) {\n            setTimeout(function () {\n              eve(\"mina.finish.\" + a.id, a);\n            });\n          })(a);\n        }\n        a.update();\n      }\n      requestID = len ? requestAnimFrame(frame) : false;\n    },\n    /*\\\r\n     * mina\r\n     [ method ]\r\n     **\r\n     * Generic animation of numbers\r\n     **\r\n     - a (number) start _slave_ number\r\n     - A (number) end _slave_ number\r\n     - b (number) start _master_ number (start time in general case)\r\n     - B (number) end _master_ number (end time in general case)\r\n     - get (function) getter of _master_ number (see @mina.time)\r\n     - set (function) setter of _slave_ number\r\n     - easing (function) #optional easing function, default is @mina.linear\r\n     = (object) animation descriptor\r\n     o {\r\n     o         id (string) animation id,\r\n     o         start (number) start _slave_ number,\r\n     o         end (number) end _slave_ number,\r\n     o         b (number) start _master_ number,\r\n     o         s (number) animation status (0..1),\r\n     o         dur (number) animation duration,\r\n     o         spd (number) animation speed,\r\n     o         get (function) getter of _master_ number (see @mina.time),\r\n     o         set (function) setter of _slave_ number,\r\n     o         easing (function) easing function, default is @mina.linear,\r\n     o         status (function) status getter/setter,\r\n     o         speed (function) speed getter/setter,\r\n     o         duration (function) duration getter/setter,\r\n     o         stop (function) animation stopper\r\n     o         pause (function) pauses the animation\r\n     o         resume (function) resumes the animation\r\n     o         update (function) calles setter with the right value of the animation\r\n     o }\r\n    \\*/\n    mina = function (a, A, b, B, get, set, easing) {\n      var anim = {\n        id: ID(),\n        start: a,\n        end: A,\n        b: b,\n        s: 0,\n        dur: B - b,\n        spd: 1,\n        get: get,\n        set: set,\n        easing: easing || mina.linear,\n        status: sta,\n        speed: speed,\n        duration: duration,\n        stop: stopit,\n        pause: pause,\n        resume: resume,\n        update: update\n      };\n      animations[anim.id] = anim;\n      var len = 0,\n        i;\n      for (i in animations) if (animations.hasOwnProperty(i)) {\n        len++;\n        if (len == 2) {\n          break;\n        }\n      }\n      len == 1 && frame();\n      return anim;\n    };\n  /*\\\r\n   * mina.time\r\n   [ method ]\r\n   **\r\n   * Returns the current time. Equivalent to:\r\n   | function () {\r\n   |     return (new Date).getTime();\r\n   | }\r\n  \\*/\n  mina.time = timer;\n  /*\\\r\n   * mina.getById\r\n   [ method ]\r\n   **\r\n   * Returns an animation by its id\r\n   - id (string) animation's id\r\n   = (object) See @mina\r\n  \\*/\n  mina.getById = function (id) {\n    return animations[id] || null;\n  };\n\n  /*\\\r\n   * mina.linear\r\n   [ method ]\r\n   **\r\n   * Default linear easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.linear = function (n) {\n    return n;\n  };\n  /*\\\r\n   * mina.easeout\r\n   [ method ]\r\n   **\r\n   * Easeout easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.easeout = function (n) {\n    return Math.pow(n, 1.7);\n  };\n  /*\\\r\n   * mina.easein\r\n   [ method ]\r\n   **\r\n   * Easein easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.easein = function (n) {\n    return Math.pow(n, .48);\n  };\n  /*\\\r\n   * mina.easeinout\r\n   [ method ]\r\n   **\r\n   * Easeinout easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.easeinout = function (n) {\n    if (n == 1) {\n      return 1;\n    }\n    if (n == 0) {\n      return 0;\n    }\n    var q = .48 - n / 1.04,\n      Q = Math.sqrt(.1734 + q * q),\n      x = Q - q,\n      X = Math.pow(Math.abs(x), 1 / 3) * (x < 0 ? -1 : 1),\n      y = -Q - q,\n      Y = Math.pow(Math.abs(y), 1 / 3) * (y < 0 ? -1 : 1),\n      t = X + Y + .5;\n    return (1 - t) * 3 * t * t + t * t * t;\n  };\n  /*\\\r\n   * mina.backin\r\n   [ method ]\r\n   **\r\n   * Backin easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.backin = function (n) {\n    if (n == 1) {\n      return 1;\n    }\n    var s = 1.70158;\n    return n * n * ((s + 1) * n - s);\n  };\n  /*\\\r\n   * mina.backout\r\n   [ method ]\r\n   **\r\n   * Backout easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.backout = function (n) {\n    if (n == 0) {\n      return 0;\n    }\n    n = n - 1;\n    var s = 1.70158;\n    return n * n * ((s + 1) * n + s) + 1;\n  };\n  /*\\\r\n   * mina.elastic\r\n   [ method ]\r\n   **\r\n   * Elastic easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.elastic = function (n) {\n    if (n == !!n) {\n      return n;\n    }\n    return Math.pow(2, -10 * n) * Math.sin((n - .075) * (2 * Math.PI) / .3) + 1;\n  };\n  /*\\\r\n   * mina.bounce\r\n   [ method ]\r\n   **\r\n   * Bounce easing\r\n   - n (number) input 0..1\r\n   = (number) output 0..1\r\n  \\*/\n  mina.bounce = function (n) {\n    var s = 7.5625,\n      p = 2.75,\n      l;\n    if (n < 1 / p) {\n      l = s * n * n;\n    } else {\n      if (n < 2 / p) {\n        n -= 1.5 / p;\n        l = s * n * n + .75;\n      } else {\n        if (n < 2.5 / p) {\n          n -= 2.25 / p;\n          l = s * n * n + .9375;\n        } else {\n          n -= 2.625 / p;\n          l = s * n * n + .984375;\n        }\n      }\n    }\n    return l;\n  };\n  window.mina = mina;\n  return mina;\n}(typeof eve == \"undefined\" ? function () {} : eve);\n\n// Copyright (c) 2013 - 2017 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nvar Snap = function (root) {\n  Snap.version = \"0.5.1\";\n  /*\\\r\n   * Snap\r\n   [ method ]\r\n   **\r\n   * Creates a drawing surface or wraps existing SVG element.\r\n   **\r\n   - width (number|string) width of surface\r\n   - height (number|string) height of surface\r\n   * or\r\n   - DOM (SVGElement) element to be wrapped into Snap structure\r\n   * or\r\n   - array (array) array of elements (will return set of elements)\r\n   * or\r\n   - query (string) CSS query selector\r\n   = (object) @Element\r\n  \\*/\n  function Snap(w, h) {\n    if (w) {\n      if (w.nodeType) {\n        return wrap(w);\n      }\n      if (is(w, \"array\") && Snap.set) {\n        return Snap.set.apply(Snap, w);\n      }\n      if (w instanceof Element) {\n        return w;\n      }\n      if (h == null) {\n        try {\n          w = glob.doc.querySelector(String(w));\n          return wrap(w);\n        } catch (e) {\n          return null;\n        }\n      }\n    }\n    w = w == null ? \"100%\" : w;\n    h = h == null ? \"100%\" : h;\n    return new Paper(w, h);\n  }\n  Snap.toString = function () {\n    return \"Snap v\" + this.version;\n  };\n  Snap._ = {};\n  var glob = {\n    win: root.window,\n    doc: root.window.document\n  };\n  Snap._.glob = glob;\n  var has = \"hasOwnProperty\",\n    Str = String,\n    toFloat = parseFloat,\n    toInt = parseInt,\n    math = Math,\n    mmax = math.max,\n    mmin = math.min,\n    abs = math.abs,\n    pow = math.pow,\n    PI = math.PI,\n    round = math.round,\n    E = \"\",\n    S = \" \",\n    objectToString = Object.prototype.toString,\n    ISURL = /^url\\(['\"]?([^\\)]+?)['\"]?\\)$/i,\n    colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?(?:\\s*,\\s*[\\d\\.]+%?)?)\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?%?)\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?%?)\\s*\\))\\s*$/i,\n    bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\n    separator = Snap._.separator = /[,\\s]+/,\n    whitespace = /[\\s]/g,\n    commaSpaces = /[\\s]*,[\\s]*/,\n    hsrg = {\n      hs: 1,\n      rg: 1\n    },\n    pathCommand = /([a-z])[\\s,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\s]*,?[\\s]*)+)/ig,\n    tCommand = /([rstm])[\\s,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\s]*,?[\\s]*)+)/ig,\n    pathValues = /(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\\s]*,?[\\s]*/ig,\n    idgen = 0,\n    idprefix = \"S\" + (+new Date()).toString(36),\n    ID = function (el) {\n      return (el && el.type ? el.type : E) + idprefix + (idgen++).toString(36);\n    },\n    xlink = \"http://www.w3.org/1999/xlink\",\n    xmlns = \"http://www.w3.org/2000/svg\",\n    hub = {},\n    /*\\\r\n     * Snap.url\r\n     [ method ]\r\n     **\r\n     * Wraps path into `\"url('<path>')\"`.\r\n     - value (string) path\r\n     = (string) wrapped path\r\n    \\*/\n    URL = Snap.url = function (url) {\n      return \"url('#\" + url + \"')\";\n    };\n  function $(el, attr) {\n    if (attr) {\n      if (el == \"#text\") {\n        el = glob.doc.createTextNode(attr.text || attr[\"#text\"] || \"\");\n      }\n      if (el == \"#comment\") {\n        el = glob.doc.createComment(attr.text || attr[\"#text\"] || \"\");\n      }\n      if (typeof el == \"string\") {\n        el = $(el);\n      }\n      if (typeof attr == \"string\") {\n        if (el.nodeType == 1) {\n          if (attr.substring(0, 6) == \"xlink:\") {\n            return el.getAttributeNS(xlink, attr.substring(6));\n          }\n          if (attr.substring(0, 4) == \"xml:\") {\n            return el.getAttributeNS(xmlns, attr.substring(4));\n          }\n          return el.getAttribute(attr);\n        } else if (attr == \"text\") {\n          return el.nodeValue;\n        } else {\n          return null;\n        }\n      }\n      if (el.nodeType == 1) {\n        for (var key in attr) if (attr[has](key)) {\n          var val = Str(attr[key]);\n          if (val) {\n            if (key.substring(0, 6) == \"xlink:\") {\n              el.setAttributeNS(xlink, key.substring(6), val);\n            } else if (key.substring(0, 4) == \"xml:\") {\n              el.setAttributeNS(xmlns, key.substring(4), val);\n            } else {\n              el.setAttribute(key, val);\n            }\n          } else {\n            el.removeAttribute(key);\n          }\n        }\n      } else if (\"text\" in attr) {\n        el.nodeValue = attr.text;\n      }\n    } else {\n      el = glob.doc.createElementNS(xmlns, el);\n    }\n    return el;\n  }\n  Snap._.$ = $;\n  Snap._.id = ID;\n  function getAttrs(el) {\n    var attrs = el.attributes,\n      name,\n      out = {};\n    for (var i = 0; i < attrs.length; i++) {\n      if (attrs[i].namespaceURI == xlink) {\n        name = \"xlink:\";\n      } else {\n        name = \"\";\n      }\n      name += attrs[i].name;\n      out[name] = attrs[i].textContent;\n    }\n    return out;\n  }\n  function is(o, type) {\n    type = Str.prototype.toLowerCase.call(type);\n    if (type == \"finite\") {\n      return isFinite(o);\n    }\n    if (type == \"array\" && (o instanceof Array || Array.isArray && Array.isArray(o))) {\n      return true;\n    }\n    return type == \"null\" && o === null || type == typeof o && o !== null || type == \"object\" && o === Object(o) || objectToString.call(o).slice(8, -1).toLowerCase() == type;\n  }\n  /*\\\r\n   * Snap.format\r\n   [ method ]\r\n   **\r\n   * Replaces construction of type `{<name>}` to the corresponding argument\r\n   **\r\n   - token (string) string to format\r\n   - json (object) object which properties are used as a replacement\r\n   = (string) formatted string\r\n   > Usage\r\n   | // this draws a rectangular shape equivalent to \"M10,20h40v50h-40z\"\r\n   | paper.path(Snap.format(\"M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z\", {\r\n   |     x: 10,\r\n   |     y: 20,\r\n   |     dim: {\r\n   |         width: 40,\r\n   |         height: 50,\r\n   |         \"negative width\": -40\r\n   |     }\r\n   | }));\r\n  \\*/\n  Snap.format = function () {\n    var tokenRegex = /\\{([^\\}]+)\\}/g,\n      objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|\")(.+?)\\2\\])(\\(\\))?/g,\n      // matches .xxxxx or [\"xxxxx\"] to run over object properties\n      replacer = function (all, key, obj) {\n        var res = obj;\n        key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\n          name = name || quotedName;\n          if (res) {\n            if (name in res) {\n              res = res[name];\n            }\n            typeof res == \"function\" && isFunc && (res = res());\n          }\n        });\n        res = (res == null || res == obj ? all : res) + \"\";\n        return res;\n      };\n    return function (str, obj) {\n      return Str(str).replace(tokenRegex, function (all, key) {\n        return replacer(all, key, obj);\n      });\n    };\n  }();\n  function clone(obj) {\n    if (typeof obj == \"function\" || Object(obj) !== obj) {\n      return obj;\n    }\n    var res = new obj.constructor();\n    for (var key in obj) if (obj[has](key)) {\n      res[key] = clone(obj[key]);\n    }\n    return res;\n  }\n  Snap._.clone = clone;\n  function repush(array, item) {\n    for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\n      return array.push(array.splice(i, 1)[0]);\n    }\n  }\n  function cacher(f, scope, postprocessor) {\n    function newf() {\n      var arg = Array.prototype.slice.call(arguments, 0),\n        args = arg.join(\"\\u2400\"),\n        cache = newf.cache = newf.cache || {},\n        count = newf.count = newf.count || [];\n      if (cache[has](args)) {\n        repush(count, args);\n        return postprocessor ? postprocessor(cache[args]) : cache[args];\n      }\n      count.length >= 1e3 && delete cache[count.shift()];\n      count.push(args);\n      cache[args] = f.apply(scope, arg);\n      return postprocessor ? postprocessor(cache[args]) : cache[args];\n    }\n    return newf;\n  }\n  Snap._.cacher = cacher;\n  function angle(x1, y1, x2, y2, x3, y3) {\n    if (x3 == null) {\n      var x = x1 - x2,\n        y = y1 - y2;\n      if (!x && !y) {\n        return 0;\n      }\n      return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;\n    } else {\n      return angle(x1, y1, x3, y3) - angle(x2, y2, x3, y3);\n    }\n  }\n  function rad(deg) {\n    return deg % 360 * PI / 180;\n  }\n  function deg(rad) {\n    return rad * 180 / PI % 360;\n  }\n  function x_y() {\n    return this.x + S + this.y;\n  }\n  function x_y_w_h() {\n    return this.x + S + this.y + S + this.width + \" \\xd7 \" + this.height;\n  }\n\n  /*\\\r\n   * Snap.rad\r\n   [ method ]\r\n   **\r\n   * Transform angle to radians\r\n   - deg (number) angle in degrees\r\n   = (number) angle in radians\r\n  \\*/\n  Snap.rad = rad;\n  /*\\\r\n   * Snap.deg\r\n   [ method ]\r\n   **\r\n   * Transform angle to degrees\r\n   - rad (number) angle in radians\r\n   = (number) angle in degrees\r\n  \\*/\n  Snap.deg = deg;\n  /*\\\r\n   * Snap.sin\r\n   [ method ]\r\n   **\r\n   * Equivalent to `Math.sin()` only works with degrees, not radians.\r\n   - angle (number) angle in degrees\r\n   = (number) sin\r\n  \\*/\n  Snap.sin = function (angle) {\n    return math.sin(Snap.rad(angle));\n  };\n  /*\\\r\n   * Snap.tan\r\n   [ method ]\r\n   **\r\n   * Equivalent to `Math.tan()` only works with degrees, not radians.\r\n   - angle (number) angle in degrees\r\n   = (number) tan\r\n  \\*/\n  Snap.tan = function (angle) {\n    return math.tan(Snap.rad(angle));\n  };\n  /*\\\r\n   * Snap.cos\r\n   [ method ]\r\n   **\r\n   * Equivalent to `Math.cos()` only works with degrees, not radians.\r\n   - angle (number) angle in degrees\r\n   = (number) cos\r\n  \\*/\n  Snap.cos = function (angle) {\n    return math.cos(Snap.rad(angle));\n  };\n  /*\\\r\n   * Snap.asin\r\n   [ method ]\r\n   **\r\n   * Equivalent to `Math.asin()` only works with degrees, not radians.\r\n   - num (number) value\r\n   = (number) asin in degrees\r\n  \\*/\n  Snap.asin = function (num) {\n    return Snap.deg(math.asin(num));\n  };\n  /*\\\r\n   * Snap.acos\r\n   [ method ]\r\n   **\r\n   * Equivalent to `Math.acos()` only works with degrees, not radians.\r\n   - num (number) value\r\n   = (number) acos in degrees\r\n  \\*/\n  Snap.acos = function (num) {\n    return Snap.deg(math.acos(num));\n  };\n  /*\\\r\n   * Snap.atan\r\n   [ method ]\r\n   **\r\n   * Equivalent to `Math.atan()` only works with degrees, not radians.\r\n   - num (number) value\r\n   = (number) atan in degrees\r\n  \\*/\n  Snap.atan = function (num) {\n    return Snap.deg(math.atan(num));\n  };\n  /*\\\r\n   * Snap.atan2\r\n   [ method ]\r\n   **\r\n   * Equivalent to `Math.atan2()` only works with degrees, not radians.\r\n   - num (number) value\r\n   = (number) atan2 in degrees\r\n  \\*/\n  Snap.atan2 = function (num) {\n    return Snap.deg(math.atan2(num));\n  };\n  /*\\\r\n   * Snap.angle\r\n   [ method ]\r\n   **\r\n   * Returns an angle between two or three points\r\n   - x1 (number) x coord of first point\r\n   - y1 (number) y coord of first point\r\n   - x2 (number) x coord of second point\r\n   - y2 (number) y coord of second point\r\n   - x3 (number) #optional x coord of third point\r\n   - y3 (number) #optional y coord of third point\r\n   = (number) angle in degrees\r\n  \\*/\n  Snap.angle = angle;\n  /*\\\r\n   * Snap.len\r\n   [ method ]\r\n   **\r\n   * Returns distance between two points\r\n   - x1 (number) x coord of first point\r\n   - y1 (number) y coord of first point\r\n   - x2 (number) x coord of second point\r\n   - y2 (number) y coord of second point\r\n   = (number) distance\r\n  \\*/\n  Snap.len = function (x1, y1, x2, y2) {\n    return Math.sqrt(Snap.len2(x1, y1, x2, y2));\n  };\n  /*\\\r\n   * Snap.len2\r\n   [ method ]\r\n   **\r\n   * Returns squared distance between two points\r\n   - x1 (number) x coord of first point\r\n   - y1 (number) y coord of first point\r\n   - x2 (number) x coord of second point\r\n   - y2 (number) y coord of second point\r\n   = (number) distance\r\n  \\*/\n  Snap.len2 = function (x1, y1, x2, y2) {\n    return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n  };\n  /*\\\r\n   * Snap.closestPoint\r\n   [ method ]\r\n   **\r\n   * Returns closest point to a given one on a given path.\r\n   - path (Element) path element\r\n   - x (number) x coord of a point\r\n   - y (number) y coord of a point\r\n   = (object) in format\r\n   {\r\n      x (number) x coord of the point on the path\r\n      y (number) y coord of the point on the path\r\n      length (number) length of the path to the point\r\n      distance (number) distance from the given point to the path\r\n   }\r\n  \\*/\n  // Copied from http://bl.ocks.org/mbostock/8027637\n  Snap.closestPoint = function (path, x, y) {\n    function distance2(p) {\n      var dx = p.x - x,\n        dy = p.y - y;\n      return dx * dx + dy * dy;\n    }\n    var pathNode = path.node,\n      pathLength = pathNode.getTotalLength(),\n      precision = pathLength / pathNode.pathSegList.numberOfItems * .125,\n      best,\n      bestLength,\n      bestDistance = Infinity;\n\n    // linear scan for coarse approximation\n    for (var scan, scanLength = 0, scanDistance; scanLength <= pathLength; scanLength += precision) {\n      if ((scanDistance = distance2(scan = pathNode.getPointAtLength(scanLength))) < bestDistance) {\n        best = scan;\n        bestLength = scanLength;\n        bestDistance = scanDistance;\n      }\n    }\n\n    // binary search for precise estimate\n    precision *= .5;\n    while (precision > .5) {\n      var before, after, beforeLength, afterLength, beforeDistance, afterDistance;\n      if ((beforeLength = bestLength - precision) >= 0 && (beforeDistance = distance2(before = pathNode.getPointAtLength(beforeLength))) < bestDistance) {\n        best = before;\n        bestLength = beforeLength;\n        bestDistance = beforeDistance;\n      } else if ((afterLength = bestLength + precision) <= pathLength && (afterDistance = distance2(after = pathNode.getPointAtLength(afterLength))) < bestDistance) {\n        best = after;\n        bestLength = afterLength;\n        bestDistance = afterDistance;\n      } else {\n        precision *= .5;\n      }\n    }\n    best = {\n      x: best.x,\n      y: best.y,\n      length: bestLength,\n      distance: Math.sqrt(bestDistance)\n    };\n    return best;\n  };\n  /*\\\r\n   * Snap.is\r\n   [ method ]\r\n   **\r\n   * Handy replacement for the `typeof` operator\r\n   - o (…) any object or primitive\r\n   - type (string) name of the type, e.g., `string`, `function`, `number`, etc.\r\n   = (boolean) `true` if given value is of given type\r\n  \\*/\n  Snap.is = is;\n  /*\\\r\n   * Snap.snapTo\r\n   [ method ]\r\n   **\r\n   * Snaps given value to given grid\r\n   - values (array|number) given array of values or step of the grid\r\n   - value (number) value to adjust\r\n   - tolerance (number) #optional maximum distance to the target value that would trigger the snap. Default is `10`.\r\n   = (number) adjusted value\r\n  \\*/\n  Snap.snapTo = function (values, value, tolerance) {\n    tolerance = is(tolerance, \"finite\") ? tolerance : 10;\n    if (is(values, \"array\")) {\n      var i = values.length;\n      while (i--) if (abs(values[i] - value) <= tolerance) {\n        return values[i];\n      }\n    } else {\n      values = +values;\n      var rem = value % values;\n      if (rem < tolerance) {\n        return value - rem;\n      }\n      if (rem > values - tolerance) {\n        return value - rem + values;\n      }\n    }\n    return value;\n  };\n  // Colour\n  /*\\\r\n   * Snap.getRGB\r\n   [ method ]\r\n   **\r\n   * Parses color string as RGB object\r\n   - color (string) color string in one of the following formats:\r\n   # <ul>\r\n   #     <li>Color name (<code>red</code>, <code>green</code>, <code>cornflowerblue</code>, etc)</li>\r\n   #     <li>#••• — shortened HTML color: (<code>#000</code>, <code>#fc0</code>, etc.)</li>\r\n   #     <li>#•••••• — full length HTML color: (<code>#000000</code>, <code>#bd2300</code>)</li>\r\n   #     <li>rgb(•••, •••, •••) — red, green and blue channels values: (<code>rgb(200,&nbsp;100,&nbsp;0)</code>)</li>\r\n   #     <li>rgba(•••, •••, •••, •••) — also with opacity</li>\r\n   #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>)</li>\r\n   #     <li>rgba(•••%, •••%, •••%, •••%) — also with opacity</li>\r\n   #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>)</li>\r\n   #     <li>hsba(•••, •••, •••, •••) — also with opacity</li>\r\n   #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\r\n   #     <li>hsba(•••%, •••%, •••%, •••%) — also with opacity</li>\r\n   #     <li>hsl(•••, •••, •••) — hue, saturation and luminosity values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;0.5)</code>)</li>\r\n   #     <li>hsla(•••, •••, •••, •••) — also with opacity</li>\r\n   #     <li>hsl(•••%, •••%, •••%) — same as above, but in %</li>\r\n   #     <li>hsla(•••%, •••%, •••%, •••%) — also with opacity</li>\r\n   # </ul>\r\n   * Note that `%` can be used any time: `rgb(20%, 255, 50%)`.\r\n   = (object) RGB object in the following format:\r\n   o {\r\n   o     r (number) red,\r\n   o     g (number) green,\r\n   o     b (number) blue,\r\n   o     hex (string) color in HTML/CSS format: #••••••,\r\n   o     error (boolean) true if string can't be parsed\r\n   o }\r\n  \\*/\n  Snap.getRGB = cacher(function (colour) {\n    if (!colour || !!((colour = Str(colour)).indexOf(\"-\") + 1)) {\n      return {\n        r: -1,\n        g: -1,\n        b: -1,\n        hex: \"none\",\n        error: 1,\n        toString: rgbtoString\n      };\n    }\n    if (colour == \"none\") {\n      return {\n        r: -1,\n        g: -1,\n        b: -1,\n        hex: \"none\",\n        toString: rgbtoString\n      };\n    }\n    !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == \"#\") && (colour = toHex(colour));\n    if (!colour) {\n      return {\n        r: -1,\n        g: -1,\n        b: -1,\n        hex: \"none\",\n        error: 1,\n        toString: rgbtoString\n      };\n    }\n    var res,\n      red,\n      green,\n      blue,\n      opacity,\n      t,\n      values,\n      rgb = colour.match(colourRegExp);\n    if (rgb) {\n      if (rgb[2]) {\n        blue = toInt(rgb[2].substring(5), 16);\n        green = toInt(rgb[2].substring(3, 5), 16);\n        red = toInt(rgb[2].substring(1, 3), 16);\n      }\n      if (rgb[3]) {\n        blue = toInt((t = rgb[3].charAt(3)) + t, 16);\n        green = toInt((t = rgb[3].charAt(2)) + t, 16);\n        red = toInt((t = rgb[3].charAt(1)) + t, 16);\n      }\n      if (rgb[4]) {\n        values = rgb[4].split(commaSpaces);\n        red = toFloat(values[0]);\n        values[0].slice(-1) == \"%\" && (red *= 2.55);\n        green = toFloat(values[1]);\n        values[1].slice(-1) == \"%\" && (green *= 2.55);\n        blue = toFloat(values[2]);\n        values[2].slice(-1) == \"%\" && (blue *= 2.55);\n        rgb[1].toLowerCase().slice(0, 4) == \"rgba\" && (opacity = toFloat(values[3]));\n        values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n      }\n      if (rgb[5]) {\n        values = rgb[5].split(commaSpaces);\n        red = toFloat(values[0]);\n        values[0].slice(-1) == \"%\" && (red /= 100);\n        green = toFloat(values[1]);\n        values[1].slice(-1) == \"%\" && (green /= 100);\n        blue = toFloat(values[2]);\n        values[2].slice(-1) == \"%\" && (blue /= 100);\n        (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n        rgb[1].toLowerCase().slice(0, 4) == \"hsba\" && (opacity = toFloat(values[3]));\n        values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n        return Snap.hsb2rgb(red, green, blue, opacity);\n      }\n      if (rgb[6]) {\n        values = rgb[6].split(commaSpaces);\n        red = toFloat(values[0]);\n        values[0].slice(-1) == \"%\" && (red /= 100);\n        green = toFloat(values[1]);\n        values[1].slice(-1) == \"%\" && (green /= 100);\n        blue = toFloat(values[2]);\n        values[2].slice(-1) == \"%\" && (blue /= 100);\n        (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n        rgb[1].toLowerCase().slice(0, 4) == \"hsla\" && (opacity = toFloat(values[3]));\n        values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n        return Snap.hsl2rgb(red, green, blue, opacity);\n      }\n      red = mmin(math.round(red), 255);\n      green = mmin(math.round(green), 255);\n      blue = mmin(math.round(blue), 255);\n      opacity = mmin(mmax(opacity, 0), 1);\n      rgb = {\n        r: red,\n        g: green,\n        b: blue,\n        toString: rgbtoString\n      };\n      rgb.hex = \"#\" + (16777216 | blue | green << 8 | red << 16).toString(16).slice(1);\n      rgb.opacity = is(opacity, \"finite\") ? opacity : 1;\n      return rgb;\n    }\n    return {\n      r: -1,\n      g: -1,\n      b: -1,\n      hex: \"none\",\n      error: 1,\n      toString: rgbtoString\n    };\n  }, Snap);\n  /*\\\r\n   * Snap.hsb\r\n   [ method ]\r\n   **\r\n   * Converts HSB values to a hex representation of the color\r\n   - h (number) hue\r\n   - s (number) saturation\r\n   - b (number) value or brightness\r\n   = (string) hex representation of the color\r\n  \\*/\n  Snap.hsb = cacher(function (h, s, b) {\n    return Snap.hsb2rgb(h, s, b).hex;\n  });\n  /*\\\r\n   * Snap.hsl\r\n   [ method ]\r\n   **\r\n   * Converts HSL values to a hex representation of the color\r\n   - h (number) hue\r\n   - s (number) saturation\r\n   - l (number) luminosity\r\n   = (string) hex representation of the color\r\n  \\*/\n  Snap.hsl = cacher(function (h, s, l) {\n    return Snap.hsl2rgb(h, s, l).hex;\n  });\n  /*\\\r\n   * Snap.rgb\r\n   [ method ]\r\n   **\r\n   * Converts RGB values to a hex representation of the color\r\n   - r (number) red\r\n   - g (number) green\r\n   - b (number) blue\r\n   = (string) hex representation of the color\r\n  \\*/\n  Snap.rgb = cacher(function (r, g, b, o) {\n    if (is(o, \"finite\")) {\n      var round = math.round;\n      return \"rgba(\" + [round(r), round(g), round(b), +o.toFixed(2)] + \")\";\n    }\n    return \"#\" + (16777216 | b | g << 8 | r << 16).toString(16).slice(1);\n  });\n  var toHex = function (color) {\n      var i = glob.doc.getElementsByTagName(\"head\")[0] || glob.doc.getElementsByTagName(\"svg\")[0],\n        red = \"rgb(255, 0, 0)\";\n      toHex = cacher(function (color) {\n        if (color.toLowerCase() == \"red\") {\n          return red;\n        }\n        i.style.color = red;\n        i.style.color = color;\n        var out = glob.doc.defaultView.getComputedStyle(i, E).getPropertyValue(\"color\");\n        return out == red ? null : out;\n      });\n      return toHex(color);\n    },\n    hsbtoString = function () {\n      return \"hsb(\" + [this.h, this.s, this.b] + \")\";\n    },\n    hsltoString = function () {\n      return \"hsl(\" + [this.h, this.s, this.l] + \")\";\n    },\n    rgbtoString = function () {\n      return this.opacity == 1 || this.opacity == null ? this.hex : \"rgba(\" + [this.r, this.g, this.b, this.opacity] + \")\";\n    },\n    prepareRGB = function (r, g, b) {\n      if (g == null && is(r, \"object\") && \"r\" in r && \"g\" in r && \"b\" in r) {\n        b = r.b;\n        g = r.g;\n        r = r.r;\n      }\n      if (g == null && is(r, string)) {\n        var clr = Snap.getRGB(r);\n        r = clr.r;\n        g = clr.g;\n        b = clr.b;\n      }\n      if (r > 1 || g > 1 || b > 1) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n      return [r, g, b];\n    },\n    packageRGB = function (r, g, b, o) {\n      r = math.round(r * 255);\n      g = math.round(g * 255);\n      b = math.round(b * 255);\n      var rgb = {\n        r: r,\n        g: g,\n        b: b,\n        opacity: is(o, \"finite\") ? o : 1,\n        hex: Snap.rgb(r, g, b),\n        toString: rgbtoString\n      };\n      is(o, \"finite\") && (rgb.opacity = o);\n      return rgb;\n    };\n  /*\\\r\n   * Snap.color\r\n   [ method ]\r\n   **\r\n   * Parses the color string and returns an object featuring the color's component values\r\n   - clr (string) color string in one of the supported formats (see @Snap.getRGB)\r\n   = (object) Combined RGB/HSB object in the following format:\r\n   o {\r\n   o     r (number) red,\r\n   o     g (number) green,\r\n   o     b (number) blue,\r\n   o     hex (string) color in HTML/CSS format: #••••••,\r\n   o     error (boolean) `true` if string can't be parsed,\r\n   o     h (number) hue,\r\n   o     s (number) saturation,\r\n   o     v (number) value (brightness),\r\n   o     l (number) lightness\r\n   o }\r\n  \\*/\n  Snap.color = function (clr) {\n    var rgb;\n    if (is(clr, \"object\") && \"h\" in clr && \"s\" in clr && \"b\" in clr) {\n      rgb = Snap.hsb2rgb(clr);\n      clr.r = rgb.r;\n      clr.g = rgb.g;\n      clr.b = rgb.b;\n      clr.opacity = 1;\n      clr.hex = rgb.hex;\n    } else if (is(clr, \"object\") && \"h\" in clr && \"s\" in clr && \"l\" in clr) {\n      rgb = Snap.hsl2rgb(clr);\n      clr.r = rgb.r;\n      clr.g = rgb.g;\n      clr.b = rgb.b;\n      clr.opacity = 1;\n      clr.hex = rgb.hex;\n    } else {\n      if (is(clr, \"string\")) {\n        clr = Snap.getRGB(clr);\n      }\n      if (is(clr, \"object\") && \"r\" in clr && \"g\" in clr && \"b\" in clr && !(\"error\" in clr)) {\n        rgb = Snap.rgb2hsl(clr);\n        clr.h = rgb.h;\n        clr.s = rgb.s;\n        clr.l = rgb.l;\n        rgb = Snap.rgb2hsb(clr);\n        clr.v = rgb.b;\n      } else {\n        clr = {\n          hex: \"none\"\n        };\n        clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\n        clr.error = 1;\n      }\n    }\n    clr.toString = rgbtoString;\n    return clr;\n  };\n  /*\\\r\n   * Snap.hsb2rgb\r\n   [ method ]\r\n   **\r\n   * Converts HSB values to an RGB object\r\n   - h (number) hue\r\n   - s (number) saturation\r\n   - v (number) value or brightness\r\n   = (object) RGB object in the following format:\r\n   o {\r\n   o     r (number) red,\r\n   o     g (number) green,\r\n   o     b (number) blue,\r\n   o     hex (string) color in HTML/CSS format: #••••••\r\n   o }\r\n  \\*/\n  Snap.hsb2rgb = function (h, s, v, o) {\n    if (is(h, \"object\") && \"h\" in h && \"s\" in h && \"b\" in h) {\n      v = h.b;\n      s = h.s;\n      o = h.o;\n      h = h.h;\n    }\n    h *= 360;\n    var R, G, B, X, C;\n    h = h % 360 / 60;\n    C = v * s;\n    X = C * (1 - abs(h % 2 - 1));\n    R = G = B = v - C;\n    h = ~~h;\n    R += [C, X, 0, 0, X, C][h];\n    G += [X, C, C, X, 0, 0][h];\n    B += [0, 0, X, C, C, X][h];\n    return packageRGB(R, G, B, o);\n  };\n  /*\\\r\n   * Snap.hsl2rgb\r\n   [ method ]\r\n   **\r\n   * Converts HSL values to an RGB object\r\n   - h (number) hue\r\n   - s (number) saturation\r\n   - l (number) luminosity\r\n   = (object) RGB object in the following format:\r\n   o {\r\n   o     r (number) red,\r\n   o     g (number) green,\r\n   o     b (number) blue,\r\n   o     hex (string) color in HTML/CSS format: #••••••\r\n   o }\r\n  \\*/\n  Snap.hsl2rgb = function (h, s, l, o) {\n    if (is(h, \"object\") && \"h\" in h && \"s\" in h && \"l\" in h) {\n      l = h.l;\n      s = h.s;\n      h = h.h;\n    }\n    if (h > 1 || s > 1 || l > 1) {\n      h /= 360;\n      s /= 100;\n      l /= 100;\n    }\n    h *= 360;\n    var R, G, B, X, C;\n    h = h % 360 / 60;\n    C = 2 * s * (l < .5 ? l : 1 - l);\n    X = C * (1 - abs(h % 2 - 1));\n    R = G = B = l - C / 2;\n    h = ~~h;\n    R += [C, X, 0, 0, X, C][h];\n    G += [X, C, C, X, 0, 0][h];\n    B += [0, 0, X, C, C, X][h];\n    return packageRGB(R, G, B, o);\n  };\n  /*\\\r\n   * Snap.rgb2hsb\r\n   [ method ]\r\n   **\r\n   * Converts RGB values to an HSB object\r\n   - r (number) red\r\n   - g (number) green\r\n   - b (number) blue\r\n   = (object) HSB object in the following format:\r\n   o {\r\n   o     h (number) hue,\r\n   o     s (number) saturation,\r\n   o     b (number) brightness\r\n   o }\r\n  \\*/\n  Snap.rgb2hsb = function (r, g, b) {\n    b = prepareRGB(r, g, b);\n    r = b[0];\n    g = b[1];\n    b = b[2];\n    var H, S, V, C;\n    V = mmax(r, g, b);\n    C = V - mmin(r, g, b);\n    H = C == 0 ? null : V == r ? (g - b) / C : V == g ? (b - r) / C + 2 : (r - g) / C + 4;\n    H = (H + 360) % 6 * 60 / 360;\n    S = C == 0 ? 0 : C / V;\n    return {\n      h: H,\n      s: S,\n      b: V,\n      toString: hsbtoString\n    };\n  };\n  /*\\\r\n   * Snap.rgb2hsl\r\n   [ method ]\r\n   **\r\n   * Converts RGB values to an HSL object\r\n   - r (number) red\r\n   - g (number) green\r\n   - b (number) blue\r\n   = (object) HSL object in the following format:\r\n   o {\r\n   o     h (number) hue,\r\n   o     s (number) saturation,\r\n   o     l (number) luminosity\r\n   o }\r\n  \\*/\n  Snap.rgb2hsl = function (r, g, b) {\n    b = prepareRGB(r, g, b);\n    r = b[0];\n    g = b[1];\n    b = b[2];\n    var H, S, L, M, m, C;\n    M = mmax(r, g, b);\n    m = mmin(r, g, b);\n    C = M - m;\n    H = C == 0 ? null : M == r ? (g - b) / C : M == g ? (b - r) / C + 2 : (r - g) / C + 4;\n    H = (H + 360) % 6 * 60 / 360;\n    L = (M + m) / 2;\n    S = C == 0 ? 0 : L < .5 ? C / (2 * L) : C / (2 - 2 * L);\n    return {\n      h: H,\n      s: S,\n      l: L,\n      toString: hsltoString\n    };\n  };\n\n  // Transformations\n  /*\\\r\n   * Snap.parsePathString\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Parses given path string into an array of arrays of path segments\r\n   - pathString (string|array) path string or array of segments (in the last case it is returned straight away)\r\n   = (array) array of segments\r\n  \\*/\n  Snap.parsePathString = function (pathString) {\n    if (!pathString) {\n      return null;\n    }\n    var pth = Snap.path(pathString);\n    if (pth.arr) {\n      return Snap.path.clone(pth.arr);\n    }\n    var paramCounts = {\n        a: 7,\n        c: 6,\n        o: 2,\n        h: 1,\n        l: 2,\n        m: 2,\n        r: 4,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        u: 3,\n        z: 0\n      },\n      data = [];\n    if (is(pathString, \"array\") && is(pathString[0], \"array\")) {\n      // rough assumption\n      data = Snap.path.clone(pathString);\n    }\n    if (!data.length) {\n      Str(pathString).replace(pathCommand, function (a, b, c) {\n        var params = [],\n          name = b.toLowerCase();\n        c.replace(pathValues, function (a, b) {\n          b && params.push(+b);\n        });\n        if (name == \"m\" && params.length > 2) {\n          data.push([b].concat(params.splice(0, 2)));\n          name = \"l\";\n          b = b == \"m\" ? \"l\" : \"L\";\n        }\n        if (name == \"o\" && params.length == 1) {\n          data.push([b, params[0]]);\n        }\n        if (name == \"r\") {\n          data.push([b].concat(params));\n        } else while (params.length >= paramCounts[name]) {\n          data.push([b].concat(params.splice(0, paramCounts[name])));\n          if (!paramCounts[name]) {\n            break;\n          }\n        }\n      });\n    }\n    data.toString = Snap.path.toString;\n    pth.arr = Snap.path.clone(data);\n    return data;\n  };\n  /*\\\r\n   * Snap.parseTransformString\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Parses given transform string into an array of transformations\r\n   - TString (string|array) transform string or array of transformations (in the last case it is returned straight away)\r\n   = (array) array of transformations\r\n  \\*/\n  var parseTransformString = Snap.parseTransformString = function (TString) {\n    if (!TString) {\n      return null;\n    }\n    var paramCounts = {\n        r: 3,\n        s: 4,\n        t: 2,\n        m: 6\n      },\n      data = [];\n    if (is(TString, \"array\") && is(TString[0], \"array\")) {\n      // rough assumption\n      data = Snap.path.clone(TString);\n    }\n    if (!data.length) {\n      Str(TString).replace(tCommand, function (a, b, c) {\n        var params = [],\n          name = b.toLowerCase();\n        c.replace(pathValues, function (a, b) {\n          b && params.push(+b);\n        });\n        data.push([b].concat(params));\n      });\n    }\n    data.toString = Snap.path.toString;\n    return data;\n  };\n  function svgTransform2string(tstr) {\n    var res = [];\n    tstr = tstr.replace(/(?:^|\\s)(\\w+)\\(([^)]+)\\)/g, function (all, name, params) {\n      params = params.split(/\\s*,\\s*|\\s+/);\n      if (name == \"rotate\" && params.length == 1) {\n        params.push(0, 0);\n      }\n      if (name == \"scale\") {\n        if (params.length > 2) {\n          params = params.slice(0, 2);\n        } else if (params.length == 2) {\n          params.push(0, 0);\n        }\n        if (params.length == 1) {\n          params.push(params[0], 0, 0);\n        }\n      }\n      if (name == \"skewX\") {\n        res.push([\"m\", 1, 0, math.tan(rad(params[0])), 1, 0, 0]);\n      } else if (name == \"skewY\") {\n        res.push([\"m\", 1, math.tan(rad(params[0])), 0, 1, 0, 0]);\n      } else {\n        res.push([name.charAt(0)].concat(params));\n      }\n      return all;\n    });\n    return res;\n  }\n  Snap._.svgTransform2string = svgTransform2string;\n  Snap._.rgTransform = /^[a-z][\\s]*-?\\.?\\d/i;\n  function transform2matrix(tstr, bbox) {\n    var tdata = parseTransformString(tstr),\n      m = new Snap.Matrix();\n    if (tdata) {\n      for (var i = 0, ii = tdata.length; i < ii; i++) {\n        var t = tdata[i],\n          tlen = t.length,\n          command = Str(t[0]).toLowerCase(),\n          absolute = t[0] != command,\n          inver = absolute ? m.invert() : 0,\n          x1,\n          y1,\n          x2,\n          y2,\n          bb;\n        if (command == \"t\" && tlen == 2) {\n          m.translate(t[1], 0);\n        } else if (command == \"t\" && tlen == 3) {\n          if (absolute) {\n            x1 = inver.x(0, 0);\n            y1 = inver.y(0, 0);\n            x2 = inver.x(t[1], t[2]);\n            y2 = inver.y(t[1], t[2]);\n            m.translate(x2 - x1, y2 - y1);\n          } else {\n            m.translate(t[1], t[2]);\n          }\n        } else if (command == \"r\") {\n          if (tlen == 2) {\n            bb = bb || bbox;\n            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n          } else if (tlen == 4) {\n            if (absolute) {\n              x2 = inver.x(t[2], t[3]);\n              y2 = inver.y(t[2], t[3]);\n              m.rotate(t[1], x2, y2);\n            } else {\n              m.rotate(t[1], t[2], t[3]);\n            }\n          }\n        } else if (command == \"s\") {\n          if (tlen == 2 || tlen == 3) {\n            bb = bb || bbox;\n            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n          } else if (tlen == 4) {\n            if (absolute) {\n              x2 = inver.x(t[2], t[3]);\n              y2 = inver.y(t[2], t[3]);\n              m.scale(t[1], t[1], x2, y2);\n            } else {\n              m.scale(t[1], t[1], t[2], t[3]);\n            }\n          } else if (tlen == 5) {\n            if (absolute) {\n              x2 = inver.x(t[3], t[4]);\n              y2 = inver.y(t[3], t[4]);\n              m.scale(t[1], t[2], x2, y2);\n            } else {\n              m.scale(t[1], t[2], t[3], t[4]);\n            }\n          }\n        } else if (command == \"m\" && tlen == 7) {\n          m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\n        }\n      }\n    }\n    return m;\n  }\n  Snap._.transform2matrix = transform2matrix;\n  Snap._unit2px = unit2px;\n  var contains = glob.doc.contains || glob.doc.compareDocumentPosition ? function (a, b) {\n    var adown = a.nodeType == 9 ? a.documentElement : a,\n      bup = b && b.parentNode;\n    return a == bup || !!(bup && bup.nodeType == 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n  } : function (a, b) {\n    if (b) {\n      while (b) {\n        b = b.parentNode;\n        if (b == a) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  function getSomeDefs(el) {\n    var p = el.node.ownerSVGElement && wrap(el.node.ownerSVGElement) || el.node.parentNode && wrap(el.node.parentNode) || Snap.select(\"svg\") || Snap(0, 0),\n      pdefs = p.select(\"defs\"),\n      defs = pdefs == null ? false : pdefs.node;\n    if (!defs) {\n      defs = make(\"defs\", p.node).node;\n    }\n    return defs;\n  }\n  function getSomeSVG(el) {\n    return el.node.ownerSVGElement && wrap(el.node.ownerSVGElement) || Snap.select(\"svg\");\n  }\n  Snap._.getSomeDefs = getSomeDefs;\n  Snap._.getSomeSVG = getSomeSVG;\n  function unit2px(el, name, value) {\n    var svg = getSomeSVG(el).node,\n      out = {},\n      mgr = svg.querySelector(\".svg---mgr\");\n    if (!mgr) {\n      mgr = $(\"rect\");\n      $(mgr, {\n        x: -9e9,\n        y: -9e9,\n        width: 10,\n        height: 10,\n        \"class\": \"svg---mgr\",\n        fill: \"none\"\n      });\n      svg.appendChild(mgr);\n    }\n    function getW(val) {\n      if (val == null) {\n        return E;\n      }\n      if (val == +val) {\n        return val;\n      }\n      $(mgr, {\n        width: val\n      });\n      try {\n        return mgr.getBBox().width;\n      } catch (e) {\n        return 0;\n      }\n    }\n    function getH(val) {\n      if (val == null) {\n        return E;\n      }\n      if (val == +val) {\n        return val;\n      }\n      $(mgr, {\n        height: val\n      });\n      try {\n        return mgr.getBBox().height;\n      } catch (e) {\n        return 0;\n      }\n    }\n    function set(nam, f) {\n      if (name == null) {\n        out[nam] = f(el.attr(nam) || 0);\n      } else if (nam == name) {\n        out = f(value == null ? el.attr(nam) || 0 : value);\n      }\n    }\n    switch (el.type) {\n      case \"rect\":\n        set(\"rx\", getW);\n        set(\"ry\", getH);\n      case \"image\":\n        set(\"width\", getW);\n        set(\"height\", getH);\n      case \"text\":\n        set(\"x\", getW);\n        set(\"y\", getH);\n        break;\n      case \"circle\":\n        set(\"cx\", getW);\n        set(\"cy\", getH);\n        set(\"r\", getW);\n        break;\n      case \"ellipse\":\n        set(\"cx\", getW);\n        set(\"cy\", getH);\n        set(\"rx\", getW);\n        set(\"ry\", getH);\n        break;\n      case \"line\":\n        set(\"x1\", getW);\n        set(\"x2\", getW);\n        set(\"y1\", getH);\n        set(\"y2\", getH);\n        break;\n      case \"marker\":\n        set(\"refX\", getW);\n        set(\"markerWidth\", getW);\n        set(\"refY\", getH);\n        set(\"markerHeight\", getH);\n        break;\n      case \"radialGradient\":\n        set(\"fx\", getW);\n        set(\"fy\", getH);\n        break;\n      case \"tspan\":\n        set(\"dx\", getW);\n        set(\"dy\", getH);\n        break;\n      default:\n        set(name, getW);\n    }\n    svg.removeChild(mgr);\n    return out;\n  }\n  /*\\\r\n   * Snap.select\r\n   [ method ]\r\n   **\r\n   * Wraps a DOM element specified by CSS selector as @Element\r\n   - query (string) CSS selector of the element\r\n   = (Element) the current element\r\n  \\*/\n  Snap.select = function (query) {\n    query = Str(query).replace(/([^\\\\]):/g, \"$1\\\\:\");\n    return wrap(glob.doc.querySelector(query));\n  };\n  /*\\\r\n   * Snap.selectAll\r\n   [ method ]\r\n   **\r\n   * Wraps DOM elements specified by CSS selector as set or array of @Element\r\n   - query (string) CSS selector of the element\r\n   = (Element) the current element\r\n  \\*/\n  Snap.selectAll = function (query) {\n    var nodelist = glob.doc.querySelectorAll(query),\n      set = (Snap.set || Array)();\n    for (var i = 0; i < nodelist.length; i++) {\n      set.push(wrap(nodelist[i]));\n    }\n    return set;\n  };\n  function add2group(list) {\n    if (!is(list, \"array\")) {\n      list = Array.prototype.slice.call(arguments, 0);\n    }\n    var i = 0,\n      j = 0,\n      node = this.node;\n    while (this[i]) delete this[i++];\n    for (i = 0; i < list.length; i++) {\n      if (list[i].type == \"set\") {\n        list[i].forEach(function (el) {\n          node.appendChild(el.node);\n        });\n      } else {\n        node.appendChild(list[i].node);\n      }\n    }\n    var children = node.childNodes;\n    for (i = 0; i < children.length; i++) {\n      this[j++] = wrap(children[i]);\n    }\n    return this;\n  }\n  // Hub garbage collector every 10s\n  setInterval(function () {\n    for (var key in hub) if (hub[has](key)) {\n      var el = hub[key],\n        node = el.node;\n      if (el.type != \"svg\" && !node.ownerSVGElement || el.type == \"svg\" && (!node.parentNode || \"ownerSVGElement\" in node.parentNode && !node.ownerSVGElement)) {\n        delete hub[key];\n      }\n    }\n  }, 1e4);\n  function Element(el) {\n    if (el.snap in hub) {\n      return hub[el.snap];\n    }\n    var svg;\n    try {\n      svg = el.ownerSVGElement;\n    } catch (e) {}\n    /*\\\r\n     * Element.node\r\n     [ property (object) ]\r\n     **\r\n     * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.\r\n     > Usage\r\n     | // draw a circle at coordinate 10,10 with radius of 10\r\n     | var c = paper.circle(10, 10, 10);\r\n     | c.node.onclick = function () {\r\n     |     c.attr(\"fill\", \"red\");\r\n     | };\r\n    \\*/\n    this.node = el;\n    if (svg) {\n      this.paper = new Paper(svg);\n    }\n    /*\\\r\n     * Element.type\r\n     [ property (string) ]\r\n     **\r\n     * SVG tag name of the given element.\r\n    \\*/\n    this.type = el.tagName || el.nodeName;\n    var id = this.id = ID(this);\n    this.anims = {};\n    this._ = {\n      transform: []\n    };\n    el.snap = id;\n    hub[id] = this;\n    if (this.type == \"g\") {\n      this.add = add2group;\n    }\n    if (this.type in {\n      g: 1,\n      mask: 1,\n      pattern: 1,\n      symbol: 1\n    }) {\n      for (var method in Paper.prototype) if (Paper.prototype[has](method)) {\n        this[method] = Paper.prototype[method];\n      }\n    }\n  }\n  /*\\\r\n    * Element.attr\r\n    [ method ]\r\n    **\r\n    * Gets or sets given attributes of the element.\r\n    **\r\n    - params (object) contains key-value pairs of attributes you want to set\r\n    * or\r\n    - param (string) name of the attribute\r\n    = (Element) the current element\r\n    * or\r\n    = (string) value of attribute\r\n    > Usage\r\n    | el.attr({\r\n    |     fill: \"#fc0\",\r\n    |     stroke: \"#000\",\r\n    |     strokeWidth: 2, // CamelCase...\r\n    |     \"fill-opacity\": 0.5, // or dash-separated names\r\n    |     width: \"*=2\" // prefixed values\r\n    | });\r\n    | console.log(el.attr(\"fill\")); // #fc0\r\n    * Prefixed values in format `\"+=10\"` supported. All four operations\r\n    * (`+`, `-`, `*` and `/`) could be used. Optionally you can use units for `+`\r\n    * and `-`: `\"+=2em\"`.\r\n   \\*/\n  Element.prototype.attr = function (params, value) {\n    var el = this,\n      node = el.node;\n    if (!params) {\n      if (node.nodeType != 1) {\n        return {\n          text: node.nodeValue\n        };\n      }\n      var attr = node.attributes,\n        out = {};\n      for (var i = 0, ii = attr.length; i < ii; i++) {\n        out[attr[i].nodeName] = attr[i].nodeValue;\n      }\n      return out;\n    }\n    if (is(params, \"string\")) {\n      if (arguments.length > 1) {\n        var json = {};\n        json[params] = value;\n        params = json;\n      } else {\n        return eve(\"snap.util.getattr.\" + params, el).firstDefined();\n      }\n    }\n    for (var att in params) {\n      if (params[has](att)) {\n        eve(\"snap.util.attr.\" + att, el, params[att]);\n      }\n    }\n    return el;\n  };\n  /*\\\r\n   * Snap.parse\r\n   [ method ]\r\n   **\r\n   * Parses SVG fragment and converts it into a @Fragment\r\n   **\r\n   - svg (string) SVG string\r\n   = (Fragment) the @Fragment\r\n  \\*/\n  Snap.parse = function (svg) {\n    var f = glob.doc.createDocumentFragment(),\n      full = true,\n      div = glob.doc.createElement(\"div\");\n    svg = Str(svg);\n    if (!svg.match(/^\\s*<\\s*svg(?:\\s|>)/)) {\n      svg = \"<svg>\" + svg + \"</svg>\";\n      full = false;\n    }\n    div.innerHTML = svg;\n    svg = div.getElementsByTagName(\"svg\")[0];\n    if (svg) {\n      if (full) {\n        f = svg;\n      } else {\n        while (svg.firstChild) {\n          f.appendChild(svg.firstChild);\n        }\n      }\n    }\n    return new Fragment(f);\n  };\n  function Fragment(frag) {\n    this.node = frag;\n  }\n  /*\\\r\n   * Snap.fragment\r\n   [ method ]\r\n   **\r\n   * Creates a DOM fragment from a given list of elements or strings\r\n   **\r\n   - varargs (…) SVG string\r\n   = (Fragment) the @Fragment\r\n  \\*/\n  Snap.fragment = function () {\n    var args = Array.prototype.slice.call(arguments, 0),\n      f = glob.doc.createDocumentFragment();\n    for (var i = 0, ii = args.length; i < ii; i++) {\n      var item = args[i];\n      if (item.node && item.node.nodeType) {\n        f.appendChild(item.node);\n      }\n      if (item.nodeType) {\n        f.appendChild(item);\n      }\n      if (typeof item == \"string\") {\n        f.appendChild(Snap.parse(item).node);\n      }\n    }\n    return new Fragment(f);\n  };\n  function make(name, parent) {\n    var res = $(name);\n    parent.appendChild(res);\n    var el = wrap(res);\n    return el;\n  }\n  function Paper(w, h) {\n    var res,\n      desc,\n      defs,\n      proto = Paper.prototype;\n    if (w && w.tagName && w.tagName.toLowerCase() == \"svg\") {\n      if (w.snap in hub) {\n        return hub[w.snap];\n      }\n      var doc = w.ownerDocument;\n      res = new Element(w);\n      desc = w.getElementsByTagName(\"desc\")[0];\n      defs = w.getElementsByTagName(\"defs\")[0];\n      if (!desc) {\n        desc = $(\"desc\");\n        desc.appendChild(doc.createTextNode(\"Created with Snap\"));\n        res.node.appendChild(desc);\n      }\n      if (!defs) {\n        defs = $(\"defs\");\n        res.node.appendChild(defs);\n      }\n      res.defs = defs;\n      for (var key in proto) if (proto[has](key)) {\n        res[key] = proto[key];\n      }\n      res.paper = res.root = res;\n    } else {\n      res = make(\"svg\", glob.doc.body);\n      $(res.node, {\n        height: h,\n        version: 1.1,\n        width: w,\n        xmlns: xmlns\n      });\n    }\n    return res;\n  }\n  function wrap(dom) {\n    if (!dom) {\n      return dom;\n    }\n    if (dom instanceof Element || dom instanceof Fragment) {\n      return dom;\n    }\n    if (dom.tagName && dom.tagName.toLowerCase() == \"svg\") {\n      return new Paper(dom);\n    }\n    if (dom.tagName && dom.tagName.toLowerCase() == \"object\" && dom.type == \"image/svg+xml\") {\n      return new Paper(dom.contentDocument.getElementsByTagName(\"svg\")[0]);\n    }\n    return new Element(dom);\n  }\n  Snap._.make = make;\n  Snap._.wrap = wrap;\n  /*\\\r\n   * Paper.el\r\n   [ method ]\r\n   **\r\n   * Creates an element on paper with a given name and no attributes\r\n   **\r\n   - name (string) tag name\r\n   - attr (object) attributes\r\n   = (Element) the current element\r\n   > Usage\r\n   | var c = paper.circle(10, 10, 10); // is the same as...\r\n   | var c = paper.el(\"circle\").attr({\r\n   |     cx: 10,\r\n   |     cy: 10,\r\n   |     r: 10\r\n   | });\r\n   | // and the same as\r\n   | var c = paper.el(\"circle\", {\r\n   |     cx: 10,\r\n   |     cy: 10,\r\n   |     r: 10\r\n   | });\r\n  \\*/\n  Paper.prototype.el = function (name, attr) {\n    var el = make(name, this.node);\n    attr && el.attr(attr);\n    return el;\n  };\n  /*\\\r\n   * Element.children\r\n   [ method ]\r\n   **\r\n   * Returns array of all the children of the element.\r\n   = (array) array of Elements\r\n  \\*/\n  Element.prototype.children = function () {\n    var out = [],\n      ch = this.node.childNodes;\n    for (var i = 0, ii = ch.length; i < ii; i++) {\n      out[i] = Snap(ch[i]);\n    }\n    return out;\n  };\n  function jsonFiller(root, o) {\n    for (var i = 0, ii = root.length; i < ii; i++) {\n      var item = {\n          type: root[i].type,\n          attr: root[i].attr()\n        },\n        children = root[i].children();\n      o.push(item);\n      if (children.length) {\n        jsonFiller(children, item.childNodes = []);\n      }\n    }\n  }\n  /*\\\r\n   * Element.toJSON\r\n   [ method ]\r\n   **\r\n   * Returns object representation of the given element and all its children.\r\n   = (object) in format\r\n   o {\r\n   o     type (string) this.type,\r\n   o     attr (object) attributes map,\r\n   o     childNodes (array) optional array of children in the same format\r\n   o }\r\n  \\*/\n  Element.prototype.toJSON = function () {\n    var out = [];\n    jsonFiller([this], out);\n    return out[0];\n  };\n  // default\n  eve.on(\"snap.util.getattr\", function () {\n    var att = eve.nt();\n    att = att.substring(att.lastIndexOf(\".\") + 1);\n    var css = att.replace(/[A-Z]/g, function (letter) {\n      return \"-\" + letter.toLowerCase();\n    });\n    if (cssAttr[has](css)) {\n      return this.node.ownerDocument.defaultView.getComputedStyle(this.node, null).getPropertyValue(css);\n    } else {\n      return $(this.node, att);\n    }\n  });\n  var cssAttr = {\n    \"alignment-baseline\": 0,\n    \"baseline-shift\": 0,\n    \"clip\": 0,\n    \"clip-path\": 0,\n    \"clip-rule\": 0,\n    \"color\": 0,\n    \"color-interpolation\": 0,\n    \"color-interpolation-filters\": 0,\n    \"color-profile\": 0,\n    \"color-rendering\": 0,\n    \"cursor\": 0,\n    \"direction\": 0,\n    \"display\": 0,\n    \"dominant-baseline\": 0,\n    \"enable-background\": 0,\n    \"fill\": 0,\n    \"fill-opacity\": 0,\n    \"fill-rule\": 0,\n    \"filter\": 0,\n    \"flood-color\": 0,\n    \"flood-opacity\": 0,\n    \"font\": 0,\n    \"font-family\": 0,\n    \"font-size\": 0,\n    \"font-size-adjust\": 0,\n    \"font-stretch\": 0,\n    \"font-style\": 0,\n    \"font-variant\": 0,\n    \"font-weight\": 0,\n    \"glyph-orientation-horizontal\": 0,\n    \"glyph-orientation-vertical\": 0,\n    \"image-rendering\": 0,\n    \"kerning\": 0,\n    \"letter-spacing\": 0,\n    \"lighting-color\": 0,\n    \"marker\": 0,\n    \"marker-end\": 0,\n    \"marker-mid\": 0,\n    \"marker-start\": 0,\n    \"mask\": 0,\n    \"opacity\": 0,\n    \"overflow\": 0,\n    \"pointer-events\": 0,\n    \"shape-rendering\": 0,\n    \"stop-color\": 0,\n    \"stop-opacity\": 0,\n    \"stroke\": 0,\n    \"stroke-dasharray\": 0,\n    \"stroke-dashoffset\": 0,\n    \"stroke-linecap\": 0,\n    \"stroke-linejoin\": 0,\n    \"stroke-miterlimit\": 0,\n    \"stroke-opacity\": 0,\n    \"stroke-width\": 0,\n    \"text-anchor\": 0,\n    \"text-decoration\": 0,\n    \"text-rendering\": 0,\n    \"unicode-bidi\": 0,\n    \"visibility\": 0,\n    \"word-spacing\": 0,\n    \"writing-mode\": 0\n  };\n  eve.on(\"snap.util.attr\", function (value) {\n    var att = eve.nt(),\n      attr = {};\n    att = att.substring(att.lastIndexOf(\".\") + 1);\n    attr[att] = value;\n    var style = att.replace(/-(\\w)/gi, function (all, letter) {\n        return letter.toUpperCase();\n      }),\n      css = att.replace(/[A-Z]/g, function (letter) {\n        return \"-\" + letter.toLowerCase();\n      });\n    if (cssAttr[has](css)) {\n      this.node.style[style] = value == null ? E : value;\n    } else {\n      $(this.node, attr);\n    }\n  });\n  (function (proto) {})(Paper.prototype);\n\n  // simple ajax\n  /*\\\r\n   * Snap.ajax\r\n   [ method ]\r\n   **\r\n   * Simple implementation of Ajax\r\n   **\r\n   - url (string) URL\r\n   - postData (object|string) data for post request\r\n   - callback (function) callback\r\n   - scope (object) #optional scope of callback\r\n   * or\r\n   - url (string) URL\r\n   - callback (function) callback\r\n   - scope (object) #optional scope of callback\r\n   = (XMLHttpRequest) the XMLHttpRequest object, just in case\r\n  \\*/\n  Snap.ajax = function (url, postData, callback, scope) {\n    var req = new XMLHttpRequest(),\n      id = ID();\n    if (req) {\n      if (is(postData, \"function\")) {\n        scope = callback;\n        callback = postData;\n        postData = null;\n      } else if (is(postData, \"object\")) {\n        var pd = [];\n        for (var key in postData) if (postData.hasOwnProperty(key)) {\n          pd.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(postData[key]));\n        }\n        postData = pd.join(\"&\");\n      }\n      req.open(postData ? \"POST\" : \"GET\", url, true);\n      if (postData) {\n        req.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        req.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      }\n      if (callback) {\n        eve.once(\"snap.ajax.\" + id + \".0\", callback);\n        eve.once(\"snap.ajax.\" + id + \".200\", callback);\n        eve.once(\"snap.ajax.\" + id + \".304\", callback);\n      }\n      req.onreadystatechange = function () {\n        if (req.readyState != 4) return;\n        eve(\"snap.ajax.\" + id + \".\" + req.status, scope, req);\n      };\n      if (req.readyState == 4) {\n        return req;\n      }\n      req.send(postData);\n      return req;\n    }\n  };\n  /*\\\r\n   * Snap.load\r\n   [ method ]\r\n   **\r\n   * Loads external SVG file as a @Fragment (see @Snap.ajax for more advanced AJAX)\r\n   **\r\n   - url (string) URL\r\n   - callback (function) callback\r\n   - scope (object) #optional scope of callback\r\n  \\*/\n  Snap.load = function (url, callback, scope) {\n    Snap.ajax(url, function (req) {\n      var f = Snap.parse(req.responseText);\n      scope ? callback.call(scope, f) : callback(f);\n    });\n  };\n  var getOffset = function (elem) {\n    var box = elem.getBoundingClientRect(),\n      doc = elem.ownerDocument,\n      body = doc.body,\n      docElem = doc.documentElement,\n      clientTop = docElem.clientTop || body.clientTop || 0,\n      clientLeft = docElem.clientLeft || body.clientLeft || 0,\n      top = box.top + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop) - clientTop,\n      left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\n    return {\n      y: top,\n      x: left\n    };\n  };\n  /*\\\r\n   * Snap.getElementByPoint\r\n   [ method ]\r\n   **\r\n   * Returns you topmost element under given point.\r\n   **\r\n   = (object) Snap element object\r\n   - x (number) x coordinate from the top left corner of the window\r\n   - y (number) y coordinate from the top left corner of the window\r\n   > Usage\r\n   | Snap.getElementByPoint(mouseX, mouseY).attr({stroke: \"#f00\"});\r\n  \\*/\n  Snap.getElementByPoint = function (x, y) {\n    var paper = this,\n      svg = paper.canvas,\n      target = glob.doc.elementFromPoint(x, y);\n    if (glob.win.opera && target.tagName == \"svg\") {\n      var so = getOffset(target),\n        sr = target.createSVGRect();\n      sr.x = x - so.x;\n      sr.y = y - so.y;\n      sr.width = sr.height = 1;\n      var hits = target.getIntersectionList(sr, null);\n      if (hits.length) {\n        target = hits[hits.length - 1];\n      }\n    }\n    if (!target) {\n      return null;\n    }\n    return wrap(target);\n  };\n  /*\\\r\n   * Snap.plugin\r\n   [ method ]\r\n   **\r\n   * Let you write plugins. You pass in a function with five arguments, like this:\r\n   | Snap.plugin(function (Snap, Element, Paper, global, Fragment) {\r\n   |     Snap.newmethod = function () {};\r\n   |     Element.prototype.newmethod = function () {};\r\n   |     Paper.prototype.newmethod = function () {};\r\n   | });\r\n   * Inside the function you have access to all main objects (and their\r\n   * prototypes). This allow you to extend anything you want.\r\n   **\r\n   - f (function) your plugin body\r\n  \\*/\n  Snap.plugin = function (f) {\n    f(Snap, Element, Paper, glob, Fragment);\n  };\n  glob.win.Snap = Snap;\n  return Snap;\n}(window || this);\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var elproto = Element.prototype,\n    is = Snap.is,\n    Str = String,\n    unit2px = Snap._unit2px,\n    $ = Snap._.$,\n    make = Snap._.make,\n    getSomeDefs = Snap._.getSomeDefs,\n    has = \"hasOwnProperty\",\n    wrap = Snap._.wrap;\n  /*\\\r\n   * Element.getBBox\r\n   [ method ]\r\n   **\r\n   * Returns the bounding box descriptor for the given element\r\n   **\r\n   = (object) bounding box descriptor:\r\n   o {\r\n   o     cx: (number) x of the center,\r\n   o     cy: (number) x of the center,\r\n   o     h: (number) height,\r\n   o     height: (number) height,\r\n   o     path: (string) path command for the box,\r\n   o     r0: (number) radius of a circle that fully encloses the box,\r\n   o     r1: (number) radius of the smallest circle that can be enclosed,\r\n   o     r2: (number) radius of the largest circle that can be enclosed,\r\n   o     vb: (string) box as a viewbox command,\r\n   o     w: (number) width,\r\n   o     width: (number) width,\r\n   o     x2: (number) x of the right side,\r\n   o     x: (number) x of the left side,\r\n   o     y2: (number) y of the bottom edge,\r\n   o     y: (number) y of the top edge\r\n   o }\r\n  \\*/\n  elproto.getBBox = function (isWithoutTransform) {\n    if (this.type == \"tspan\") {\n      return Snap._.box(this.node.getClientRects().item(0));\n    }\n    if (!Snap.Matrix || !Snap.path) {\n      return this.node.getBBox();\n    }\n    var el = this,\n      m = new Snap.Matrix();\n    if (el.removed) {\n      return Snap._.box();\n    }\n    while (el.type == \"use\") {\n      if (!isWithoutTransform) {\n        m = m.add(el.transform().localMatrix.translate(el.attr(\"x\") || 0, el.attr(\"y\") || 0));\n      }\n      if (el.original) {\n        el = el.original;\n      } else {\n        var href = el.attr(\"xlink:href\");\n        el = el.original = el.node.ownerDocument.getElementById(href.substring(href.indexOf(\"#\") + 1));\n      }\n    }\n    var _ = el._,\n      pathfinder = Snap.path.get[el.type] || Snap.path.get.deflt;\n    try {\n      if (isWithoutTransform) {\n        _.bboxwt = pathfinder ? Snap.path.getBBox(el.realPath = pathfinder(el)) : Snap._.box(el.node.getBBox());\n        return Snap._.box(_.bboxwt);\n      } else {\n        el.realPath = pathfinder(el);\n        el.matrix = el.transform().localMatrix;\n        _.bbox = Snap.path.getBBox(Snap.path.map(el.realPath, m.add(el.matrix)));\n        return Snap._.box(_.bbox);\n      }\n    } catch (e) {\n      // Firefox doesn’t give you bbox of hidden element\n      return Snap._.box();\n    }\n  };\n  var propString = function () {\n    return this.string;\n  };\n  function extractTransform(el, tstr) {\n    if (tstr == null) {\n      var doReturn = true;\n      if (el.type == \"linearGradient\" || el.type == \"radialGradient\") {\n        tstr = el.node.getAttribute(\"gradientTransform\");\n      } else if (el.type == \"pattern\") {\n        tstr = el.node.getAttribute(\"patternTransform\");\n      } else {\n        tstr = el.node.getAttribute(\"transform\");\n      }\n      if (!tstr) {\n        return new Snap.Matrix();\n      }\n      tstr = Snap._.svgTransform2string(tstr);\n    } else {\n      if (!Snap._.rgTransform.test(tstr)) {\n        tstr = Snap._.svgTransform2string(tstr);\n      } else {\n        tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, el._.transform || \"\");\n      }\n      if (is(tstr, \"array\")) {\n        tstr = Snap.path ? Snap.path.toString.call(tstr) : Str(tstr);\n      }\n      el._.transform = tstr;\n    }\n    var m = Snap._.transform2matrix(tstr, el.getBBox(1));\n    if (doReturn) {\n      return m;\n    } else {\n      el.matrix = m;\n    }\n  }\n  /*\\\r\n   * Element.transform\r\n   [ method ]\r\n   **\r\n   * Gets or sets transformation of the element\r\n   **\r\n   - tstr (string) transform string in Snap or SVG format\r\n   = (Element) the current element\r\n   * or\r\n   = (object) transformation descriptor:\r\n   o {\r\n   o     string (string) transform string,\r\n   o     globalMatrix (Matrix) matrix of all transformations applied to element or its parents,\r\n   o     localMatrix (Matrix) matrix of transformations applied only to the element,\r\n   o     diffMatrix (Matrix) matrix of difference between global and local transformations,\r\n   o     global (string) global transformation as string,\r\n   o     local (string) local transformation as string,\r\n   o     toString (function) returns `string` property\r\n   o }\r\n  \\*/\n  elproto.transform = function (tstr) {\n    var _ = this._;\n    if (tstr == null) {\n      var papa = this,\n        global = new Snap.Matrix(this.node.getCTM()),\n        local = extractTransform(this),\n        ms = [local],\n        m = new Snap.Matrix(),\n        i,\n        localString = local.toTransformString(),\n        string = Str(local) == Str(this.matrix) ? Str(_.transform) : localString;\n      while (papa.type != \"svg\" && (papa = papa.parent())) {\n        ms.push(extractTransform(papa));\n      }\n      i = ms.length;\n      while (i--) {\n        m.add(ms[i]);\n      }\n      return {\n        string: string,\n        globalMatrix: global,\n        totalMatrix: m,\n        localMatrix: local,\n        diffMatrix: global.clone().add(local.invert()),\n        global: global.toTransformString(),\n        total: m.toTransformString(),\n        local: localString,\n        toString: propString\n      };\n    }\n    if (tstr instanceof Snap.Matrix) {\n      this.matrix = tstr;\n      this._.transform = tstr.toTransformString();\n    } else {\n      extractTransform(this, tstr);\n    }\n    if (this.node) {\n      if (this.type == \"linearGradient\" || this.type == \"radialGradient\") {\n        $(this.node, {\n          gradientTransform: this.matrix\n        });\n      } else if (this.type == \"pattern\") {\n        $(this.node, {\n          patternTransform: this.matrix\n        });\n      } else {\n        $(this.node, {\n          transform: this.matrix\n        });\n      }\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.parent\r\n   [ method ]\r\n   **\r\n   * Returns the element's parent\r\n   **\r\n   = (Element) the parent element\r\n  \\*/\n  elproto.parent = function () {\n    return wrap(this.node.parentNode);\n  };\n  /*\\\r\n   * Element.append\r\n   [ method ]\r\n   **\r\n   * Appends the given element to current one\r\n   **\r\n   - el (Element|Set) element to append\r\n   = (Element) the parent element\r\n  \\*/\n  /*\\\r\n   * Element.add\r\n   [ method ]\r\n   **\r\n   * See @Element.append\r\n  \\*/\n  elproto.append = elproto.add = function (el) {\n    if (el) {\n      if (el.type == \"set\") {\n        var it = this;\n        el.forEach(function (el) {\n          it.add(el);\n        });\n        return this;\n      }\n      el = wrap(el);\n      this.node.appendChild(el.node);\n      el.paper = this.paper;\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.appendTo\r\n   [ method ]\r\n   **\r\n   * Appends the current element to the given one\r\n   **\r\n   - el (Element) parent element to append to\r\n   = (Element) the child element\r\n  \\*/\n  elproto.appendTo = function (el) {\n    if (el) {\n      el = wrap(el);\n      el.append(this);\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.prepend\r\n   [ method ]\r\n   **\r\n   * Prepends the given element to the current one\r\n   **\r\n   - el (Element) element to prepend\r\n   = (Element) the parent element\r\n  \\*/\n  elproto.prepend = function (el) {\n    if (el) {\n      if (el.type == \"set\") {\n        var it = this,\n          first;\n        el.forEach(function (el) {\n          if (first) {\n            first.after(el);\n          } else {\n            it.prepend(el);\n          }\n          first = el;\n        });\n        return this;\n      }\n      el = wrap(el);\n      var parent = el.parent();\n      this.node.insertBefore(el.node, this.node.firstChild);\n      this.add && this.add();\n      el.paper = this.paper;\n      this.parent() && this.parent().add();\n      parent && parent.add();\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.prependTo\r\n   [ method ]\r\n   **\r\n   * Prepends the current element to the given one\r\n   **\r\n   - el (Element) parent element to prepend to\r\n   = (Element) the child element\r\n  \\*/\n  elproto.prependTo = function (el) {\n    el = wrap(el);\n    el.prepend(this);\n    return this;\n  };\n  /*\\\r\n   * Element.before\r\n   [ method ]\r\n   **\r\n   * Inserts given element before the current one\r\n   **\r\n   - el (Element) element to insert\r\n   = (Element) the parent element\r\n  \\*/\n  elproto.before = function (el) {\n    if (el.type == \"set\") {\n      var it = this;\n      el.forEach(function (el) {\n        var parent = el.parent();\n        it.node.parentNode.insertBefore(el.node, it.node);\n        parent && parent.add();\n      });\n      this.parent().add();\n      return this;\n    }\n    el = wrap(el);\n    var parent = el.parent();\n    this.node.parentNode.insertBefore(el.node, this.node);\n    this.parent() && this.parent().add();\n    parent && parent.add();\n    el.paper = this.paper;\n    return this;\n  };\n  /*\\\r\n   * Element.after\r\n   [ method ]\r\n   **\r\n   * Inserts given element after the current one\r\n   **\r\n   - el (Element) element to insert\r\n   = (Element) the parent element\r\n  \\*/\n  elproto.after = function (el) {\n    el = wrap(el);\n    var parent = el.parent();\n    if (this.node.nextSibling) {\n      this.node.parentNode.insertBefore(el.node, this.node.nextSibling);\n    } else {\n      this.node.parentNode.appendChild(el.node);\n    }\n    this.parent() && this.parent().add();\n    parent && parent.add();\n    el.paper = this.paper;\n    return this;\n  };\n  /*\\\r\n   * Element.insertBefore\r\n   [ method ]\r\n   **\r\n   * Inserts the element after the given one\r\n   **\r\n   - el (Element) element next to whom insert to\r\n   = (Element) the parent element\r\n  \\*/\n  elproto.insertBefore = function (el) {\n    el = wrap(el);\n    var parent = this.parent();\n    el.node.parentNode.insertBefore(this.node, el.node);\n    this.paper = el.paper;\n    parent && parent.add();\n    el.parent() && el.parent().add();\n    return this;\n  };\n  /*\\\r\n   * Element.insertAfter\r\n   [ method ]\r\n   **\r\n   * Inserts the element after the given one\r\n   **\r\n   - el (Element) element next to whom insert to\r\n   = (Element) the parent element\r\n  \\*/\n  elproto.insertAfter = function (el) {\n    el = wrap(el);\n    var parent = this.parent();\n    el.node.parentNode.insertBefore(this.node, el.node.nextSibling);\n    this.paper = el.paper;\n    parent && parent.add();\n    el.parent() && el.parent().add();\n    return this;\n  };\n  /*\\\r\n   * Element.remove\r\n   [ method ]\r\n   **\r\n   * Removes element from the DOM\r\n   = (Element) the detached element\r\n  \\*/\n  elproto.remove = function () {\n    var parent = this.parent();\n    this.node.parentNode && this.node.parentNode.removeChild(this.node);\n    delete this.paper;\n    this.removed = true;\n    parent && parent.add();\n    return this;\n  };\n  /*\\\r\n   * Element.select\r\n   [ method ]\r\n   **\r\n   * Gathers the nested @Element matching the given set of CSS selectors\r\n   **\r\n   - query (string) CSS selector\r\n   = (Element) result of query selection\r\n  \\*/\n  elproto.select = function (query) {\n    return wrap(this.node.querySelector(query));\n  };\n  /*\\\r\n   * Element.selectAll\r\n   [ method ]\r\n   **\r\n   * Gathers nested @Element objects matching the given set of CSS selectors\r\n   **\r\n   - query (string) CSS selector\r\n   = (Set|array) result of query selection\r\n  \\*/\n  elproto.selectAll = function (query) {\n    var nodelist = this.node.querySelectorAll(query),\n      set = (Snap.set || Array)();\n    for (var i = 0; i < nodelist.length; i++) {\n      set.push(wrap(nodelist[i]));\n    }\n    return set;\n  };\n  /*\\\r\n   * Element.asPX\r\n   [ method ]\r\n   **\r\n   * Returns given attribute of the element as a `px` value (not %, em, etc.)\r\n   **\r\n   - attr (string) attribute name\r\n   - value (string) #optional attribute value\r\n   = (Element) result of query selection\r\n  \\*/\n  elproto.asPX = function (attr, value) {\n    if (value == null) {\n      value = this.attr(attr);\n    }\n    return +unit2px(this, attr, value);\n  };\n  // SIERRA Element.use(): I suggest adding a note about how to access the original element the returned <use> instantiates. It's a part of SVG with which ordinary web developers may be least familiar.\n  /*\\\r\n   * Element.use\r\n   [ method ]\r\n   **\r\n   * Creates a `<use>` element linked to the current element\r\n   **\r\n   = (Element) the `<use>` element\r\n  \\*/\n  elproto.use = function () {\n    var use,\n      id = this.node.id;\n    if (!id) {\n      id = this.id;\n      $(this.node, {\n        id: id\n      });\n    }\n    if (this.type == \"linearGradient\" || this.type == \"radialGradient\" || this.type == \"pattern\") {\n      use = make(this.type, this.node.parentNode);\n    } else {\n      use = make(\"use\", this.node.parentNode);\n    }\n    $(use.node, {\n      \"xlink:href\": \"#\" + id\n    });\n    use.original = this;\n    return use;\n  };\n  function fixids(el) {\n    var els = el.selectAll(\"*\"),\n      it,\n      url = /^\\s*url\\((\"|'|)(.*)\\1\\)\\s*$/,\n      ids = [],\n      uses = {};\n    function urltest(it, name) {\n      var val = $(it.node, name);\n      val = val && val.match(url);\n      val = val && val[2];\n      if (val && val.charAt() == \"#\") {\n        val = val.substring(1);\n      } else {\n        return;\n      }\n      if (val) {\n        uses[val] = (uses[val] || []).concat(function (id) {\n          var attr = {};\n          attr[name] = Snap.url(id);\n          $(it.node, attr);\n        });\n      }\n    }\n    function linktest(it) {\n      var val = $(it.node, \"xlink:href\");\n      if (val && val.charAt() == \"#\") {\n        val = val.substring(1);\n      } else {\n        return;\n      }\n      if (val) {\n        uses[val] = (uses[val] || []).concat(function (id) {\n          it.attr(\"xlink:href\", \"#\" + id);\n        });\n      }\n    }\n    for (var i = 0, ii = els.length; i < ii; i++) {\n      it = els[i];\n      urltest(it, \"fill\");\n      urltest(it, \"stroke\");\n      urltest(it, \"filter\");\n      urltest(it, \"mask\");\n      urltest(it, \"clip-path\");\n      linktest(it);\n      var oldid = $(it.node, \"id\");\n      if (oldid) {\n        $(it.node, {\n          id: it.id\n        });\n        ids.push({\n          old: oldid,\n          id: it.id\n        });\n      }\n    }\n    for (i = 0, ii = ids.length; i < ii; i++) {\n      var fs = uses[ids[i].old];\n      if (fs) {\n        for (var j = 0, jj = fs.length; j < jj; j++) {\n          fs[j](ids[i].id);\n        }\n      }\n    }\n  }\n  /*\\\r\n   * Element.clone\r\n   [ method ]\r\n   **\r\n   * Creates a clone of the element and inserts it after the element\r\n   **\r\n   = (Element) the clone\r\n  \\*/\n  elproto.clone = function () {\n    var clone = wrap(this.node.cloneNode(true));\n    if ($(clone.node, \"id\")) {\n      $(clone.node, {\n        id: clone.id\n      });\n    }\n    fixids(clone);\n    clone.insertAfter(this);\n    return clone;\n  };\n  /*\\\r\n   * Element.toDefs\r\n   [ method ]\r\n   **\r\n   * Moves element to the shared `<defs>` area\r\n   **\r\n   = (Element) the element\r\n  \\*/\n  elproto.toDefs = function () {\n    var defs = getSomeDefs(this);\n    defs.appendChild(this.node);\n    return this;\n  };\n  /*\\\r\n   * Element.toPattern\r\n   [ method ]\r\n   **\r\n   * Creates a `<pattern>` element from the current element\r\n   **\r\n   * To create a pattern you have to specify the pattern rect:\r\n   - x (string|number)\r\n   - y (string|number)\r\n   - width (string|number)\r\n   - height (string|number)\r\n   = (Element) the `<pattern>` element\r\n   * You can use pattern later on as an argument for `fill` attribute:\r\n   | var p = paper.path(\"M10-5-10,15M15,0,0,15M0-5-20,15\").attr({\r\n   |         fill: \"none\",\r\n   |         stroke: \"#bada55\",\r\n   |         strokeWidth: 5\r\n   |     }).pattern(0, 0, 10, 10),\r\n   |     c = paper.circle(200, 200, 100);\r\n   | c.attr({\r\n   |     fill: p\r\n   | });\r\n  \\*/\n  elproto.pattern = elproto.toPattern = function (x, y, width, height) {\n    var p = make(\"pattern\", getSomeDefs(this));\n    if (x == null) {\n      x = this.getBBox();\n    }\n    if (is(x, \"object\") && \"x\" in x) {\n      y = x.y;\n      width = x.width;\n      height = x.height;\n      x = x.x;\n    }\n    $(p.node, {\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      patternUnits: \"userSpaceOnUse\",\n      id: p.id,\n      viewBox: [x, y, width, height].join(\" \")\n    });\n    p.node.appendChild(this.node);\n    return p;\n  };\n  // SIERRA Element.marker(): clarify what a reference point is. E.g., helps you offset the object from its edge such as when centering it over a path.\n  // SIERRA Element.marker(): I suggest the method should accept default reference point values.  Perhaps centered with (refX = width/2) and (refY = height/2)? Also, couldn't it assume the element's current _width_ and _height_? And please specify what _x_ and _y_ mean: offsets? If so, from where?  Couldn't they also be assigned default values?\n  /*\\\r\n   * Element.marker\r\n   [ method ]\r\n   **\r\n   * Creates a `<marker>` element from the current element\r\n   **\r\n   * To create a marker you have to specify the bounding rect and reference point:\r\n   - x (number)\r\n   - y (number)\r\n   - width (number)\r\n   - height (number)\r\n   - refX (number)\r\n   - refY (number)\r\n   = (Element) the `<marker>` element\r\n   * You can specify the marker later as an argument for `marker-start`, `marker-end`, `marker-mid`, and `marker` attributes. The `marker` attribute places the marker at every point along the path, and `marker-mid` places them at every point except the start and end.\r\n  \\*/\n  // TODO add usage for markers\n  elproto.marker = function (x, y, width, height, refX, refY) {\n    var p = make(\"marker\", getSomeDefs(this));\n    if (x == null) {\n      x = this.getBBox();\n    }\n    if (is(x, \"object\") && \"x\" in x) {\n      y = x.y;\n      width = x.width;\n      height = x.height;\n      refX = x.refX || x.cx;\n      refY = x.refY || x.cy;\n      x = x.x;\n    }\n    $(p.node, {\n      viewBox: [x, y, width, height].join(\" \"),\n      markerWidth: width,\n      markerHeight: height,\n      orient: \"auto\",\n      refX: refX || 0,\n      refY: refY || 0,\n      id: p.id\n    });\n    p.node.appendChild(this.node);\n    return p;\n  };\n  var eldata = {};\n  /*\\\r\n   * Element.data\r\n   [ method ]\r\n   **\r\n   * Adds or retrieves given value associated with given key. (Don’t confuse\r\n   * with `data-` attributes)\r\n   *\r\n   * See also @Element.removeData\r\n   - key (string) key to store data\r\n   - value (any) #optional value to store\r\n   = (object) @Element\r\n   * or, if value is not specified:\r\n   = (any) value\r\n   > Usage\r\n   | for (var i = 0, i < 5, i++) {\r\n   |     paper.circle(10 + 15 * i, 10, 10)\r\n   |          .attr({fill: \"#000\"})\r\n   |          .data(\"i\", i)\r\n   |          .click(function () {\r\n   |             alert(this.data(\"i\"));\r\n   |          });\r\n   | }\r\n  \\*/\n  elproto.data = function (key, value) {\n    var data = eldata[this.id] = eldata[this.id] || {};\n    if (arguments.length == 0) {\n      eve(\"snap.data.get.\" + this.id, this, data, null);\n      return data;\n    }\n    if (arguments.length == 1) {\n      if (Snap.is(key, \"object\")) {\n        for (var i in key) if (key[has](i)) {\n          this.data(i, key[i]);\n        }\n        return this;\n      }\n      eve(\"snap.data.get.\" + this.id, this, data[key], key);\n      return data[key];\n    }\n    data[key] = value;\n    eve(\"snap.data.set.\" + this.id, this, value, key);\n    return this;\n  };\n  /*\\\r\n   * Element.removeData\r\n   [ method ]\r\n   **\r\n   * Removes value associated with an element by given key.\r\n   * If key is not provided, removes all the data of the element.\r\n   - key (string) #optional key\r\n   = (object) @Element\r\n  \\*/\n  elproto.removeData = function (key) {\n    if (key == null) {\n      eldata[this.id] = {};\n    } else {\n      eldata[this.id] && delete eldata[this.id][key];\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.outerSVG\r\n   [ method ]\r\n   **\r\n   * Returns SVG code for the element, equivalent to HTML's `outerHTML`.\r\n   *\r\n   * See also @Element.innerSVG\r\n   = (string) SVG code for the element\r\n  \\*/\n  /*\\\r\n   * Element.toString\r\n   [ method ]\r\n   **\r\n   * See @Element.outerSVG\r\n  \\*/\n  elproto.outerSVG = elproto.toString = toString(1);\n  /*\\\r\n   * Element.innerSVG\r\n   [ method ]\r\n   **\r\n   * Returns SVG code for the element's contents, equivalent to HTML's `innerHTML`\r\n   = (string) SVG code for the element\r\n  \\*/\n  elproto.innerSVG = toString();\n  function toString(type) {\n    return function () {\n      var res = type ? \"<\" + this.type : \"\",\n        attr = this.node.attributes,\n        chld = this.node.childNodes;\n      if (type) {\n        for (var i = 0, ii = attr.length; i < ii; i++) {\n          res += \" \" + attr[i].name + '=\"' + attr[i].value.replace(/\"/g, '\\\\\"') + '\"';\n        }\n      }\n      if (chld.length) {\n        type && (res += \">\");\n        for (i = 0, ii = chld.length; i < ii; i++) {\n          if (chld[i].nodeType == 3) {\n            res += chld[i].nodeValue;\n          } else if (chld[i].nodeType == 1) {\n            res += wrap(chld[i]).toString();\n          }\n        }\n        type && (res += \"</\" + this.type + \">\");\n      } else {\n        type && (res += \"/>\");\n      }\n      return res;\n    };\n  }\n  elproto.toDataURL = function () {\n    if (window && window.btoa) {\n      var bb = this.getBBox(),\n        svg = Snap.format('<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"{width}\" height=\"{height}\" viewBox=\"{x} {y} {width} {height}\">{contents}</svg>', {\n          x: +bb.x.toFixed(3),\n          y: +bb.y.toFixed(3),\n          width: +bb.width.toFixed(3),\n          height: +bb.height.toFixed(3),\n          contents: this.outerSVG()\n        });\n      return \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(svg)));\n    }\n  };\n  /*\\\r\n   * Fragment.select\r\n   [ method ]\r\n   **\r\n   * See @Element.select\r\n  \\*/\n  Fragment.prototype.select = elproto.select;\n  /*\\\r\n   * Fragment.selectAll\r\n   [ method ]\r\n   **\r\n   * See @Element.selectAll\r\n  \\*/\n  Fragment.prototype.selectAll = elproto.selectAll;\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var objectToString = Object.prototype.toString,\n    Str = String,\n    math = Math,\n    E = \"\";\n  function Matrix(a, b, c, d, e, f) {\n    if (b == null && objectToString.call(a) == \"[object SVGMatrix]\") {\n      this.a = a.a;\n      this.b = a.b;\n      this.c = a.c;\n      this.d = a.d;\n      this.e = a.e;\n      this.f = a.f;\n      return;\n    }\n    if (a != null) {\n      this.a = +a;\n      this.b = +b;\n      this.c = +c;\n      this.d = +d;\n      this.e = +e;\n      this.f = +f;\n    } else {\n      this.a = 1;\n      this.b = 0;\n      this.c = 0;\n      this.d = 1;\n      this.e = 0;\n      this.f = 0;\n    }\n  }\n  (function (matrixproto) {\n    /*\\\r\n     * Matrix.add\r\n     [ method ]\r\n     **\r\n     * Adds the given matrix to existing one\r\n     - a (number)\r\n     - b (number)\r\n     - c (number)\r\n     - d (number)\r\n     - e (number)\r\n     - f (number)\r\n     * or\r\n     - matrix (object) @Matrix\r\n    \\*/\n    matrixproto.add = function (a, b, c, d, e, f) {\n      if (a && a instanceof Matrix) {\n        return this.add(a.a, a.b, a.c, a.d, a.e, a.f);\n      }\n      var aNew = a * this.a + b * this.c,\n        bNew = a * this.b + b * this.d;\n      this.e += e * this.a + f * this.c;\n      this.f += e * this.b + f * this.d;\n      this.c = c * this.a + d * this.c;\n      this.d = c * this.b + d * this.d;\n      this.a = aNew;\n      this.b = bNew;\n      return this;\n    };\n    /*\\\r\n     * Matrix.multLeft\r\n     [ method ]\r\n     **\r\n     * Multiplies a passed affine transform to the left: M * this.\r\n     - a (number)\r\n     - b (number)\r\n     - c (number)\r\n     - d (number)\r\n     - e (number)\r\n     - f (number)\r\n     * or\r\n     - matrix (object) @Matrix\r\n    \\*/\n    Matrix.prototype.multLeft = function (a, b, c, d, e, f) {\n      if (a && a instanceof Matrix) {\n        return this.multLeft(a.a, a.b, a.c, a.d, a.e, a.f);\n      }\n      var aNew = a * this.a + c * this.b,\n        cNew = a * this.c + c * this.d,\n        eNew = a * this.e + c * this.f + e;\n      this.b = b * this.a + d * this.b;\n      this.d = b * this.c + d * this.d;\n      this.f = b * this.e + d * this.f + f;\n      this.a = aNew;\n      this.c = cNew;\n      this.e = eNew;\n      return this;\n    };\n    /*\\\r\n     * Matrix.invert\r\n     [ method ]\r\n     **\r\n     * Returns an inverted version of the matrix\r\n     = (object) @Matrix\r\n    \\*/\n    matrixproto.invert = function () {\n      var me = this,\n        x = me.a * me.d - me.b * me.c;\n      return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\n    };\n    /*\\\r\n     * Matrix.clone\r\n     [ method ]\r\n     **\r\n     * Returns a copy of the matrix\r\n     = (object) @Matrix\r\n    \\*/\n    matrixproto.clone = function () {\n      return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n    };\n    /*\\\r\n     * Matrix.translate\r\n     [ method ]\r\n     **\r\n     * Translate the matrix\r\n     - x (number) horizontal offset distance\r\n     - y (number) vertical offset distance\r\n    \\*/\n    matrixproto.translate = function (x, y) {\n      this.e += x * this.a + y * this.c;\n      this.f += x * this.b + y * this.d;\n      return this;\n    };\n    /*\\\r\n     * Matrix.scale\r\n     [ method ]\r\n     **\r\n     * Scales the matrix\r\n     - x (number) amount to be scaled, with `1` resulting in no change\r\n     - y (number) #optional amount to scale along the vertical axis. (Otherwise `x` applies to both axes.)\r\n     - cx (number) #optional horizontal origin point from which to scale\r\n     - cy (number) #optional vertical origin point from which to scale\r\n     * Default cx, cy is the middle point of the element.\r\n    \\*/\n    matrixproto.scale = function (x, y, cx, cy) {\n      y == null && (y = x);\n      (cx || cy) && this.translate(cx, cy);\n      this.a *= x;\n      this.b *= x;\n      this.c *= y;\n      this.d *= y;\n      (cx || cy) && this.translate(-cx, -cy);\n      return this;\n    };\n    /*\\\r\n     * Matrix.rotate\r\n     [ method ]\r\n     **\r\n     * Rotates the matrix\r\n     - a (number) angle of rotation, in degrees\r\n     - x (number) horizontal origin point from which to rotate\r\n     - y (number) vertical origin point from which to rotate\r\n    \\*/\n    matrixproto.rotate = function (a, x, y) {\n      a = Snap.rad(a);\n      x = x || 0;\n      y = y || 0;\n      var cos = +math.cos(a).toFixed(9),\n        sin = +math.sin(a).toFixed(9);\n      this.add(cos, sin, -sin, cos, x, y);\n      return this.add(1, 0, 0, 1, -x, -y);\n    };\n    /*\\\r\n     * Matrix.skewX\r\n     [ method ]\r\n     **\r\n     * Skews the matrix along the x-axis\r\n     - x (number) Angle to skew along the x-axis (in degrees).\r\n    \\*/\n    matrixproto.skewX = function (x) {\n      return this.skew(x, 0);\n    };\n    /*\\\r\n     * Matrix.skewY\r\n     [ method ]\r\n     **\r\n     * Skews the matrix along the y-axis\r\n     - y (number) Angle to skew along the y-axis (in degrees).\r\n    \\*/\n    matrixproto.skewY = function (y) {\n      return this.skew(0, y);\n    };\n    /*\\\r\n     * Matrix.skew\r\n     [ method ]\r\n     **\r\n     * Skews the matrix\r\n     - y (number) Angle to skew along the y-axis (in degrees).\r\n     - x (number) Angle to skew along the x-axis (in degrees).\r\n    \\*/\n    matrixproto.skew = function (x, y) {\n      x = x || 0;\n      y = y || 0;\n      x = Snap.rad(x);\n      y = Snap.rad(y);\n      var c = math.tan(x).toFixed(9);\n      var b = math.tan(y).toFixed(9);\n      return this.add(1, b, c, 1, 0, 0);\n    };\n    /*\\\r\n     * Matrix.x\r\n     [ method ]\r\n     **\r\n     * Returns x coordinate for given point after transformation described by the matrix. See also @Matrix.y\r\n     - x (number)\r\n     - y (number)\r\n     = (number) x\r\n    \\*/\n    matrixproto.x = function (x, y) {\n      return x * this.a + y * this.c + this.e;\n    };\n    /*\\\r\n     * Matrix.y\r\n     [ method ]\r\n     **\r\n     * Returns y coordinate for given point after transformation described by the matrix. See also @Matrix.x\r\n     - x (number)\r\n     - y (number)\r\n     = (number) y\r\n    \\*/\n    matrixproto.y = function (x, y) {\n      return x * this.b + y * this.d + this.f;\n    };\n    matrixproto.get = function (i) {\n      return +this[Str.fromCharCode(97 + i)].toFixed(4);\n    };\n    matrixproto.toString = function () {\n      return \"matrix(\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \")\";\n    };\n    matrixproto.offset = function () {\n      return [this.e.toFixed(4), this.f.toFixed(4)];\n    };\n    function norm(a) {\n      return a[0] * a[0] + a[1] * a[1];\n    }\n    function normalize(a) {\n      var mag = math.sqrt(norm(a));\n      a[0] && (a[0] /= mag);\n      a[1] && (a[1] /= mag);\n    }\n    /*\\\r\n     * Matrix.determinant\r\n     [ method ]\r\n     **\r\n     * Finds determinant of the given matrix.\r\n     = (number) determinant\r\n    \\*/\n    matrixproto.determinant = function () {\n      return this.a * this.d - this.b * this.c;\n    };\n    /*\\\r\n     * Matrix.split\r\n     [ method ]\r\n     **\r\n     * Splits matrix into primitive transformations\r\n     = (object) in format:\r\n     o dx (number) translation by x\r\n     o dy (number) translation by y\r\n     o scalex (number) scale by x\r\n     o scaley (number) scale by y\r\n     o shear (number) shear\r\n     o rotate (number) rotation in deg\r\n     o isSimple (boolean) could it be represented via simple transformations\r\n    \\*/\n    matrixproto.split = function () {\n      var out = {};\n      // translation\n      out.dx = this.e;\n      out.dy = this.f;\n\n      // scale and shear\n      var row = [[this.a, this.b], [this.c, this.d]];\n      out.scalex = math.sqrt(norm(row[0]));\n      normalize(row[0]);\n      out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\n      row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\n      out.scaley = math.sqrt(norm(row[1]));\n      normalize(row[1]);\n      out.shear /= out.scaley;\n      if (this.determinant() < 0) {\n        out.scalex = -out.scalex;\n      }\n\n      // rotation\n      var sin = row[0][1],\n        cos = row[1][1];\n      if (cos < 0) {\n        out.rotate = Snap.deg(math.acos(cos));\n        if (sin < 0) {\n          out.rotate = 360 - out.rotate;\n        }\n      } else {\n        out.rotate = Snap.deg(math.asin(sin));\n      }\n      out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\n      out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\n      out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\n      return out;\n    };\n    /*\\\r\n     * Matrix.toTransformString\r\n     [ method ]\r\n     **\r\n     * Returns transform string that represents given matrix\r\n     = (string) transform string\r\n    \\*/\n    matrixproto.toTransformString = function (shorter) {\n      var s = shorter || this.split();\n      if (!+s.shear.toFixed(9)) {\n        s.scalex = +s.scalex.toFixed(4);\n        s.scaley = +s.scaley.toFixed(4);\n        s.rotate = +s.rotate.toFixed(4);\n        return (s.dx || s.dy ? \"t\" + [+s.dx.toFixed(4), +s.dy.toFixed(4)] : E) + (s.rotate ? \"r\" + [+s.rotate.toFixed(4), 0, 0] : E) + (s.scalex != 1 || s.scaley != 1 ? \"s\" + [s.scalex, s.scaley, 0, 0] : E);\n      } else {\n        return \"m\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\n      }\n    };\n  })(Matrix.prototype);\n  /*\\\r\n   * Snap.Matrix\r\n   [ method ]\r\n   **\r\n   * Matrix constructor, extend on your own risk.\r\n   * To create matrices use @Snap.matrix.\r\n  \\*/\n  Snap.Matrix = Matrix;\n  /*\\\r\n   * Snap.matrix\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Returns a matrix based on the given parameters\r\n   - a (number)\r\n   - b (number)\r\n   - c (number)\r\n   - d (number)\r\n   - e (number)\r\n   - f (number)\r\n   * or\r\n   - svgMatrix (SVGMatrix)\r\n   = (object) @Matrix\r\n  \\*/\n  Snap.matrix = function (a, b, c, d, e, f) {\n    return new Matrix(a, b, c, d, e, f);\n  };\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var has = \"hasOwnProperty\",\n    make = Snap._.make,\n    wrap = Snap._.wrap,\n    is = Snap.is,\n    getSomeDefs = Snap._.getSomeDefs,\n    reURLValue = /^url\\((['\"]?)([^)]+)\\1\\)$/,\n    $ = Snap._.$,\n    URL = Snap.url,\n    Str = String,\n    separator = Snap._.separator,\n    E = \"\";\n  /*\\\r\n   * Snap.deurl\r\n   [ method ]\r\n   **\r\n   * Unwraps path from `\"url(<path>)\"`.\r\n   - value (string) url path\r\n   = (string) unwrapped path\r\n  \\*/\n  Snap.deurl = function (value) {\n    var res = String(value).match(reURLValue);\n    return res ? res[2] : value;\n  };\n  // Attributes event handlers\n  eve.on(\"snap.util.attr.mask\", function (value) {\n    if (value instanceof Element || value instanceof Fragment) {\n      eve.stop();\n      if (value instanceof Fragment && value.node.childNodes.length == 1) {\n        value = value.node.firstChild;\n        getSomeDefs(this).appendChild(value);\n        value = wrap(value);\n      }\n      if (value.type == \"mask\") {\n        var mask = value;\n      } else {\n        mask = make(\"mask\", getSomeDefs(this));\n        mask.node.appendChild(value.node);\n      }\n      !mask.node.id && $(mask.node, {\n        id: mask.id\n      });\n      $(this.node, {\n        mask: URL(mask.id)\n      });\n    }\n  });\n  (function (clipIt) {\n    eve.on(\"snap.util.attr.clip\", clipIt);\n    eve.on(\"snap.util.attr.clip-path\", clipIt);\n    eve.on(\"snap.util.attr.clipPath\", clipIt);\n  })(function (value) {\n    if (value instanceof Element || value instanceof Fragment) {\n      eve.stop();\n      var clip,\n        node = value.node;\n      while (node) {\n        if (node.nodeName === \"clipPath\") {\n          clip = new Element(node);\n          break;\n        }\n        if (node.nodeName === \"svg\") {\n          clip = undefined;\n          break;\n        }\n        node = node.parentNode;\n      }\n      if (!clip) {\n        clip = make(\"clipPath\", getSomeDefs(this));\n        clip.node.appendChild(value.node);\n        !clip.node.id && $(clip.node, {\n          id: clip.id\n        });\n      }\n      $(this.node, {\n        \"clip-path\": URL(clip.node.id || clip.id)\n      });\n    }\n  });\n  function fillStroke(name) {\n    return function (value) {\n      eve.stop();\n      if (value instanceof Fragment && value.node.childNodes.length == 1 && (value.node.firstChild.tagName == \"radialGradient\" || value.node.firstChild.tagName == \"linearGradient\" || value.node.firstChild.tagName == \"pattern\")) {\n        value = value.node.firstChild;\n        getSomeDefs(this).appendChild(value);\n        value = wrap(value);\n      }\n      if (value instanceof Element) {\n        if (value.type == \"radialGradient\" || value.type == \"linearGradient\" || value.type == \"pattern\") {\n          if (!value.node.id) {\n            $(value.node, {\n              id: value.id\n            });\n          }\n          var fill = URL(value.node.id);\n        } else {\n          fill = value.attr(name);\n        }\n      } else {\n        fill = Snap.color(value);\n        if (fill.error) {\n          var grad = Snap(getSomeDefs(this).ownerSVGElement).gradient(value);\n          if (grad) {\n            if (!grad.node.id) {\n              $(grad.node, {\n                id: grad.id\n              });\n            }\n            fill = URL(grad.node.id);\n          } else {\n            fill = value;\n          }\n        } else {\n          fill = Str(fill);\n        }\n      }\n      var attrs = {};\n      attrs[name] = fill;\n      $(this.node, attrs);\n      this.node.style[name] = E;\n    };\n  }\n  eve.on(\"snap.util.attr.fill\", fillStroke(\"fill\"));\n  eve.on(\"snap.util.attr.stroke\", fillStroke(\"stroke\"));\n  var gradrg = /^([lr])(?:\\(([^)]*)\\))?(.*)$/i;\n  eve.on(\"snap.util.grad.parse\", function parseGrad(string) {\n    string = Str(string);\n    var tokens = string.match(gradrg);\n    if (!tokens) {\n      return null;\n    }\n    var type = tokens[1],\n      params = tokens[2],\n      stops = tokens[3];\n    params = params.split(/\\s*,\\s*/).map(function (el) {\n      return +el == el ? +el : el;\n    });\n    if (params.length == 1 && params[0] == 0) {\n      params = [];\n    }\n    stops = stops.split(\"-\");\n    stops = stops.map(function (el) {\n      el = el.split(\":\");\n      var out = {\n        color: el[0]\n      };\n      if (el[1]) {\n        out.offset = parseFloat(el[1]);\n      }\n      return out;\n    });\n    var len = stops.length,\n      start = 0,\n      j = 0;\n    function seed(i, end) {\n      var step = (end - start) / (i - j);\n      for (var k = j; k < i; k++) {\n        stops[k].offset = +(+start + step * (k - j)).toFixed(2);\n      }\n      j = i;\n      start = end;\n    }\n    len--;\n    for (var i = 0; i < len; i++) if (\"offset\" in stops[i]) {\n      seed(i, stops[i].offset);\n    }\n    stops[len].offset = stops[len].offset || 100;\n    seed(len, stops[len].offset);\n    return {\n      type: type,\n      params: params,\n      stops: stops\n    };\n  });\n  eve.on(\"snap.util.attr.d\", function (value) {\n    eve.stop();\n    if (is(value, \"array\") && is(value[0], \"array\")) {\n      value = Snap.path.toString.call(value);\n    }\n    value = Str(value);\n    if (value.match(/[ruo]/i)) {\n      value = Snap.path.toAbsolute(value);\n    }\n    $(this.node, {\n      d: value\n    });\n  })(-1);\n  eve.on(\"snap.util.attr.#text\", function (value) {\n    eve.stop();\n    value = Str(value);\n    var txt = glob.doc.createTextNode(value);\n    while (this.node.firstChild) {\n      this.node.removeChild(this.node.firstChild);\n    }\n    this.node.appendChild(txt);\n  })(-1);\n  eve.on(\"snap.util.attr.path\", function (value) {\n    eve.stop();\n    this.attr({\n      d: value\n    });\n  })(-1);\n  eve.on(\"snap.util.attr.class\", function (value) {\n    eve.stop();\n    this.node.className.baseVal = value;\n  })(-1);\n  eve.on(\"snap.util.attr.viewBox\", function (value) {\n    var vb;\n    if (is(value, \"object\") && \"x\" in value) {\n      vb = [value.x, value.y, value.width, value.height].join(\" \");\n    } else if (is(value, \"array\")) {\n      vb = value.join(\" \");\n    } else {\n      vb = value;\n    }\n    $(this.node, {\n      viewBox: vb\n    });\n    eve.stop();\n  })(-1);\n  eve.on(\"snap.util.attr.transform\", function (value) {\n    this.transform(value);\n    eve.stop();\n  })(-1);\n  eve.on(\"snap.util.attr.r\", function (value) {\n    if (this.type == \"rect\") {\n      eve.stop();\n      $(this.node, {\n        rx: value,\n        ry: value\n      });\n    }\n  })(-1);\n  eve.on(\"snap.util.attr.textpath\", function (value) {\n    eve.stop();\n    if (this.type == \"text\") {\n      var id, tp, node;\n      if (!value && this.textPath) {\n        tp = this.textPath;\n        while (tp.node.firstChild) {\n          this.node.appendChild(tp.node.firstChild);\n        }\n        tp.remove();\n        delete this.textPath;\n        return;\n      }\n      if (is(value, \"string\")) {\n        var defs = getSomeDefs(this),\n          path = wrap(defs.parentNode).path(value);\n        defs.appendChild(path.node);\n        id = path.id;\n        path.attr({\n          id: id\n        });\n      } else {\n        value = wrap(value);\n        if (value instanceof Element) {\n          id = value.attr(\"id\");\n          if (!id) {\n            id = value.id;\n            value.attr({\n              id: id\n            });\n          }\n        }\n      }\n      if (id) {\n        tp = this.textPath;\n        node = this.node;\n        if (tp) {\n          tp.attr({\n            \"xlink:href\": \"#\" + id\n          });\n        } else {\n          tp = $(\"textPath\", {\n            \"xlink:href\": \"#\" + id\n          });\n          while (node.firstChild) {\n            tp.appendChild(node.firstChild);\n          }\n          node.appendChild(tp);\n          this.textPath = wrap(tp);\n        }\n      }\n    }\n  })(-1);\n  eve.on(\"snap.util.attr.text\", function (value) {\n    if (this.type == \"text\") {\n      var i = 0,\n        node = this.node,\n        tuner = function (chunk) {\n          var out = $(\"tspan\");\n          if (is(chunk, \"array\")) {\n            for (var i = 0; i < chunk.length; i++) {\n              out.appendChild(tuner(chunk[i]));\n            }\n          } else {\n            out.appendChild(glob.doc.createTextNode(chunk));\n          }\n          out.normalize && out.normalize();\n          return out;\n        };\n      while (node.firstChild) {\n        node.removeChild(node.firstChild);\n      }\n      var tuned = tuner(value);\n      while (tuned.firstChild) {\n        node.appendChild(tuned.firstChild);\n      }\n    }\n    eve.stop();\n  })(-1);\n  function setFontSize(value) {\n    eve.stop();\n    if (value == +value) {\n      value += \"px\";\n    }\n    this.node.style.fontSize = value;\n  }\n  eve.on(\"snap.util.attr.fontSize\", setFontSize)(-1);\n  eve.on(\"snap.util.attr.font-size\", setFontSize)(-1);\n  eve.on(\"snap.util.getattr.transform\", function () {\n    eve.stop();\n    return this.transform();\n  })(-1);\n  eve.on(\"snap.util.getattr.textpath\", function () {\n    eve.stop();\n    return this.textPath;\n  })(-1);\n  // Markers\n  (function () {\n    function getter(end) {\n      return function () {\n        eve.stop();\n        var style = glob.doc.defaultView.getComputedStyle(this.node, null).getPropertyValue(\"marker-\" + end);\n        if (style == \"none\") {\n          return style;\n        } else {\n          return Snap(glob.doc.getElementById(style.match(reURLValue)[1]));\n        }\n      };\n    }\n    function setter(end) {\n      return function (value) {\n        eve.stop();\n        var name = \"marker\" + end.charAt(0).toUpperCase() + end.substring(1);\n        if (value == \"\" || !value) {\n          this.node.style[name] = \"none\";\n          return;\n        }\n        if (value.type == \"marker\") {\n          var id = value.node.id;\n          if (!id) {\n            $(value.node, {\n              id: value.id\n            });\n          }\n          this.node.style[name] = URL(id);\n          return;\n        }\n      };\n    }\n    eve.on(\"snap.util.getattr.marker-end\", getter(\"end\"))(-1);\n    eve.on(\"snap.util.getattr.markerEnd\", getter(\"end\"))(-1);\n    eve.on(\"snap.util.getattr.marker-start\", getter(\"start\"))(-1);\n    eve.on(\"snap.util.getattr.markerStart\", getter(\"start\"))(-1);\n    eve.on(\"snap.util.getattr.marker-mid\", getter(\"mid\"))(-1);\n    eve.on(\"snap.util.getattr.markerMid\", getter(\"mid\"))(-1);\n    eve.on(\"snap.util.attr.marker-end\", setter(\"end\"))(-1);\n    eve.on(\"snap.util.attr.markerEnd\", setter(\"end\"))(-1);\n    eve.on(\"snap.util.attr.marker-start\", setter(\"start\"))(-1);\n    eve.on(\"snap.util.attr.markerStart\", setter(\"start\"))(-1);\n    eve.on(\"snap.util.attr.marker-mid\", setter(\"mid\"))(-1);\n    eve.on(\"snap.util.attr.markerMid\", setter(\"mid\"))(-1);\n  })();\n  eve.on(\"snap.util.getattr.r\", function () {\n    if (this.type == \"rect\" && $(this.node, \"rx\") == $(this.node, \"ry\")) {\n      eve.stop();\n      return $(this.node, \"rx\");\n    }\n  })(-1);\n  function textExtract(node) {\n    var out = [];\n    var children = node.childNodes;\n    for (var i = 0, ii = children.length; i < ii; i++) {\n      var chi = children[i];\n      if (chi.nodeType == 3) {\n        out.push(chi.nodeValue);\n      }\n      if (chi.tagName == \"tspan\") {\n        if (chi.childNodes.length == 1 && chi.firstChild.nodeType == 3) {\n          out.push(chi.firstChild.nodeValue);\n        } else {\n          out.push(textExtract(chi));\n        }\n      }\n    }\n    return out;\n  }\n  eve.on(\"snap.util.getattr.text\", function () {\n    if (this.type == \"text\" || this.type == \"tspan\") {\n      eve.stop();\n      var out = textExtract(this.node);\n      return out.length == 1 ? out[0] : out;\n    }\n  })(-1);\n  eve.on(\"snap.util.getattr.#text\", function () {\n    return this.node.textContent;\n  })(-1);\n  eve.on(\"snap.util.getattr.fill\", function (internal) {\n    if (internal) {\n      return;\n    }\n    eve.stop();\n    var value = eve(\"snap.util.getattr.fill\", this, true).firstDefined();\n    return Snap(Snap.deurl(value)) || value;\n  })(-1);\n  eve.on(\"snap.util.getattr.stroke\", function (internal) {\n    if (internal) {\n      return;\n    }\n    eve.stop();\n    var value = eve(\"snap.util.getattr.stroke\", this, true).firstDefined();\n    return Snap(Snap.deurl(value)) || value;\n  })(-1);\n  eve.on(\"snap.util.getattr.viewBox\", function () {\n    eve.stop();\n    var vb = $(this.node, \"viewBox\");\n    if (vb) {\n      vb = vb.split(separator);\n      return Snap._.box(+vb[0], +vb[1], +vb[2], +vb[3]);\n    } else {\n      return;\n    }\n  })(-1);\n  eve.on(\"snap.util.getattr.points\", function () {\n    var p = $(this.node, \"points\");\n    eve.stop();\n    if (p) {\n      return p.split(separator);\n    } else {\n      return;\n    }\n  })(-1);\n  eve.on(\"snap.util.getattr.path\", function () {\n    var p = $(this.node, \"d\");\n    eve.stop();\n    return p;\n  })(-1);\n  eve.on(\"snap.util.getattr.class\", function () {\n    return this.node.className.baseVal;\n  })(-1);\n  function getFontSize() {\n    eve.stop();\n    return this.node.style.fontSize;\n  }\n  eve.on(\"snap.util.getattr.fontSize\", getFontSize)(-1);\n  eve.on(\"snap.util.getattr.font-size\", getFontSize)(-1);\n});\n\n// Copyright (c) 2014 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var rgNotSpace = /\\S+/g,\n    rgBadSpace = /[\\t\\r\\n\\f]/g,\n    rgTrim = /(^\\s+|\\s+$)/g,\n    Str = String,\n    elproto = Element.prototype;\n  /*\\\r\n   * Element.addClass\r\n   [ method ]\r\n   **\r\n   * Adds given class name or list of class names to the element.\r\n   - value (string) class name or space separated list of class names\r\n   **\r\n   = (Element) original element.\r\n  \\*/\n  elproto.addClass = function (value) {\n    var classes = Str(value || \"\").match(rgNotSpace) || [],\n      elem = this.node,\n      className = elem.className.baseVal,\n      curClasses = className.match(rgNotSpace) || [],\n      j,\n      pos,\n      clazz,\n      finalValue;\n    if (classes.length) {\n      j = 0;\n      while (clazz = classes[j++]) {\n        pos = curClasses.indexOf(clazz);\n        if (!~pos) {\n          curClasses.push(clazz);\n        }\n      }\n      finalValue = curClasses.join(\" \");\n      if (className != finalValue) {\n        elem.className.baseVal = finalValue;\n      }\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.removeClass\r\n   [ method ]\r\n   **\r\n   * Removes given class name or list of class names from the element.\r\n   - value (string) class name or space separated list of class names\r\n   **\r\n   = (Element) original element.\r\n  \\*/\n  elproto.removeClass = function (value) {\n    var classes = Str(value || \"\").match(rgNotSpace) || [],\n      elem = this.node,\n      className = elem.className.baseVal,\n      curClasses = className.match(rgNotSpace) || [],\n      j,\n      pos,\n      clazz,\n      finalValue;\n    if (curClasses.length) {\n      j = 0;\n      while (clazz = classes[j++]) {\n        pos = curClasses.indexOf(clazz);\n        if (~pos) {\n          curClasses.splice(pos, 1);\n        }\n      }\n      finalValue = curClasses.join(\" \");\n      if (className != finalValue) {\n        elem.className.baseVal = finalValue;\n      }\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.hasClass\r\n   [ method ]\r\n   **\r\n   * Checks if the element has a given class name in the list of class names applied to it.\r\n   - value (string) class name\r\n   **\r\n   = (boolean) `true` if the element has given class\r\n  \\*/\n  elproto.hasClass = function (value) {\n    var elem = this.node,\n      className = elem.className.baseVal,\n      curClasses = className.match(rgNotSpace) || [];\n    return !!~curClasses.indexOf(value);\n  };\n  /*\\\r\n   * Element.toggleClass\r\n   [ method ]\r\n   **\r\n   * Add or remove one or more classes from the element, depending on either\r\n   * the class’s presence or the value of the `flag` argument.\r\n   - value (string) class name or space separated list of class names\r\n   - flag (boolean) value to determine whether the class should be added or removed\r\n   **\r\n   = (Element) original element.\r\n  \\*/\n  elproto.toggleClass = function (value, flag) {\n    if (flag != null) {\n      if (flag) {\n        return this.addClass(value);\n      } else {\n        return this.removeClass(value);\n      }\n    }\n    var classes = (value || \"\").match(rgNotSpace) || [],\n      elem = this.node,\n      className = elem.className.baseVal,\n      curClasses = className.match(rgNotSpace) || [],\n      j,\n      pos,\n      clazz,\n      finalValue;\n    j = 0;\n    while (clazz = classes[j++]) {\n      pos = curClasses.indexOf(clazz);\n      if (~pos) {\n        curClasses.splice(pos, 1);\n      } else {\n        curClasses.push(clazz);\n      }\n    }\n    finalValue = curClasses.join(\" \");\n    if (className != finalValue) {\n      elem.className.baseVal = finalValue;\n    }\n    return this;\n  };\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var operators = {\n      \"+\": function (x, y) {\n        return x + y;\n      },\n      \"-\": function (x, y) {\n        return x - y;\n      },\n      \"/\": function (x, y) {\n        return x / y;\n      },\n      \"*\": function (x, y) {\n        return x * y;\n      }\n    },\n    Str = String,\n    reUnit = /[a-z]+$/i,\n    reAddon = /^\\s*([+\\-\\/*])\\s*=\\s*([\\d.eE+\\-]+)\\s*([^\\d\\s]+)?\\s*$/;\n  function getNumber(val) {\n    return val;\n  }\n  function getUnit(unit) {\n    return function (val) {\n      return +val.toFixed(3) + unit;\n    };\n  }\n  eve.on(\"snap.util.attr\", function (val) {\n    var plus = Str(val).match(reAddon);\n    if (plus) {\n      var evnt = eve.nt(),\n        name = evnt.substring(evnt.lastIndexOf(\".\") + 1),\n        a = this.attr(name),\n        atr = {};\n      eve.stop();\n      var unit = plus[3] || \"\",\n        aUnit = a.match(reUnit),\n        op = operators[plus[1]];\n      if (aUnit && aUnit == unit) {\n        val = op(parseFloat(a), +plus[2]);\n      } else {\n        a = this.asPX(name);\n        val = op(this.asPX(name), this.asPX(name, plus[2] + unit));\n      }\n      if (isNaN(a) || isNaN(val)) {\n        return;\n      }\n      atr[name] = val;\n      this.attr(atr);\n    }\n  })(-10);\n  eve.on(\"snap.util.equal\", function (name, b) {\n    var A,\n      B,\n      a = Str(this.attr(name) || \"\"),\n      el = this,\n      bplus = Str(b).match(reAddon);\n    if (bplus) {\n      eve.stop();\n      var unit = bplus[3] || \"\",\n        aUnit = a.match(reUnit),\n        op = operators[bplus[1]];\n      if (aUnit && aUnit == unit) {\n        return {\n          from: parseFloat(a),\n          to: op(parseFloat(a), +bplus[2]),\n          f: getUnit(aUnit)\n        };\n      } else {\n        a = this.asPX(name);\n        return {\n          from: a,\n          to: op(a, this.asPX(name, bplus[2] + unit)),\n          f: getNumber\n        };\n      }\n    }\n  })(-10);\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var proto = Paper.prototype,\n    is = Snap.is;\n  /*\\\r\n   * Paper.rect\r\n   [ method ]\r\n   *\r\n   * Draws a rectangle\r\n   **\r\n   - x (number) x coordinate of the top left corner\r\n   - y (number) y coordinate of the top left corner\r\n   - width (number) width\r\n   - height (number) height\r\n   - rx (number) #optional horizontal radius for rounded corners, default is 0\r\n   - ry (number) #optional vertical radius for rounded corners, default is rx or 0\r\n   = (object) the `rect` element\r\n   **\r\n   > Usage\r\n   | // regular rectangle\r\n   | var c = paper.rect(10, 10, 50, 50);\r\n   | // rectangle with rounded corners\r\n   | var c = paper.rect(40, 40, 50, 50, 10);\r\n  \\*/\n  proto.rect = function (x, y, w, h, rx, ry) {\n    var attr;\n    if (ry == null) {\n      ry = rx;\n    }\n    if (is(x, \"object\") && x == \"[object Object]\") {\n      attr = x;\n    } else if (x != null) {\n      attr = {\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      };\n      if (rx != null) {\n        attr.rx = rx;\n        attr.ry = ry;\n      }\n    }\n    return this.el(\"rect\", attr);\n  };\n  /*\\\r\n   * Paper.circle\r\n   [ method ]\r\n   **\r\n   * Draws a circle\r\n   **\r\n   - x (number) x coordinate of the centre\r\n   - y (number) y coordinate of the centre\r\n   - r (number) radius\r\n   = (object) the `circle` element\r\n   **\r\n   > Usage\r\n   | var c = paper.circle(50, 50, 40);\r\n  \\*/\n  proto.circle = function (cx, cy, r) {\n    var attr;\n    if (is(cx, \"object\") && cx == \"[object Object]\") {\n      attr = cx;\n    } else if (cx != null) {\n      attr = {\n        cx: cx,\n        cy: cy,\n        r: r\n      };\n    }\n    return this.el(\"circle\", attr);\n  };\n  var preload = function () {\n    function onerror() {\n      this.parentNode.removeChild(this);\n    }\n    return function (src, f) {\n      var img = glob.doc.createElement(\"img\"),\n        body = glob.doc.body;\n      img.style.cssText = \"position:absolute;left:-9999em;top:-9999em\";\n      img.onload = function () {\n        f.call(img);\n        img.onload = img.onerror = null;\n        body.removeChild(img);\n      };\n      img.onerror = onerror;\n      body.appendChild(img);\n      img.src = src;\n    };\n  }();\n\n  /*\\\r\n   * Paper.image\r\n   [ method ]\r\n   **\r\n   * Places an image on the surface\r\n   **\r\n   - src (string) URI of the source image\r\n   - x (number) x offset position\r\n   - y (number) y offset position\r\n   - width (number) width of the image\r\n   - height (number) height of the image\r\n   = (object) the `image` element\r\n   * or\r\n   = (object) Snap element object with type `image`\r\n   **\r\n   > Usage\r\n   | var c = paper.image(\"apple.png\", 10, 10, 80, 80);\r\n  \\*/\n  proto.image = function (src, x, y, width, height) {\n    var el = this.el(\"image\");\n    if (is(src, \"object\") && \"src\" in src) {\n      el.attr(src);\n    } else if (src != null) {\n      var set = {\n        \"xlink:href\": src,\n        preserveAspectRatio: \"none\"\n      };\n      if (x != null && y != null) {\n        set.x = x;\n        set.y = y;\n      }\n      if (width != null && height != null) {\n        set.width = width;\n        set.height = height;\n      } else {\n        preload(src, function () {\n          Snap._.$(el.node, {\n            width: this.offsetWidth,\n            height: this.offsetHeight\n          });\n        });\n      }\n      Snap._.$(el.node, set);\n    }\n    return el;\n  };\n  /*\\\r\n   * Paper.ellipse\r\n   [ method ]\r\n   **\r\n   * Draws an ellipse\r\n   **\r\n   - x (number) x coordinate of the centre\r\n   - y (number) y coordinate of the centre\r\n   - rx (number) horizontal radius\r\n   - ry (number) vertical radius\r\n   = (object) the `ellipse` element\r\n   **\r\n   > Usage\r\n   | var c = paper.ellipse(50, 50, 40, 20);\r\n  \\*/\n  proto.ellipse = function (cx, cy, rx, ry) {\n    var attr;\n    if (is(cx, \"object\") && cx == \"[object Object]\") {\n      attr = cx;\n    } else if (cx != null) {\n      attr = {\n        cx: cx,\n        cy: cy,\n        rx: rx,\n        ry: ry\n      };\n    }\n    return this.el(\"ellipse\", attr);\n  };\n  // SIERRA Paper.path(): Unclear from the link what a Catmull-Rom curveto is, and why it would make life any easier.\n  /*\\\r\n   * Paper.path\r\n   [ method ]\r\n   **\r\n   * Creates a `<path>` element using the given string as the path's definition\r\n   - pathString (string) #optional path string in SVG format\r\n   * Path string consists of one-letter commands, followed by comma seprarated arguments in numerical form. Example:\r\n   | \"M10,20L30,40\"\r\n   * This example features two commands: `M`, with arguments `(10, 20)` and `L` with arguments `(30, 40)`. Uppercase letter commands express coordinates in absolute terms, while lowercase commands express them in relative terms from the most recently declared coordinates.\r\n   *\r\n   # <p>Here is short list of commands available, for more details see <a href=\"http://www.w3.org/TR/SVG/paths.html#PathData\" title=\"Details of a path's data attribute's format are described in the SVG specification.\">SVG path string format</a> or <a href=\"https://developer.mozilla.org/en/SVG/Tutorial/Paths\">article about path strings at MDN</a>.</p>\r\n   # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\r\n   # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\r\n   # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\r\n   # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\r\n   # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\r\n   # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\r\n   # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\r\n   # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\r\n   # <tr><td>Q</td><td>quadratic Bézier curveto</td><td>(x1 y1 x y)+</td></tr>\r\n   # <tr><td>T</td><td>smooth quadratic Bézier curveto</td><td>(x y)+</td></tr>\r\n   # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\r\n   # <tr><td>R</td><td><a href=\"http://en.wikipedia.org/wiki/Catmull–Rom_spline#Catmull.E2.80.93Rom_spline\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\r\n   * * _Catmull-Rom curveto_ is a not standard SVG command and added to make life easier.\r\n   * Note: there is a special case when a path consists of only three commands: `M10,10R…z`. In this case the path connects back to its starting point.\r\n   > Usage\r\n   | var c = paper.path(\"M10 10L90 90\");\r\n   | // draw a diagonal line:\r\n   | // move to 10,10, line to 90,90\r\n  \\*/\n  proto.path = function (d) {\n    var attr;\n    if (is(d, \"object\") && !is(d, \"array\")) {\n      attr = d;\n    } else if (d) {\n      attr = {\n        d: d\n      };\n    }\n    return this.el(\"path\", attr);\n  };\n  /*\\\r\n   * Paper.g\r\n   [ method ]\r\n   **\r\n   * Creates a group element\r\n   **\r\n   - varargs (…) #optional elements to nest within the group\r\n   = (object) the `g` element\r\n   **\r\n   > Usage\r\n   | var c1 = paper.circle(),\r\n   |     c2 = paper.rect(),\r\n   |     g = paper.g(c2, c1); // note that the order of elements is different\r\n   * or\r\n   | var c1 = paper.circle(),\r\n   |     c2 = paper.rect(),\r\n   |     g = paper.g();\r\n   | g.add(c2, c1);\r\n  \\*/\n  /*\\\r\n   * Paper.group\r\n   [ method ]\r\n   **\r\n   * See @Paper.g\r\n  \\*/\n  proto.group = proto.g = function (first) {\n    var attr,\n      el = this.el(\"g\");\n    if (arguments.length == 1 && first && !first.type) {\n      el.attr(first);\n    } else if (arguments.length) {\n      el.add(Array.prototype.slice.call(arguments, 0));\n    }\n    return el;\n  };\n  /*\\\r\n   * Paper.svg\r\n   [ method ]\r\n   **\r\n   * Creates a nested SVG element.\r\n   - x (number) @optional X of the element\r\n   - y (number) @optional Y of the element\r\n   - width (number) @optional width of the element\r\n   - height (number) @optional height of the element\r\n   - vbx (number) @optional viewbox X\r\n   - vby (number) @optional viewbox Y\r\n   - vbw (number) @optional viewbox width\r\n   - vbh (number) @optional viewbox height\r\n   **\r\n   = (object) the `svg` element\r\n   **\r\n  \\*/\n  proto.svg = function (x, y, width, height, vbx, vby, vbw, vbh) {\n    var attrs = {};\n    if (is(x, \"object\") && y == null) {\n      attrs = x;\n    } else {\n      if (x != null) {\n        attrs.x = x;\n      }\n      if (y != null) {\n        attrs.y = y;\n      }\n      if (width != null) {\n        attrs.width = width;\n      }\n      if (height != null) {\n        attrs.height = height;\n      }\n      if (vbx != null && vby != null && vbw != null && vbh != null) {\n        attrs.viewBox = [vbx, vby, vbw, vbh];\n      }\n    }\n    return this.el(\"svg\", attrs);\n  };\n  /*\\\r\n   * Paper.mask\r\n   [ method ]\r\n   **\r\n   * Equivalent in behaviour to @Paper.g, except it’s a mask.\r\n   **\r\n   = (object) the `mask` element\r\n   **\r\n  \\*/\n  proto.mask = function (first) {\n    var attr,\n      el = this.el(\"mask\");\n    if (arguments.length == 1 && first && !first.type) {\n      el.attr(first);\n    } else if (arguments.length) {\n      el.add(Array.prototype.slice.call(arguments, 0));\n    }\n    return el;\n  };\n  /*\\\r\n   * Paper.ptrn\r\n   [ method ]\r\n   **\r\n   * Equivalent in behaviour to @Paper.g, except it’s a pattern.\r\n   - x (number) @optional X of the element\r\n   - y (number) @optional Y of the element\r\n   - width (number) @optional width of the element\r\n   - height (number) @optional height of the element\r\n   - vbx (number) @optional viewbox X\r\n   - vby (number) @optional viewbox Y\r\n   - vbw (number) @optional viewbox width\r\n   - vbh (number) @optional viewbox height\r\n   **\r\n   = (object) the `pattern` element\r\n   **\r\n  \\*/\n  proto.ptrn = function (x, y, width, height, vx, vy, vw, vh) {\n    if (is(x, \"object\")) {\n      var attr = x;\n    } else {\n      attr = {\n        patternUnits: \"userSpaceOnUse\"\n      };\n      if (x) {\n        attr.x = x;\n      }\n      if (y) {\n        attr.y = y;\n      }\n      if (width != null) {\n        attr.width = width;\n      }\n      if (height != null) {\n        attr.height = height;\n      }\n      if (vx != null && vy != null && vw != null && vh != null) {\n        attr.viewBox = [vx, vy, vw, vh];\n      } else {\n        attr.viewBox = [x || 0, y || 0, width || 0, height || 0];\n      }\n    }\n    return this.el(\"pattern\", attr);\n  };\n  /*\\\r\n   * Paper.use\r\n   [ method ]\r\n   **\r\n   * Creates a <use> element.\r\n   - id (string) @optional id of element to link\r\n   * or\r\n   - id (Element) @optional element to link\r\n   **\r\n   = (object) the `use` element\r\n   **\r\n  \\*/\n  proto.use = function (id) {\n    if (id != null) {\n      if (id instanceof Element) {\n        if (!id.attr(\"id\")) {\n          id.attr({\n            id: Snap._.id(id)\n          });\n        }\n        id = id.attr(\"id\");\n      }\n      if (String(id).charAt() == \"#\") {\n        id = id.substring(1);\n      }\n      return this.el(\"use\", {\n        \"xlink:href\": \"#\" + id\n      });\n    } else {\n      return Element.prototype.use.call(this);\n    }\n  };\n  /*\\\r\n   * Paper.symbol\r\n   [ method ]\r\n   **\r\n   * Creates a <symbol> element.\r\n   - vbx (number) @optional viewbox X\r\n   - vby (number) @optional viewbox Y\r\n   - vbw (number) @optional viewbox width\r\n   - vbh (number) @optional viewbox height\r\n   = (object) the `symbol` element\r\n   **\r\n  \\*/\n  proto.symbol = function (vx, vy, vw, vh) {\n    var attr = {};\n    if (vx != null && vy != null && vw != null && vh != null) {\n      attr.viewBox = [vx, vy, vw, vh];\n    }\n    return this.el(\"symbol\", attr);\n  };\n  /*\\\r\n   * Paper.text\r\n   [ method ]\r\n   **\r\n   * Draws a text string\r\n   **\r\n   - x (number) x coordinate position\r\n   - y (number) y coordinate position\r\n   - text (string|array) The text string to draw or array of strings to nest within separate `<tspan>` elements\r\n   = (object) the `text` element\r\n   **\r\n   > Usage\r\n   | var t1 = paper.text(50, 50, \"Snap\");\r\n   | var t2 = paper.text(50, 50, [\"S\",\"n\",\"a\",\"p\"]);\r\n   | // Text path usage\r\n   | t1.attr({textpath: \"M10,10L100,100\"});\r\n   | // or\r\n   | var pth = paper.path(\"M10,10L100,100\");\r\n   | t1.attr({textpath: pth});\r\n  \\*/\n  proto.text = function (x, y, text) {\n    var attr = {};\n    if (is(x, \"object\")) {\n      attr = x;\n    } else if (x != null) {\n      attr = {\n        x: x,\n        y: y,\n        text: text || \"\"\n      };\n    }\n    return this.el(\"text\", attr);\n  };\n  /*\\\r\n   * Paper.line\r\n   [ method ]\r\n   **\r\n   * Draws a line\r\n   **\r\n   - x1 (number) x coordinate position of the start\r\n   - y1 (number) y coordinate position of the start\r\n   - x2 (number) x coordinate position of the end\r\n   - y2 (number) y coordinate position of the end\r\n   = (object) the `line` element\r\n   **\r\n   > Usage\r\n   | var t1 = paper.line(50, 50, 100, 100);\r\n  \\*/\n  proto.line = function (x1, y1, x2, y2) {\n    var attr = {};\n    if (is(x1, \"object\")) {\n      attr = x1;\n    } else if (x1 != null) {\n      attr = {\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      };\n    }\n    return this.el(\"line\", attr);\n  };\n  /*\\\r\n   * Paper.polyline\r\n   [ method ]\r\n   **\r\n   * Draws a polyline\r\n   **\r\n   - points (array) array of points\r\n   * or\r\n   - varargs (…) points\r\n   = (object) the `polyline` element\r\n   **\r\n   > Usage\r\n   | var p1 = paper.polyline([10, 10, 100, 100]);\r\n   | var p2 = paper.polyline(10, 10, 100, 100);\r\n  \\*/\n  proto.polyline = function (points) {\n    if (arguments.length > 1) {\n      points = Array.prototype.slice.call(arguments, 0);\n    }\n    var attr = {};\n    if (is(points, \"object\") && !is(points, \"array\")) {\n      attr = points;\n    } else if (points != null) {\n      attr = {\n        points: points\n      };\n    }\n    return this.el(\"polyline\", attr);\n  };\n  /*\\\r\n   * Paper.polygon\r\n   [ method ]\r\n   **\r\n   * Draws a polygon. See @Paper.polyline\r\n  \\*/\n  proto.polygon = function (points) {\n    if (arguments.length > 1) {\n      points = Array.prototype.slice.call(arguments, 0);\n    }\n    var attr = {};\n    if (is(points, \"object\") && !is(points, \"array\")) {\n      attr = points;\n    } else if (points != null) {\n      attr = {\n        points: points\n      };\n    }\n    return this.el(\"polygon\", attr);\n  };\n  // gradients\n  (function () {\n    var $ = Snap._.$;\n    // gradients' helpers\n    /*\\\r\n     * Element.stops\r\n     [ method ]\r\n     **\r\n     * Only for gradients!\r\n     * Returns array of gradient stops elements.\r\n     = (array) the stops array.\r\n    \\*/\n    function Gstops() {\n      return this.selectAll(\"stop\");\n    }\n    /*\\\r\n     * Element.addStop\r\n     [ method ]\r\n     **\r\n     * Only for gradients!\r\n     * Adds another stop to the gradient.\r\n     - color (string) stops color\r\n     - offset (number) stops offset 0..100\r\n     = (object) gradient element\r\n    \\*/\n    function GaddStop(color, offset) {\n      var stop = $(\"stop\"),\n        attr = {\n          offset: +offset + \"%\"\n        };\n      color = Snap.color(color);\n      attr[\"stop-color\"] = color.hex;\n      if (color.opacity < 1) {\n        attr[\"stop-opacity\"] = color.opacity;\n      }\n      $(stop, attr);\n      var stops = this.stops(),\n        inserted;\n      for (var i = 0; i < stops.length; i++) {\n        var stopOffset = parseFloat(stops[i].attr(\"offset\"));\n        if (stopOffset > offset) {\n          this.node.insertBefore(stop, stops[i].node);\n          inserted = true;\n          break;\n        }\n      }\n      if (!inserted) {\n        this.node.appendChild(stop);\n      }\n      return this;\n    }\n    function GgetBBox() {\n      if (this.type == \"linearGradient\") {\n        var x1 = $(this.node, \"x1\") || 0,\n          x2 = $(this.node, \"x2\") || 1,\n          y1 = $(this.node, \"y1\") || 0,\n          y2 = $(this.node, \"y2\") || 0;\n        return Snap._.box(x1, y1, math.abs(x2 - x1), math.abs(y2 - y1));\n      } else {\n        var cx = this.node.cx || .5,\n          cy = this.node.cy || .5,\n          r = this.node.r || 0;\n        return Snap._.box(cx - r, cy - r, r * 2, r * 2);\n      }\n    }\n    /*\\\r\n     * Element.setStops\r\n     [ method ]\r\n     **\r\n     * Only for gradients!\r\n     * Updates stops of the gradient based on passed gradient descriptor. See @Ppaer.gradient\r\n     - str (string) gradient descriptor part after `()`.\r\n     = (object) gradient element\r\n     | var g = paper.gradient(\"l(0, 0, 1, 1)#000-#f00-#fff\");\r\n     | g.setStops(\"#fff-#000-#f00-#fc0\");\r\n    \\*/\n    function GsetStops(str) {\n      var grad = str,\n        stops = this.stops();\n      if (typeof str == \"string\") {\n        grad = eve(\"snap.util.grad.parse\", null, \"l(0,0,0,1)\" + str).firstDefined().stops;\n      }\n      if (!Snap.is(grad, \"array\")) {\n        return;\n      }\n      for (var i = 0; i < stops.length; i++) {\n        if (grad[i]) {\n          var color = Snap.color(grad[i].color),\n            attr = {\n              \"offset\": grad[i].offset + \"%\"\n            };\n          attr[\"stop-color\"] = color.hex;\n          if (color.opacity < 1) {\n            attr[\"stop-opacity\"] = color.opacity;\n          }\n          stops[i].attr(attr);\n        } else {\n          stops[i].remove();\n        }\n      }\n      for (i = stops.length; i < grad.length; i++) {\n        this.addStop(grad[i].color, grad[i].offset);\n      }\n      return this;\n    }\n    function gradient(defs, str) {\n      var grad = eve(\"snap.util.grad.parse\", null, str).firstDefined(),\n        el;\n      if (!grad) {\n        return null;\n      }\n      grad.params.unshift(defs);\n      if (grad.type.toLowerCase() == \"l\") {\n        el = gradientLinear.apply(0, grad.params);\n      } else {\n        el = gradientRadial.apply(0, grad.params);\n      }\n      if (grad.type != grad.type.toLowerCase()) {\n        $(el.node, {\n          gradientUnits: \"userSpaceOnUse\"\n        });\n      }\n      var stops = grad.stops,\n        len = stops.length;\n      for (var i = 0; i < len; i++) {\n        var stop = stops[i];\n        el.addStop(stop.color, stop.offset);\n      }\n      return el;\n    }\n    function gradientLinear(defs, x1, y1, x2, y2) {\n      var el = Snap._.make(\"linearGradient\", defs);\n      el.stops = Gstops;\n      el.addStop = GaddStop;\n      el.getBBox = GgetBBox;\n      el.setStops = GsetStops;\n      if (x1 != null) {\n        $(el.node, {\n          x1: x1,\n          y1: y1,\n          x2: x2,\n          y2: y2\n        });\n      }\n      return el;\n    }\n    function gradientRadial(defs, cx, cy, r, fx, fy) {\n      var el = Snap._.make(\"radialGradient\", defs);\n      el.stops = Gstops;\n      el.addStop = GaddStop;\n      el.getBBox = GgetBBox;\n      if (cx != null) {\n        $(el.node, {\n          cx: cx,\n          cy: cy,\n          r: r\n        });\n      }\n      if (fx != null && fy != null) {\n        $(el.node, {\n          fx: fx,\n          fy: fy\n        });\n      }\n      return el;\n    }\n    /*\\\r\n     * Paper.gradient\r\n     [ method ]\r\n     **\r\n     * Creates a gradient element\r\n     **\r\n     - gradient (string) gradient descriptor\r\n     > Gradient Descriptor\r\n     * The gradient descriptor is an expression formatted as\r\n     * follows: `<type>(<coords>)<colors>`.  The `<type>` can be\r\n     * either linear or radial.  The uppercase `L` or `R` letters\r\n     * indicate absolute coordinates offset from the SVG surface.\r\n     * Lowercase `l` or `r` letters indicate coordinates\r\n     * calculated relative to the element to which the gradient is\r\n     * applied.  Coordinates specify a linear gradient vector as\r\n     * `x1`, `y1`, `x2`, `y2`, or a radial gradient as `cx`, `cy`,\r\n     * `r` and optional `fx`, `fy` specifying a focal point away\r\n     * from the center of the circle. Specify `<colors>` as a list\r\n     * of dash-separated CSS color values.  Each color may be\r\n     * followed by a custom offset value, separated with a colon\r\n     * character.\r\n     > Examples\r\n     * Linear gradient, relative from top-left corner to bottom-right\r\n     * corner, from black through red to white:\r\n     | var g = paper.gradient(\"l(0, 0, 1, 1)#000-#f00-#fff\");\r\n     * Linear gradient, absolute from (0, 0) to (100, 100), from black\r\n     * through red at 25% to white:\r\n     | var g = paper.gradient(\"L(0, 0, 100, 100)#000-#f00:25-#fff\");\r\n     * Radial gradient, relative from the center of the element with radius\r\n     * half the width, from black to white:\r\n     | var g = paper.gradient(\"r(0.5, 0.5, 0.5)#000-#fff\");\r\n     * To apply the gradient:\r\n     | paper.circle(50, 50, 40).attr({\r\n     |     fill: g\r\n     | });\r\n     = (object) the `gradient` element\r\n    \\*/\n    proto.gradient = function (str) {\n      return gradient(this.defs, str);\n    };\n    proto.gradientLinear = function (x1, y1, x2, y2) {\n      return gradientLinear(this.defs, x1, y1, x2, y2);\n    };\n    proto.gradientRadial = function (cx, cy, r, fx, fy) {\n      return gradientRadial(this.defs, cx, cy, r, fx, fy);\n    };\n    /*\\\r\n     * Paper.toString\r\n     [ method ]\r\n     **\r\n     * Returns SVG code for the @Paper\r\n     = (string) SVG code for the @Paper\r\n    \\*/\n    proto.toString = function () {\n      var doc = this.node.ownerDocument,\n        f = doc.createDocumentFragment(),\n        d = doc.createElement(\"div\"),\n        svg = this.node.cloneNode(true),\n        res;\n      f.appendChild(d);\n      d.appendChild(svg);\n      Snap._.$(svg, {\n        xmlns: \"http://www.w3.org/2000/svg\"\n      });\n      res = d.innerHTML;\n      f.removeChild(f.firstChild);\n      return res;\n    };\n    /*\\\r\n     * Paper.toDataURL\r\n     [ method ]\r\n     **\r\n     * Returns SVG code for the @Paper as Data URI string.\r\n     = (string) Data URI string\r\n    \\*/\n    proto.toDataURL = function () {\n      if (window && window.btoa) {\n        return \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(this)));\n      }\n    };\n    /*\\\r\n     * Paper.clear\r\n     [ method ]\r\n     **\r\n     * Removes all child nodes of the paper, except <defs>.\r\n    \\*/\n    proto.clear = function () {\n      var node = this.node.firstChild,\n        next;\n      while (node) {\n        next = node.nextSibling;\n        if (node.tagName != \"defs\") {\n          node.parentNode.removeChild(node);\n        } else {\n          proto.clear.call({\n            node: node\n          });\n        }\n        node = next;\n      }\n    };\n  })();\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob) {\n  var elproto = Element.prototype,\n    is = Snap.is,\n    clone = Snap._.clone,\n    has = \"hasOwnProperty\",\n    p2s = /,?([a-z]),?/gi,\n    toFloat = parseFloat,\n    math = Math,\n    PI = math.PI,\n    mmin = math.min,\n    mmax = math.max,\n    pow = math.pow,\n    abs = math.abs;\n  function paths(ps) {\n    var p = paths.ps = paths.ps || {};\n    if (p[ps]) {\n      p[ps].sleep = 100;\n    } else {\n      p[ps] = {\n        sleep: 100\n      };\n    }\n    setTimeout(function () {\n      for (var key in p) if (p[has](key) && key != ps) {\n        p[key].sleep--;\n        !p[key].sleep && delete p[key];\n      }\n    });\n    return p[ps];\n  }\n  function box(x, y, width, height) {\n    if (x == null) {\n      x = y = width = height = 0;\n    }\n    if (y == null) {\n      y = x.y;\n      width = x.width;\n      height = x.height;\n      x = x.x;\n    }\n    return {\n      x: x,\n      y: y,\n      width: width,\n      w: width,\n      height: height,\n      h: height,\n      x2: x + width,\n      y2: y + height,\n      cx: x + width / 2,\n      cy: y + height / 2,\n      r1: math.min(width, height) / 2,\n      r2: math.max(width, height) / 2,\n      r0: math.sqrt(width * width + height * height) / 2,\n      path: rectPath(x, y, width, height),\n      vb: [x, y, width, height].join(\" \")\n    };\n  }\n  function toString() {\n    return this.join(\",\").replace(p2s, \"$1\");\n  }\n  function pathClone(pathArray) {\n    var res = clone(pathArray);\n    res.toString = toString;\n    return res;\n  }\n  function getPointAtSegmentLength(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\n    if (length == null) {\n      return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\n    } else {\n      return findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTotLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\n    }\n  }\n  function getLengthFactory(istotal, subpath) {\n    function O(val) {\n      return +(+val).toFixed(3);\n    }\n    return Snap._.cacher(function (path, length, onlystart) {\n      if (path instanceof Element) {\n        path = path.attr(\"d\");\n      }\n      path = path2curve(path);\n      var x,\n        y,\n        p,\n        l,\n        sp = \"\",\n        subpaths = {},\n        point,\n        len = 0;\n      for (var i = 0, ii = path.length; i < ii; i++) {\n        p = path[i];\n        if (p[0] == \"M\") {\n          x = +p[1];\n          y = +p[2];\n        } else {\n          l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n          if (len + l > length) {\n            if (subpath && !subpaths.start) {\n              point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n              sp += [\"C\" + O(point.start.x), O(point.start.y), O(point.m.x), O(point.m.y), O(point.x), O(point.y)];\n              if (onlystart) {\n                return sp;\n              }\n              subpaths.start = sp;\n              sp = [\"M\" + O(point.x), O(point.y) + \"C\" + O(point.n.x), O(point.n.y), O(point.end.x), O(point.end.y), O(p[5]), O(p[6])].join();\n              len += l;\n              x = +p[5];\n              y = +p[6];\n              continue;\n            }\n            if (!istotal && !subpath) {\n              point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n              return point;\n            }\n          }\n          len += l;\n          x = +p[5];\n          y = +p[6];\n        }\n        sp += p.shift() + p;\n      }\n      subpaths.end = sp;\n      point = istotal ? len : subpath ? subpaths : findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\n      return point;\n    }, null, Snap._.clone);\n  }\n  var getTotalLength = getLengthFactory(1),\n    getPointAtLength = getLengthFactory(),\n    getSubpathsAtLength = getLengthFactory(0, 1);\n  function findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n    var t1 = 1 - t,\n      t13 = pow(t1, 3),\n      t12 = pow(t1, 2),\n      t2 = t * t,\n      t3 = t2 * t,\n      x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\n      y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\n      mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\n      my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\n      nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\n      ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\n      ax = t1 * p1x + t * c1x,\n      ay = t1 * p1y + t * c1y,\n      cx = t1 * c2x + t * p2x,\n      cy = t1 * c2y + t * p2y,\n      alpha = 90 - math.atan2(mx - nx, my - ny) * 180 / PI;\n    // (mx > nx || my < ny) && (alpha += 180);\n    return {\n      x: x,\n      y: y,\n      m: {\n        x: mx,\n        y: my\n      },\n      n: {\n        x: nx,\n        y: ny\n      },\n      start: {\n        x: ax,\n        y: ay\n      },\n      end: {\n        x: cx,\n        y: cy\n      },\n      alpha: alpha\n    };\n  }\n  function bezierBBox(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n    if (!Snap.is(p1x, \"array\")) {\n      p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n    }\n    var bbox = curveDim.apply(null, p1x);\n    return box(bbox.min.x, bbox.min.y, bbox.max.x - bbox.min.x, bbox.max.y - bbox.min.y);\n  }\n  function isPointInsideBBox(bbox, x, y) {\n    return x >= bbox.x && x <= bbox.x + bbox.width && y >= bbox.y && y <= bbox.y + bbox.height;\n  }\n  function isBBoxIntersect(bbox1, bbox2) {\n    bbox1 = box(bbox1);\n    bbox2 = box(bbox2);\n    return isPointInsideBBox(bbox2, bbox1.x, bbox1.y) || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y) || isPointInsideBBox(bbox2, bbox1.x, bbox1.y2) || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y2) || isPointInsideBBox(bbox1, bbox2.x, bbox2.y) || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y) || isPointInsideBBox(bbox1, bbox2.x, bbox2.y2) || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y2) || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x) && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n  }\n  function base3(t, p1, p2, p3, p4) {\n    var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\n      t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n    return t * t2 - 3 * p1 + 3 * p2;\n  }\n  function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\n    if (z == null) {\n      z = 1;\n    }\n    z = z > 1 ? 1 : z < 0 ? 0 : z;\n    var z2 = z / 2,\n      n = 12,\n      Tvalues = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816],\n      Cvalues = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472],\n      sum = 0;\n    for (var i = 0; i < n; i++) {\n      var ct = z2 * Tvalues[i] + z2,\n        xbase = base3(ct, x1, x2, x3, x4),\n        ybase = base3(ct, y1, y2, y3, y4),\n        comb = xbase * xbase + ybase * ybase;\n      sum += Cvalues[i] * math.sqrt(comb);\n    }\n    return z2 * sum;\n  }\n  function getTotLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\n    if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\n      return;\n    }\n    var t = 1,\n      step = t / 2,\n      t2 = t - step,\n      l,\n      e = .01;\n    l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n    while (abs(l - ll) > e) {\n      step /= 2;\n      t2 += (l < ll ? 1 : -1) * step;\n      l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n    }\n    return t2;\n  }\n  function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n    if (mmax(x1, x2) < mmin(x3, x4) || mmin(x1, x2) > mmax(x3, x4) || mmax(y1, y2) < mmin(y3, y4) || mmin(y1, y2) > mmax(y3, y4)) {\n      return;\n    }\n    var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n      ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n      denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n    if (!denominator) {\n      return;\n    }\n    var px = nx / denominator,\n      py = ny / denominator,\n      px2 = +px.toFixed(2),\n      py2 = +py.toFixed(2);\n    if (px2 < +mmin(x1, x2).toFixed(2) || px2 > +mmax(x1, x2).toFixed(2) || px2 < +mmin(x3, x4).toFixed(2) || px2 > +mmax(x3, x4).toFixed(2) || py2 < +mmin(y1, y2).toFixed(2) || py2 > +mmax(y1, y2).toFixed(2) || py2 < +mmin(y3, y4).toFixed(2) || py2 > +mmax(y3, y4).toFixed(2)) {\n      return;\n    }\n    return {\n      x: px,\n      y: py\n    };\n  }\n  function inter(bez1, bez2) {\n    return interHelper(bez1, bez2);\n  }\n  function interCount(bez1, bez2) {\n    return interHelper(bez1, bez2, 1);\n  }\n  function interHelper(bez1, bez2, justCount) {\n    var bbox1 = bezierBBox(bez1),\n      bbox2 = bezierBBox(bez2);\n    if (!isBBoxIntersect(bbox1, bbox2)) {\n      return justCount ? 0 : [];\n    }\n    var l1 = bezlen.apply(0, bez1),\n      l2 = bezlen.apply(0, bez2),\n      n1 = ~~(l1 / 8),\n      n2 = ~~(l2 / 8),\n      dots1 = [],\n      dots2 = [],\n      xy = {},\n      res = justCount ? 0 : [];\n    for (var i = 0; i < n1 + 1; i++) {\n      var p = findDotsAtSegment.apply(0, bez1.concat(i / n1));\n      dots1.push({\n        x: p.x,\n        y: p.y,\n        t: i / n1\n      });\n    }\n    for (i = 0; i < n2 + 1; i++) {\n      p = findDotsAtSegment.apply(0, bez2.concat(i / n2));\n      dots2.push({\n        x: p.x,\n        y: p.y,\n        t: i / n2\n      });\n    }\n    for (i = 0; i < n1; i++) {\n      for (var j = 0; j < n2; j++) {\n        var di = dots1[i],\n          di1 = dots1[i + 1],\n          dj = dots2[j],\n          dj1 = dots2[j + 1],\n          ci = abs(di1.x - di.x) < .001 ? \"y\" : \"x\",\n          cj = abs(dj1.x - dj.x) < .001 ? \"y\" : \"x\",\n          is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n        if (is) {\n          if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\n            continue;\n          }\n          xy[is.x.toFixed(4)] = is.y.toFixed(4);\n          var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\n            t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n          if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {\n            if (justCount) {\n              res++;\n            } else {\n              res.push({\n                x: is.x,\n                y: is.y,\n                t1: t1,\n                t2: t2\n              });\n            }\n          }\n        }\n      }\n    }\n    return res;\n  }\n  function pathIntersection(path1, path2) {\n    return interPathHelper(path1, path2);\n  }\n  function pathIntersectionNumber(path1, path2) {\n    return interPathHelper(path1, path2, 1);\n  }\n  function interPathHelper(path1, path2, justCount) {\n    path1 = path2curve(path1);\n    path2 = path2curve(path2);\n    var x1,\n      y1,\n      x2,\n      y2,\n      x1m,\n      y1m,\n      x2m,\n      y2m,\n      bez1,\n      bez2,\n      res = justCount ? 0 : [];\n    for (var i = 0, ii = path1.length; i < ii; i++) {\n      var pi = path1[i];\n      if (pi[0] == \"M\") {\n        x1 = x1m = pi[1];\n        y1 = y1m = pi[2];\n      } else {\n        if (pi[0] == \"C\") {\n          bez1 = [x1, y1].concat(pi.slice(1));\n          x1 = bez1[6];\n          y1 = bez1[7];\n        } else {\n          bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n          x1 = x1m;\n          y1 = y1m;\n        }\n        for (var j = 0, jj = path2.length; j < jj; j++) {\n          var pj = path2[j];\n          if (pj[0] == \"M\") {\n            x2 = x2m = pj[1];\n            y2 = y2m = pj[2];\n          } else {\n            if (pj[0] == \"C\") {\n              bez2 = [x2, y2].concat(pj.slice(1));\n              x2 = bez2[6];\n              y2 = bez2[7];\n            } else {\n              bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n              x2 = x2m;\n              y2 = y2m;\n            }\n            var intr = interHelper(bez1, bez2, justCount);\n            if (justCount) {\n              res += intr;\n            } else {\n              for (var k = 0, kk = intr.length; k < kk; k++) {\n                intr[k].segment1 = i;\n                intr[k].segment2 = j;\n                intr[k].bez1 = bez1;\n                intr[k].bez2 = bez2;\n              }\n              res = res.concat(intr);\n            }\n          }\n        }\n      }\n    }\n    return res;\n  }\n  function isPointInsidePath(path, x, y) {\n    var bbox = pathBBox(path);\n    return isPointInsideBBox(bbox, x, y) && interPathHelper(path, [[\"M\", x, y], [\"H\", bbox.x2 + 10]], 1) % 2 == 1;\n  }\n  function pathBBox(path) {\n    var pth = paths(path);\n    if (pth.bbox) {\n      return clone(pth.bbox);\n    }\n    if (!path) {\n      return box();\n    }\n    path = path2curve(path);\n    var x = 0,\n      y = 0,\n      X = [],\n      Y = [],\n      p;\n    for (var i = 0, ii = path.length; i < ii; i++) {\n      p = path[i];\n      if (p[0] == \"M\") {\n        x = p[1];\n        y = p[2];\n        X.push(x);\n        Y.push(y);\n      } else {\n        var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n        X = X.concat(dim.min.x, dim.max.x);\n        Y = Y.concat(dim.min.y, dim.max.y);\n        x = p[5];\n        y = p[6];\n      }\n    }\n    var xmin = mmin.apply(0, X),\n      ymin = mmin.apply(0, Y),\n      xmax = mmax.apply(0, X),\n      ymax = mmax.apply(0, Y),\n      bb = box(xmin, ymin, xmax - xmin, ymax - ymin);\n    pth.bbox = clone(bb);\n    return bb;\n  }\n  function rectPath(x, y, w, h, r) {\n    if (r) {\n      return [[\"M\", +x + +r, y], [\"l\", w - r * 2, 0], [\"a\", r, r, 0, 0, 1, r, r], [\"l\", 0, h - r * 2], [\"a\", r, r, 0, 0, 1, -r, r], [\"l\", r * 2 - w, 0], [\"a\", r, r, 0, 0, 1, -r, -r], [\"l\", 0, r * 2 - h], [\"a\", r, r, 0, 0, 1, r, -r], [\"z\"]];\n    }\n    var res = [[\"M\", x, y], [\"l\", w, 0], [\"l\", 0, h], [\"l\", -w, 0], [\"z\"]];\n    res.toString = toString;\n    return res;\n  }\n  function ellipsePath(x, y, rx, ry, a) {\n    if (a == null && ry == null) {\n      ry = rx;\n    }\n    x = +x;\n    y = +y;\n    rx = +rx;\n    ry = +ry;\n    if (a != null) {\n      var rad = Math.PI / 180,\n        x1 = x + rx * Math.cos(-ry * rad),\n        x2 = x + rx * Math.cos(-a * rad),\n        y1 = y + rx * Math.sin(-ry * rad),\n        y2 = y + rx * Math.sin(-a * rad),\n        res = [[\"M\", x1, y1], [\"A\", rx, rx, 0, +(a - ry > 180), 0, x2, y2]];\n    } else {\n      res = [[\"M\", x, y], [\"m\", 0, -ry], [\"a\", rx, ry, 0, 1, 1, 0, 2 * ry], [\"a\", rx, ry, 0, 1, 1, 0, -2 * ry], [\"z\"]];\n    }\n    res.toString = toString;\n    return res;\n  }\n  var unit2px = Snap._unit2px,\n    getPath = {\n      path: function (el) {\n        return el.attr(\"path\");\n      },\n      circle: function (el) {\n        var attr = unit2px(el);\n        return ellipsePath(attr.cx, attr.cy, attr.r);\n      },\n      ellipse: function (el) {\n        var attr = unit2px(el);\n        return ellipsePath(attr.cx || 0, attr.cy || 0, attr.rx, attr.ry);\n      },\n      rect: function (el) {\n        var attr = unit2px(el);\n        return rectPath(attr.x || 0, attr.y || 0, attr.width, attr.height, attr.rx, attr.ry);\n      },\n      image: function (el) {\n        var attr = unit2px(el);\n        return rectPath(attr.x || 0, attr.y || 0, attr.width, attr.height);\n      },\n      line: function (el) {\n        return \"M\" + [el.attr(\"x1\") || 0, el.attr(\"y1\") || 0, el.attr(\"x2\"), el.attr(\"y2\")];\n      },\n      polyline: function (el) {\n        return \"M\" + el.attr(\"points\");\n      },\n      polygon: function (el) {\n        return \"M\" + el.attr(\"points\") + \"z\";\n      },\n      deflt: function (el) {\n        var bbox = el.node.getBBox();\n        return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n      }\n    };\n  function pathToRelative(pathArray) {\n    var pth = paths(pathArray),\n      lowerCase = String.prototype.toLowerCase;\n    if (pth.rel) {\n      return pathClone(pth.rel);\n    }\n    if (!Snap.is(pathArray, \"array\") || !Snap.is(pathArray && pathArray[0], \"array\")) {\n      pathArray = Snap.parsePathString(pathArray);\n    }\n    var res = [],\n      x = 0,\n      y = 0,\n      mx = 0,\n      my = 0,\n      start = 0;\n    if (pathArray[0][0] == \"M\") {\n      x = pathArray[0][1];\n      y = pathArray[0][2];\n      mx = x;\n      my = y;\n      start++;\n      res.push([\"M\", x, y]);\n    }\n    for (var i = start, ii = pathArray.length; i < ii; i++) {\n      var r = res[i] = [],\n        pa = pathArray[i];\n      if (pa[0] != lowerCase.call(pa[0])) {\n        r[0] = lowerCase.call(pa[0]);\n        switch (r[0]) {\n          case \"a\":\n            r[1] = pa[1];\n            r[2] = pa[2];\n            r[3] = pa[3];\n            r[4] = pa[4];\n            r[5] = pa[5];\n            r[6] = +(pa[6] - x).toFixed(3);\n            r[7] = +(pa[7] - y).toFixed(3);\n            break;\n          case \"v\":\n            r[1] = +(pa[1] - y).toFixed(3);\n            break;\n          case \"m\":\n            mx = pa[1];\n            my = pa[2];\n          default:\n            for (var j = 1, jj = pa.length; j < jj; j++) {\n              r[j] = +(pa[j] - (j % 2 ? x : y)).toFixed(3);\n            }\n        }\n      } else {\n        r = res[i] = [];\n        if (pa[0] == \"m\") {\n          mx = pa[1] + x;\n          my = pa[2] + y;\n        }\n        for (var k = 0, kk = pa.length; k < kk; k++) {\n          res[i][k] = pa[k];\n        }\n      }\n      var len = res[i].length;\n      switch (res[i][0]) {\n        case \"z\":\n          x = mx;\n          y = my;\n          break;\n        case \"h\":\n          x += +res[i][len - 1];\n          break;\n        case \"v\":\n          y += +res[i][len - 1];\n          break;\n        default:\n          x += +res[i][len - 2];\n          y += +res[i][len - 1];\n      }\n    }\n    res.toString = toString;\n    pth.rel = pathClone(res);\n    return res;\n  }\n  function pathToAbsolute(pathArray) {\n    var pth = paths(pathArray);\n    if (pth.abs) {\n      return pathClone(pth.abs);\n    }\n    if (!is(pathArray, \"array\") || !is(pathArray && pathArray[0], \"array\")) {\n      // rough assumption\n      pathArray = Snap.parsePathString(pathArray);\n    }\n    if (!pathArray || !pathArray.length) {\n      return [[\"M\", 0, 0]];\n    }\n    var res = [],\n      x = 0,\n      y = 0,\n      mx = 0,\n      my = 0,\n      start = 0,\n      pa0;\n    if (pathArray[0][0] == \"M\") {\n      x = +pathArray[0][1];\n      y = +pathArray[0][2];\n      mx = x;\n      my = y;\n      start++;\n      res[0] = [\"M\", x, y];\n    }\n    var crz = pathArray.length == 3 && pathArray[0][0] == \"M\" && pathArray[1][0].toUpperCase() == \"R\" && pathArray[2][0].toUpperCase() == \"Z\";\n    for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\n      res.push(r = []);\n      pa = pathArray[i];\n      pa0 = pa[0];\n      if (pa0 != pa0.toUpperCase()) {\n        r[0] = pa0.toUpperCase();\n        switch (r[0]) {\n          case \"A\":\n            r[1] = pa[1];\n            r[2] = pa[2];\n            r[3] = pa[3];\n            r[4] = pa[4];\n            r[5] = pa[5];\n            r[6] = +pa[6] + x;\n            r[7] = +pa[7] + y;\n            break;\n          case \"V\":\n            r[1] = +pa[1] + y;\n            break;\n          case \"H\":\n            r[1] = +pa[1] + x;\n            break;\n          case \"R\":\n            var dots = [x, y].concat(pa.slice(1));\n            for (var j = 2, jj = dots.length; j < jj; j++) {\n              dots[j] = +dots[j] + x;\n              dots[++j] = +dots[j] + y;\n            }\n            res.pop();\n            res = res.concat(catmullRom2bezier(dots, crz));\n            break;\n          case \"O\":\n            res.pop();\n            dots = ellipsePath(x, y, pa[1], pa[2]);\n            dots.push(dots[0]);\n            res = res.concat(dots);\n            break;\n          case \"U\":\n            res.pop();\n            res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\n            r = [\"U\"].concat(res[res.length - 1].slice(-2));\n            break;\n          case \"M\":\n            mx = +pa[1] + x;\n            my = +pa[2] + y;\n          default:\n            for (j = 1, jj = pa.length; j < jj; j++) {\n              r[j] = +pa[j] + (j % 2 ? x : y);\n            }\n        }\n      } else if (pa0 == \"R\") {\n        dots = [x, y].concat(pa.slice(1));\n        res.pop();\n        res = res.concat(catmullRom2bezier(dots, crz));\n        r = [\"R\"].concat(pa.slice(-2));\n      } else if (pa0 == \"O\") {\n        res.pop();\n        dots = ellipsePath(x, y, pa[1], pa[2]);\n        dots.push(dots[0]);\n        res = res.concat(dots);\n      } else if (pa0 == \"U\") {\n        res.pop();\n        res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\n        r = [\"U\"].concat(res[res.length - 1].slice(-2));\n      } else {\n        for (var k = 0, kk = pa.length; k < kk; k++) {\n          r[k] = pa[k];\n        }\n      }\n      pa0 = pa0.toUpperCase();\n      if (pa0 != \"O\") {\n        switch (r[0]) {\n          case \"Z\":\n            x = +mx;\n            y = +my;\n            break;\n          case \"H\":\n            x = r[1];\n            break;\n          case \"V\":\n            y = r[1];\n            break;\n          case \"M\":\n            mx = r[r.length - 2];\n            my = r[r.length - 1];\n          default:\n            x = r[r.length - 2];\n            y = r[r.length - 1];\n        }\n      }\n    }\n    res.toString = toString;\n    pth.abs = pathClone(res);\n    return res;\n  }\n  function l2c(x1, y1, x2, y2) {\n    return [x1, y1, x2, y2, x2, y2];\n  }\n  function q2c(x1, y1, ax, ay, x2, y2) {\n    var _13 = 1 / 3,\n      _23 = 2 / 3;\n    return [_13 * x1 + _23 * ax, _13 * y1 + _23 * ay, _13 * x2 + _23 * ax, _13 * y2 + _23 * ay, x2, y2];\n  }\n  function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n    // for more information of where this math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    var _120 = PI * 120 / 180,\n      rad = PI / 180 * (+angle || 0),\n      res = [],\n      xy,\n      rotate = Snap._.cacher(function (x, y, rad) {\n        var X = x * math.cos(rad) - y * math.sin(rad),\n          Y = x * math.sin(rad) + y * math.cos(rad);\n        return {\n          x: X,\n          y: Y\n        };\n      });\n    if (!rx || !ry) {\n      return [x1, y1, x2, y2, x2, y2];\n    }\n    if (!recursive) {\n      xy = rotate(x1, y1, -rad);\n      x1 = xy.x;\n      y1 = xy.y;\n      xy = rotate(x2, y2, -rad);\n      x2 = xy.x;\n      y2 = xy.y;\n      var cos = math.cos(PI / 180 * angle),\n        sin = math.sin(PI / 180 * angle),\n        x = (x1 - x2) / 2,\n        y = (y1 - y2) / 2;\n      var h = x * x / (rx * rx) + y * y / (ry * ry);\n      if (h > 1) {\n        h = math.sqrt(h);\n        rx = h * rx;\n        ry = h * ry;\n      }\n      var rx2 = rx * rx,\n        ry2 = ry * ry,\n        k = (large_arc_flag == sweep_flag ? -1 : 1) * math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n        cx = k * rx * y / ry + (x1 + x2) / 2,\n        cy = k * -ry * x / rx + (y1 + y2) / 2,\n        f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n        f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n      f1 = x1 < cx ? PI - f1 : f1;\n      f2 = x2 < cx ? PI - f2 : f2;\n      f1 < 0 && (f1 = PI * 2 + f1);\n      f2 < 0 && (f2 = PI * 2 + f2);\n      if (sweep_flag && f1 > f2) {\n        f1 = f1 - PI * 2;\n      }\n      if (!sweep_flag && f2 > f1) {\n        f2 = f2 - PI * 2;\n      }\n    } else {\n      f1 = recursive[0];\n      f2 = recursive[1];\n      cx = recursive[2];\n      cy = recursive[3];\n    }\n    var df = f2 - f1;\n    if (abs(df) > _120) {\n      var f2old = f2,\n        x2old = x2,\n        y2old = y2;\n      f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n      x2 = cx + rx * math.cos(f2);\n      y2 = cy + ry * math.sin(f2);\n      res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n    }\n    df = f2 - f1;\n    var c1 = math.cos(f1),\n      s1 = math.sin(f1),\n      c2 = math.cos(f2),\n      s2 = math.sin(f2),\n      t = math.tan(df / 4),\n      hx = 4 / 3 * rx * t,\n      hy = 4 / 3 * ry * t,\n      m1 = [x1, y1],\n      m2 = [x1 + hx * s1, y1 - hy * c1],\n      m3 = [x2 + hx * s2, y2 - hy * c2],\n      m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n      return [m2, m3, m4].concat(res);\n    } else {\n      res = [m2, m3, m4].concat(res).join().split(\",\");\n      var newres = [];\n      for (var i = 0, ii = res.length; i < ii; i++) {\n        newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n      }\n      return newres;\n    }\n  }\n  function findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n    var t1 = 1 - t;\n    return {\n      x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n      y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\n    };\n  }\n\n  // Returns bounding box of cubic bezier curve.\n  // Source: http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n  // Original version: NISHIO Hirokazu\n  // Modifications: https://github.com/timo22345\n  function curveDim(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var tvalues = [],\n      bounds = [[], []],\n      a,\n      b,\n      c,\n      t,\n      t1,\n      t2,\n      b2ac,\n      sqrtb2ac;\n    for (var i = 0; i < 2; ++i) {\n      if (i == 0) {\n        b = 6 * x0 - 12 * x1 + 6 * x2;\n        a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n        c = 3 * x1 - 3 * x0;\n      } else {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n      if (abs(a) < 1e-12) {\n        if (abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      sqrtb2ac = math.sqrt(b2ac);\n      if (b2ac < 0) {\n        continue;\n      }\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n    var x,\n      y,\n      j = tvalues.length,\n      jlen = j,\n      mt;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n      bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n    }\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    bounds[0].length = bounds[1].length = jlen + 2;\n    return {\n      min: {\n        x: mmin.apply(0, bounds[0]),\n        y: mmin.apply(0, bounds[1])\n      },\n      max: {\n        x: mmax.apply(0, bounds[0]),\n        y: mmax.apply(0, bounds[1])\n      }\n    };\n  }\n  function path2curve(path, path2) {\n    var pth = !path2 && paths(path);\n    if (!path2 && pth.curve) {\n      return pathClone(pth.curve);\n    }\n    var p = pathToAbsolute(path),\n      p2 = path2 && pathToAbsolute(path2),\n      attrs = {\n        x: 0,\n        y: 0,\n        bx: 0,\n        by: 0,\n        X: 0,\n        Y: 0,\n        qx: null,\n        qy: null\n      },\n      attrs2 = {\n        x: 0,\n        y: 0,\n        bx: 0,\n        by: 0,\n        X: 0,\n        Y: 0,\n        qx: null,\n        qy: null\n      },\n      processPath = function (path, d, pcom) {\n        var nx, ny;\n        if (!path) {\n          return [\"C\", d.x, d.y, d.x, d.y, d.x, d.y];\n        }\n        !(path[0] in {\n          T: 1,\n          Q: 1\n        }) && (d.qx = d.qy = null);\n        switch (path[0]) {\n          case \"M\":\n            d.X = path[1];\n            d.Y = path[2];\n            break;\n          case \"A\":\n            path = [\"C\"].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n            break;\n          case \"S\":\n            if (pcom == \"C\" || pcom == \"S\") {\n              // In \"S\" case we have to take into account, if the previous command is C/S.\n              nx = d.x * 2 - d.bx; // And reflect the previous\n              ny = d.y * 2 - d.by; // command's control point relative to the current point.\n            } else {\n              // or some else or nothing\n              nx = d.x;\n              ny = d.y;\n            }\n            path = [\"C\", nx, ny].concat(path.slice(1));\n            break;\n          case \"T\":\n            if (pcom == \"Q\" || pcom == \"T\") {\n              // In \"T\" case we have to take into account, if the previous command is Q/T.\n              d.qx = d.x * 2 - d.qx; // And make a reflection similar\n              d.qy = d.y * 2 - d.qy; // to case \"S\".\n            } else {\n              // or something else or nothing\n              d.qx = d.x;\n              d.qy = d.y;\n            }\n            path = [\"C\"].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n            break;\n          case \"Q\":\n            d.qx = path[1];\n            d.qy = path[2];\n            path = [\"C\"].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n            break;\n          case \"L\":\n            path = [\"C\"].concat(l2c(d.x, d.y, path[1], path[2]));\n            break;\n          case \"H\":\n            path = [\"C\"].concat(l2c(d.x, d.y, path[1], d.y));\n            break;\n          case \"V\":\n            path = [\"C\"].concat(l2c(d.x, d.y, d.x, path[1]));\n            break;\n          case \"Z\":\n            path = [\"C\"].concat(l2c(d.x, d.y, d.X, d.Y));\n            break;\n        }\n        return path;\n      },\n      fixArc = function (pp, i) {\n        if (pp[i].length > 7) {\n          pp[i].shift();\n          var pi = pp[i];\n          while (pi.length) {\n            pcoms1[i] = \"A\"; // if created multiple C:s, their original seg is saved\n            p2 && (pcoms2[i] = \"A\"); // the same as above\n            pp.splice(i++, 0, [\"C\"].concat(pi.splice(0, 6)));\n          }\n          pp.splice(i, 1);\n          ii = mmax(p.length, p2 && p2.length || 0);\n        }\n      },\n      fixM = function (path1, path2, a1, a2, i) {\n        if (path1 && path2 && path1[i][0] == \"M\" && path2[i][0] != \"M\") {\n          path2.splice(i, 0, [\"M\", a2.x, a2.y]);\n          a1.bx = 0;\n          a1.by = 0;\n          a1.x = path1[i][1];\n          a1.y = path1[i][2];\n          ii = mmax(p.length, p2 && p2.length || 0);\n        }\n      },\n      pcoms1 = [],\n      // path commands of original path p\n      pcoms2 = [],\n      // path commands of original path p2\n      pfirst = \"\",\n      // temporary holder for original path command\n      pcom = \"\"; // holder for previous path command of original path\n    for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\n      p[i] && (pfirst = p[i][0]); // save current path command\n\n      if (pfirst != \"C\")\n        // C is not saved yet, because it may be result of conversion\n        {\n          pcoms1[i] = pfirst; // Save current path command\n          i && (pcom = pcoms1[i - 1]); // Get previous path command pcom\n        }\n      p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n      if (pcoms1[i] != \"A\" && pfirst == \"C\") pcoms1[i] = \"C\"; // A is the only command\n      // which may produce multiple C:s\n      // so we have to make sure that C is also C in original path\n\n      fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\n\n      if (p2) {\n        // the same procedures is done to p2\n        p2[i] && (pfirst = p2[i][0]);\n        if (pfirst != \"C\") {\n          pcoms2[i] = pfirst;\n          i && (pcom = pcoms2[i - 1]);\n        }\n        p2[i] = processPath(p2[i], attrs2, pcom);\n        if (pcoms2[i] != \"A\" && pfirst == \"C\") {\n          pcoms2[i] = \"C\";\n        }\n        fixArc(p2, i);\n      }\n      fixM(p, p2, attrs, attrs2, i);\n      fixM(p2, p, attrs2, attrs, i);\n      var seg = p[i],\n        seg2 = p2 && p2[i],\n        seglen = seg.length,\n        seg2len = p2 && seg2.length;\n      attrs.x = seg[seglen - 2];\n      attrs.y = seg[seglen - 1];\n      attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n      attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n      attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\n      attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\n      attrs2.x = p2 && seg2[seg2len - 2];\n      attrs2.y = p2 && seg2[seg2len - 1];\n    }\n    if (!p2) {\n      pth.curve = pathClone(p);\n    }\n    return p2 ? [p, p2] : p;\n  }\n  function mapPath(path, matrix) {\n    if (!matrix) {\n      return path;\n    }\n    var x, y, i, j, ii, jj, pathi;\n    path = path2curve(path);\n    for (i = 0, ii = path.length; i < ii; i++) {\n      pathi = path[i];\n      for (j = 1, jj = pathi.length; j < jj; j += 2) {\n        x = matrix.x(pathi[j], pathi[j + 1]);\n        y = matrix.y(pathi[j], pathi[j + 1]);\n        pathi[j] = x;\n        pathi[j + 1] = y;\n      }\n    }\n    return path;\n  }\n\n  // http://schepers.cc/getting-to-the-point\n  function catmullRom2bezier(crp, z) {\n    var d = [];\n    for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n      var p = [{\n        x: +crp[i - 2],\n        y: +crp[i - 1]\n      }, {\n        x: +crp[i],\n        y: +crp[i + 1]\n      }, {\n        x: +crp[i + 2],\n        y: +crp[i + 3]\n      }, {\n        x: +crp[i + 4],\n        y: +crp[i + 5]\n      }];\n      if (z) {\n        if (!i) {\n          p[0] = {\n            x: +crp[iLen - 2],\n            y: +crp[iLen - 1]\n          };\n        } else if (iLen - 4 == i) {\n          p[3] = {\n            x: +crp[0],\n            y: +crp[1]\n          };\n        } else if (iLen - 2 == i) {\n          p[2] = {\n            x: +crp[0],\n            y: +crp[1]\n          };\n          p[3] = {\n            x: +crp[2],\n            y: +crp[3]\n          };\n        }\n      } else {\n        if (iLen - 4 == i) {\n          p[3] = p[2];\n        } else if (!i) {\n          p[0] = {\n            x: +crp[i],\n            y: +crp[i + 1]\n          };\n        }\n      }\n      d.push([\"C\", (-p[0].x + 6 * p[1].x + p[2].x) / 6, (-p[0].y + 6 * p[1].y + p[2].y) / 6, (p[1].x + 6 * p[2].x - p[3].x) / 6, (p[1].y + 6 * p[2].y - p[3].y) / 6, p[2].x, p[2].y]);\n    }\n    return d;\n  }\n\n  // export\n  Snap.path = paths;\n\n  /*\\\r\n   * Snap.path.getTotalLength\r\n   [ method ]\r\n   **\r\n   * Returns the length of the given path in pixels\r\n   **\r\n   - path (string) SVG path string\r\n   **\r\n   = (number) length\r\n  \\*/\n  Snap.path.getTotalLength = getTotalLength;\n  /*\\\r\n   * Snap.path.getPointAtLength\r\n   [ method ]\r\n   **\r\n   * Returns the coordinates of the point located at the given length along the given path\r\n   **\r\n   - path (string) SVG path string\r\n   - length (number) length, in pixels, from the start of the path, excluding non-rendering jumps\r\n   **\r\n   = (object) representation of the point:\r\n   o {\r\n   o     x: (number) x coordinate,\r\n   o     y: (number) y coordinate,\r\n   o     alpha: (number) angle of derivative\r\n   o }\r\n  \\*/\n  Snap.path.getPointAtLength = getPointAtLength;\n  /*\\\r\n   * Snap.path.getSubpath\r\n   [ method ]\r\n   **\r\n   * Returns the subpath of a given path between given start and end lengths\r\n   **\r\n   - path (string) SVG path string\r\n   - from (number) length, in pixels, from the start of the path to the start of the segment\r\n   - to (number) length, in pixels, from the start of the path to the end of the segment\r\n   **\r\n   = (string) path string definition for the segment\r\n  \\*/\n  Snap.path.getSubpath = function (path, from, to) {\n    if (this.getTotalLength(path) - to < 1e-6) {\n      return getSubpathsAtLength(path, from).end;\n    }\n    var a = getSubpathsAtLength(path, to, 1);\n    return from ? getSubpathsAtLength(a, from).end : a;\n  };\n  /*\\\r\n   * Element.getTotalLength\r\n   [ method ]\r\n   **\r\n   * Returns the length of the path in pixels (only works for `path` elements)\r\n   = (number) length\r\n  \\*/\n  elproto.getTotalLength = function () {\n    if (this.node.getTotalLength) {\n      return this.node.getTotalLength();\n    }\n  };\n  // SIERRA Element.getPointAtLength()/Element.getTotalLength(): If a <path> is broken into different segments, is the jump distance to the new coordinates set by the _M_ or _m_ commands calculated as part of the path's total length?\n  /*\\\r\n   * Element.getPointAtLength\r\n   [ method ]\r\n   **\r\n   * Returns coordinates of the point located at the given length on the given path (only works for `path` elements)\r\n   **\r\n   - length (number) length, in pixels, from the start of the path, excluding non-rendering jumps\r\n   **\r\n   = (object) representation of the point:\r\n   o {\r\n   o     x: (number) x coordinate,\r\n   o     y: (number) y coordinate,\r\n   o     alpha: (number) angle of derivative\r\n   o }\r\n  \\*/\n  elproto.getPointAtLength = function (length) {\n    return getPointAtLength(this.attr(\"d\"), length);\n  };\n  // SIERRA Element.getSubpath(): Similar to the problem for Element.getPointAtLength(). Unclear how this would work for a segmented path. Overall, the concept of _subpath_ and what I'm calling a _segment_ (series of non-_M_ or _Z_ commands) is unclear.\n  /*\\\r\n   * Element.getSubpath\r\n   [ method ]\r\n   **\r\n   * Returns subpath of a given element from given start and end lengths (only works for `path` elements)\r\n   **\r\n   - from (number) length, in pixels, from the start of the path to the start of the segment\r\n   - to (number) length, in pixels, from the start of the path to the end of the segment\r\n   **\r\n   = (string) path string definition for the segment\r\n  \\*/\n  elproto.getSubpath = function (from, to) {\n    return Snap.path.getSubpath(this.attr(\"d\"), from, to);\n  };\n  Snap._.box = box;\n  /*\\\r\n   * Snap.path.findDotsAtSegment\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Finds dot coordinates on the given cubic beziér curve at the given t\r\n   - p1x (number) x of the first point of the curve\r\n   - p1y (number) y of the first point of the curve\r\n   - c1x (number) x of the first anchor of the curve\r\n   - c1y (number) y of the first anchor of the curve\r\n   - c2x (number) x of the second anchor of the curve\r\n   - c2y (number) y of the second anchor of the curve\r\n   - p2x (number) x of the second point of the curve\r\n   - p2y (number) y of the second point of the curve\r\n   - t (number) position on the curve (0..1)\r\n   = (object) point information in format:\r\n   o {\r\n   o     x: (number) x coordinate of the point,\r\n   o     y: (number) y coordinate of the point,\r\n   o     m: {\r\n   o         x: (number) x coordinate of the left anchor,\r\n   o         y: (number) y coordinate of the left anchor\r\n   o     },\r\n   o     n: {\r\n   o         x: (number) x coordinate of the right anchor,\r\n   o         y: (number) y coordinate of the right anchor\r\n   o     },\r\n   o     start: {\r\n   o         x: (number) x coordinate of the start of the curve,\r\n   o         y: (number) y coordinate of the start of the curve\r\n   o     },\r\n   o     end: {\r\n   o         x: (number) x coordinate of the end of the curve,\r\n   o         y: (number) y coordinate of the end of the curve\r\n   o     },\r\n   o     alpha: (number) angle of the curve derivative at the point\r\n   o }\r\n  \\*/\n  Snap.path.findDotsAtSegment = findDotsAtSegment;\n  /*\\\r\n   * Snap.path.bezierBBox\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Returns the bounding box of a given cubic beziér curve\r\n   - p1x (number) x of the first point of the curve\r\n   - p1y (number) y of the first point of the curve\r\n   - c1x (number) x of the first anchor of the curve\r\n   - c1y (number) y of the first anchor of the curve\r\n   - c2x (number) x of the second anchor of the curve\r\n   - c2y (number) y of the second anchor of the curve\r\n   - p2x (number) x of the second point of the curve\r\n   - p2y (number) y of the second point of the curve\r\n   * or\r\n   - bez (array) array of six points for beziér curve\r\n   = (object) bounding box\r\n   o {\r\n   o     x: (number) x coordinate of the left top point of the box,\r\n   o     y: (number) y coordinate of the left top point of the box,\r\n   o     x2: (number) x coordinate of the right bottom point of the box,\r\n   o     y2: (number) y coordinate of the right bottom point of the box,\r\n   o     width: (number) width of the box,\r\n   o     height: (number) height of the box\r\n   o }\r\n  \\*/\n  Snap.path.bezierBBox = bezierBBox;\n  /*\\\r\n   * Snap.path.isPointInsideBBox\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Returns `true` if given point is inside bounding box\r\n   - bbox (string) bounding box\r\n   - x (string) x coordinate of the point\r\n   - y (string) y coordinate of the point\r\n   = (boolean) `true` if point is inside\r\n  \\*/\n  Snap.path.isPointInsideBBox = isPointInsideBBox;\n  Snap.closest = function (x, y, X, Y) {\n    var r = 100,\n      b = box(x - r / 2, y - r / 2, r, r),\n      inside = [],\n      getter = X[0].hasOwnProperty(\"x\") ? function (i) {\n        return {\n          x: X[i].x,\n          y: X[i].y\n        };\n      } : function (i) {\n        return {\n          x: X[i],\n          y: Y[i]\n        };\n      },\n      found = 0;\n    while (r <= 1e6 && !found) {\n      for (var i = 0, ii = X.length; i < ii; i++) {\n        var xy = getter(i);\n        if (isPointInsideBBox(b, xy.x, xy.y)) {\n          found++;\n          inside.push(xy);\n          break;\n        }\n      }\n      if (!found) {\n        r *= 2;\n        b = box(x - r / 2, y - r / 2, r, r);\n      }\n    }\n    if (r == 1e6) {\n      return;\n    }\n    var len = Infinity,\n      res;\n    for (i = 0, ii = inside.length; i < ii; i++) {\n      var l = Snap.len(x, y, inside[i].x, inside[i].y);\n      if (len > l) {\n        len = l;\n        inside[i].len = l;\n        res = inside[i];\n      }\n    }\n    return res;\n  };\n  /*\\\r\n   * Snap.path.isBBoxIntersect\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Returns `true` if two bounding boxes intersect\r\n   - bbox1 (string) first bounding box\r\n   - bbox2 (string) second bounding box\r\n   = (boolean) `true` if bounding boxes intersect\r\n  \\*/\n  Snap.path.isBBoxIntersect = isBBoxIntersect;\n  /*\\\r\n   * Snap.path.intersection\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Finds intersections of two paths\r\n   - path1 (string) path string\r\n   - path2 (string) path string\r\n   = (array) dots of intersection\r\n   o [\r\n   o     {\r\n   o         x: (number) x coordinate of the point,\r\n   o         y: (number) y coordinate of the point,\r\n   o         t1: (number) t value for segment of path1,\r\n   o         t2: (number) t value for segment of path2,\r\n   o         segment1: (number) order number for segment of path1,\r\n   o         segment2: (number) order number for segment of path2,\r\n   o         bez1: (array) eight coordinates representing beziér curve for the segment of path1,\r\n   o         bez2: (array) eight coordinates representing beziér curve for the segment of path2\r\n   o     }\r\n   o ]\r\n  \\*/\n  Snap.path.intersection = pathIntersection;\n  Snap.path.intersectionNumber = pathIntersectionNumber;\n  /*\\\r\n   * Snap.path.isPointInside\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Returns `true` if given point is inside a given closed path.\r\n   *\r\n   * Note: fill mode doesn’t affect the result of this method.\r\n   - path (string) path string\r\n   - x (number) x of the point\r\n   - y (number) y of the point\r\n   = (boolean) `true` if point is inside the path\r\n  \\*/\n  Snap.path.isPointInside = isPointInsidePath;\n  /*\\\r\n   * Snap.path.getBBox\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Returns the bounding box of a given path\r\n   - path (string) path string\r\n   = (object) bounding box\r\n   o {\r\n   o     x: (number) x coordinate of the left top point of the box,\r\n   o     y: (number) y coordinate of the left top point of the box,\r\n   o     x2: (number) x coordinate of the right bottom point of the box,\r\n   o     y2: (number) y coordinate of the right bottom point of the box,\r\n   o     width: (number) width of the box,\r\n   o     height: (number) height of the box\r\n   o }\r\n  \\*/\n  Snap.path.getBBox = pathBBox;\n  Snap.path.get = getPath;\n  /*\\\r\n   * Snap.path.toRelative\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Converts path coordinates into relative values\r\n   - path (string) path string\r\n   = (array) path string\r\n  \\*/\n  Snap.path.toRelative = pathToRelative;\n  /*\\\r\n   * Snap.path.toAbsolute\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Converts path coordinates into absolute values\r\n   - path (string) path string\r\n   = (array) path string\r\n  \\*/\n  Snap.path.toAbsolute = pathToAbsolute;\n  /*\\\r\n   * Snap.path.toCubic\r\n   [ method ]\r\n   **\r\n   * Utility method\r\n   **\r\n   * Converts path to a new path where all segments are cubic beziér curves\r\n   - pathString (string|array) path string or array of segments\r\n   = (array) array of segments\r\n  \\*/\n  Snap.path.toCubic = path2curve;\n  /*\\\r\n   * Snap.path.map\r\n   [ method ]\r\n   **\r\n   * Transform the path string with the given matrix\r\n   - path (string) path string\r\n   - matrix (object) see @Matrix\r\n   = (string) transformed path string\r\n  \\*/\n  Snap.path.map = mapPath;\n  Snap.path.toString = toString;\n  Snap.path.clone = pathClone;\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob) {\n  var mmax = Math.max,\n    mmin = Math.min;\n\n  // Set\n  var Set = function (items) {\n      this.items = [];\n      this.bindings = {};\n      this.length = 0;\n      this.type = \"set\";\n      if (items) {\n        for (var i = 0, ii = items.length; i < ii; i++) {\n          if (items[i]) {\n            this[this.items.length] = this.items[this.items.length] = items[i];\n            this.length++;\n          }\n        }\n      }\n    },\n    setproto = Set.prototype;\n  /*\\\r\n   * Set.push\r\n   [ method ]\r\n   **\r\n   * Adds each argument to the current set\r\n   = (object) original element\r\n  \\*/\n  setproto.push = function () {\n    var item, len;\n    for (var i = 0, ii = arguments.length; i < ii; i++) {\n      item = arguments[i];\n      if (item) {\n        len = this.items.length;\n        this[len] = this.items[len] = item;\n        this.length++;\n      }\n    }\n    return this;\n  };\n  /*\\\r\n   * Set.pop\r\n   [ method ]\r\n   **\r\n   * Removes last element and returns it\r\n   = (object) element\r\n  \\*/\n  setproto.pop = function () {\n    this.length && delete this[this.length--];\n    return this.items.pop();\n  };\n  /*\\\r\n   * Set.forEach\r\n   [ method ]\r\n   **\r\n   * Executes given function for each element in the set\r\n   *\r\n   * If the function returns `false`, the loop stops running.\r\n   **\r\n   - callback (function) function to run\r\n   - thisArg (object) context object for the callback\r\n   = (object) Set object\r\n  \\*/\n  setproto.forEach = function (callback, thisArg) {\n    for (var i = 0, ii = this.items.length; i < ii; i++) {\n      if (callback.call(thisArg, this.items[i], i) === false) {\n        return this;\n      }\n    }\n    return this;\n  };\n  /*\\\r\n   * Set.animate\r\n   [ method ]\r\n   **\r\n   * Animates each element in set in sync.\r\n   *\r\n   **\r\n   - attrs (object) key-value pairs of destination attributes\r\n   - duration (number) duration of the animation in milliseconds\r\n   - easing (function) #optional easing function from @mina or custom\r\n   - callback (function) #optional callback function that executes when the animation ends\r\n   * or\r\n   - animation (array) array of animation parameter for each element in set in format `[attrs, duration, easing, callback]`\r\n   > Usage\r\n   | // animate all elements in set to radius 10\r\n   | set.animate({r: 10}, 500, mina.easein);\r\n   | // or\r\n   | // animate first element to radius 10, but second to radius 20 and in different time\r\n   | set.animate([{r: 10}, 500, mina.easein], [{r: 20}, 1500, mina.easein]);\r\n   = (Element) the current element\r\n  \\*/\n  setproto.animate = function (attrs, ms, easing, callback) {\n    if (typeof easing == \"function\" && !easing.length) {\n      callback = easing;\n      easing = mina.linear;\n    }\n    if (attrs instanceof Snap._.Animation) {\n      callback = attrs.callback;\n      easing = attrs.easing;\n      ms = easing.dur;\n      attrs = attrs.attr;\n    }\n    var args = arguments;\n    if (Snap.is(attrs, \"array\") && Snap.is(args[args.length - 1], \"array\")) {\n      var each = true;\n    }\n    var begin,\n      handler = function () {\n        if (begin) {\n          this.b = begin;\n        } else {\n          begin = this.b;\n        }\n      },\n      cb = 0,\n      set = this,\n      callbacker = callback && function () {\n        if (++cb == set.length) {\n          callback.call(this);\n        }\n      };\n    return this.forEach(function (el, i) {\n      eve.once(\"snap.animcreated.\" + el.id, handler);\n      if (each) {\n        args[i] && el.animate.apply(el, args[i]);\n      } else {\n        el.animate(attrs, ms, easing, callbacker);\n      }\n    });\n  };\n  /*\\\r\n   * Set.remove\r\n   [ method ]\r\n   **\r\n   * Removes all children of the set.\r\n   *\r\n   = (object) Set object\r\n  \\*/\n  setproto.remove = function () {\n    while (this.length) {\n      this.pop().remove();\n    }\n    return this;\n  };\n  /*\\\r\n   * Set.bind\r\n   [ method ]\r\n   **\r\n   * Specifies how to handle a specific attribute when applied\r\n   * to a set.\r\n   *\r\n   **\r\n   - attr (string) attribute name\r\n   - callback (function) function to run\r\n   * or\r\n   - attr (string) attribute name\r\n   - element (Element) specific element in the set to apply the attribute to\r\n   * or\r\n   - attr (string) attribute name\r\n   - element (Element) specific element in the set to apply the attribute to\r\n   - eattr (string) attribute on the element to bind the attribute to\r\n   = (object) Set object\r\n  \\*/\n  setproto.bind = function (attr, a, b) {\n    var data = {};\n    if (typeof a == \"function\") {\n      this.bindings[attr] = a;\n    } else {\n      var aname = b || attr;\n      this.bindings[attr] = function (v) {\n        data[aname] = v;\n        a.attr(data);\n      };\n    }\n    return this;\n  };\n  /*\\\r\n   * Set.attr\r\n   [ method ]\r\n   **\r\n   * Equivalent of @Element.attr.\r\n   = (object) Set object\r\n  \\*/\n  setproto.attr = function (value) {\n    var unbound = {};\n    for (var k in value) {\n      if (this.bindings[k]) {\n        this.bindings[k](value[k]);\n      } else {\n        unbound[k] = value[k];\n      }\n    }\n    for (var i = 0, ii = this.items.length; i < ii; i++) {\n      this.items[i].attr(unbound);\n    }\n    return this;\n  };\n  /*\\\r\n   * Set.clear\r\n   [ method ]\r\n   **\r\n   * Removes all elements from the set\r\n  \\*/\n  setproto.clear = function () {\n    while (this.length) {\n      this.pop();\n    }\n  };\n  /*\\\r\n   * Set.splice\r\n   [ method ]\r\n   **\r\n   * Removes range of elements from the set\r\n   **\r\n   - index (number) position of the deletion\r\n   - count (number) number of element to remove\r\n   - insertion… (object) #optional elements to insert\r\n   = (object) set elements that were deleted\r\n  \\*/\n  setproto.splice = function (index, count, insertion) {\n    index = index < 0 ? mmax(this.length + index, 0) : index;\n    count = mmax(0, mmin(this.length - index, count));\n    var tail = [],\n      todel = [],\n      args = [],\n      i;\n    for (i = 2; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    for (i = 0; i < count; i++) {\n      todel.push(this[index + i]);\n    }\n    for (; i < this.length - index; i++) {\n      tail.push(this[index + i]);\n    }\n    var arglen = args.length;\n    for (i = 0; i < arglen + tail.length; i++) {\n      this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\n    }\n    i = this.items.length = this.length -= count - arglen;\n    while (this[i]) {\n      delete this[i++];\n    }\n    return new Set(todel);\n  };\n  /*\\\r\n   * Set.exclude\r\n   [ method ]\r\n   **\r\n   * Removes given element from the set\r\n   **\r\n   - element (object) element to remove\r\n   = (boolean) `true` if object was found and removed from the set\r\n  \\*/\n  setproto.exclude = function (el) {\n    for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {\n      this.splice(i, 1);\n      return true;\n    }\n    return false;\n  };\n  /*\\\r\n   * Set.insertAfter\r\n   [ method ]\r\n   **\r\n   * Inserts set elements after given element.\r\n   **\r\n   - element (object) set will be inserted after this element\r\n   = (object) Set object\r\n  \\*/\n  setproto.insertAfter = function (el) {\n    var i = this.items.length;\n    while (i--) {\n      this.items[i].insertAfter(el);\n    }\n    return this;\n  };\n  /*\\\r\n   * Set.getBBox\r\n   [ method ]\r\n   **\r\n   * Union of all bboxes of the set. See @Element.getBBox.\r\n   = (object) bounding box descriptor. See @Element.getBBox.\r\n  \\*/\n  setproto.getBBox = function () {\n    var x = [],\n      y = [],\n      x2 = [],\n      y2 = [];\n    for (var i = this.items.length; i--;) if (!this.items[i].removed) {\n      var box = this.items[i].getBBox();\n      x.push(box.x);\n      y.push(box.y);\n      x2.push(box.x + box.width);\n      y2.push(box.y + box.height);\n    }\n    x = mmin.apply(0, x);\n    y = mmin.apply(0, y);\n    x2 = mmax.apply(0, x2);\n    y2 = mmax.apply(0, y2);\n    return {\n      x: x,\n      y: y,\n      x2: x2,\n      y2: y2,\n      width: x2 - x,\n      height: y2 - y,\n      cx: x + (x2 - x) / 2,\n      cy: y + (y2 - y) / 2\n    };\n  };\n  /*\\\r\n   * Set.insertAfter\r\n   [ method ]\r\n   **\r\n   * Creates a clone of the set.\r\n   **\r\n   = (object) New Set object\r\n  \\*/\n  setproto.clone = function (s) {\n    s = new Set();\n    for (var i = 0, ii = this.items.length; i < ii; i++) {\n      s.push(this.items[i].clone());\n    }\n    return s;\n  };\n  setproto.toString = function () {\n    return \"Snap\\u2018s set\";\n  };\n  setproto.type = \"set\";\n  // export\n  /*\\\r\n   * Snap.Set\r\n   [ property ]\r\n   **\r\n   * Set constructor.\r\n  \\*/\n  Snap.Set = Set;\n  /*\\\r\n   * Snap.set\r\n   [ method ]\r\n   **\r\n   * Creates a set and fills it with list of arguments.\r\n   **\r\n   = (object) New Set object\r\n   | var r = paper.rect(0, 0, 10, 10),\r\n   |     s1 = Snap.set(), // empty set\r\n   |     s2 = Snap.set(r, paper.circle(100, 100, 20)); // prefilled set\r\n  \\*/\n  Snap.set = function () {\n    var set = new Set();\n    if (arguments.length) {\n      set.push.apply(set, Array.prototype.slice.call(arguments, 0));\n    }\n    return set;\n  };\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob) {\n  var names = {},\n    reUnit = /[%a-z]+$/i,\n    Str = String;\n  names.stroke = names.fill = \"colour\";\n  function getEmpty(item) {\n    var l = item[0];\n    switch (l.toLowerCase()) {\n      case \"t\":\n        return [l, 0, 0];\n      case \"m\":\n        return [l, 1, 0, 0, 1, 0, 0];\n      case \"r\":\n        if (item.length == 4) {\n          return [l, 0, item[2], item[3]];\n        } else {\n          return [l, 0];\n        }\n      case \"s\":\n        if (item.length == 5) {\n          return [l, 1, 1, item[3], item[4]];\n        } else if (item.length == 3) {\n          return [l, 1, 1];\n        } else {\n          return [l, 1];\n        }\n    }\n  }\n  function equaliseTransform(t1, t2, getBBox) {\n    t1 = t1 || new Snap.Matrix();\n    t2 = t2 || new Snap.Matrix();\n    t1 = Snap.parseTransformString(t1.toTransformString()) || [];\n    t2 = Snap.parseTransformString(t2.toTransformString()) || [];\n    var maxlength = Math.max(t1.length, t2.length),\n      from = [],\n      to = [],\n      i = 0,\n      j,\n      jj,\n      tt1,\n      tt2;\n    for (; i < maxlength; i++) {\n      tt1 = t1[i] || getEmpty(t2[i]);\n      tt2 = t2[i] || getEmpty(tt1);\n      if (tt1[0] != tt2[0] || tt1[0].toLowerCase() == \"r\" && (tt1[2] != tt2[2] || tt1[3] != tt2[3]) || tt1[0].toLowerCase() == \"s\" && (tt1[3] != tt2[3] || tt1[4] != tt2[4])) {\n        t1 = Snap._.transform2matrix(t1, getBBox());\n        t2 = Snap._.transform2matrix(t2, getBBox());\n        from = [[\"m\", t1.a, t1.b, t1.c, t1.d, t1.e, t1.f]];\n        to = [[\"m\", t2.a, t2.b, t2.c, t2.d, t2.e, t2.f]];\n        break;\n      }\n      from[i] = [];\n      to[i] = [];\n      for (j = 0, jj = Math.max(tt1.length, tt2.length); j < jj; j++) {\n        j in tt1 && (from[i][j] = tt1[j]);\n        j in tt2 && (to[i][j] = tt2[j]);\n      }\n    }\n    return {\n      from: path2array(from),\n      to: path2array(to),\n      f: getPath(from)\n    };\n  }\n  function getNumber(val) {\n    return val;\n  }\n  function getUnit(unit) {\n    return function (val) {\n      return +val.toFixed(3) + unit;\n    };\n  }\n  function getViewBox(val) {\n    return val.join(\" \");\n  }\n  function getColour(clr) {\n    return Snap.rgb(clr[0], clr[1], clr[2], clr[3]);\n  }\n  function getPath(path) {\n    var k = 0,\n      i,\n      ii,\n      j,\n      jj,\n      out,\n      a,\n      b = [];\n    for (i = 0, ii = path.length; i < ii; i++) {\n      out = \"[\";\n      a = ['\"' + path[i][0] + '\"'];\n      for (j = 1, jj = path[i].length; j < jj; j++) {\n        a[j] = \"val[\" + k++ + \"]\";\n      }\n      out += a + \"]\";\n      b[i] = out;\n    }\n    return Function(\"val\", \"return Snap.path.toString.call([\" + b + \"])\");\n  }\n  function path2array(path) {\n    var out = [];\n    for (var i = 0, ii = path.length; i < ii; i++) {\n      for (var j = 1, jj = path[i].length; j < jj; j++) {\n        out.push(path[i][j]);\n      }\n    }\n    return out;\n  }\n  function isNumeric(obj) {\n    return isFinite(obj);\n  }\n  function arrayEqual(arr1, arr2) {\n    if (!Snap.is(arr1, \"array\") || !Snap.is(arr2, \"array\")) {\n      return false;\n    }\n    return arr1.toString() == arr2.toString();\n  }\n  Element.prototype.equal = function (name, b) {\n    return eve(\"snap.util.equal\", this, name, b).firstDefined();\n  };\n  eve.on(\"snap.util.equal\", function (name, b) {\n    var A,\n      B,\n      a = Str(this.attr(name) || \"\"),\n      el = this;\n    if (names[name] == \"colour\") {\n      A = Snap.color(a);\n      B = Snap.color(b);\n      return {\n        from: [A.r, A.g, A.b, A.opacity],\n        to: [B.r, B.g, B.b, B.opacity],\n        f: getColour\n      };\n    }\n    if (name == \"viewBox\") {\n      A = this.attr(name).vb.split(\" \").map(Number);\n      B = b.split(\" \").map(Number);\n      return {\n        from: A,\n        to: B,\n        f: getViewBox\n      };\n    }\n    if (name == \"transform\" || name == \"gradientTransform\" || name == \"patternTransform\") {\n      if (typeof b == \"string\") {\n        b = Str(b).replace(/\\.{3}|\\u2026/g, a);\n      }\n      a = this.matrix;\n      if (!Snap._.rgTransform.test(b)) {\n        b = Snap._.transform2matrix(Snap._.svgTransform2string(b), this.getBBox());\n      } else {\n        b = Snap._.transform2matrix(b, this.getBBox());\n      }\n      return equaliseTransform(a, b, function () {\n        return el.getBBox(1);\n      });\n    }\n    if (name == \"d\" || name == \"path\") {\n      A = Snap.path.toCubic(a, b);\n      return {\n        from: path2array(A[0]),\n        to: path2array(A[1]),\n        f: getPath(A[0])\n      };\n    }\n    if (name == \"points\") {\n      A = Str(a).split(Snap._.separator);\n      B = Str(b).split(Snap._.separator);\n      return {\n        from: A,\n        to: B,\n        f: function (val) {\n          return val;\n        }\n      };\n    }\n    if (isNumeric(a) && isNumeric(b)) {\n      return {\n        from: parseFloat(a),\n        to: parseFloat(b),\n        f: getNumber\n      };\n    }\n    var aUnit = a.match(reUnit),\n      bUnit = Str(b).match(reUnit);\n    if (aUnit && arrayEqual(aUnit, bUnit)) {\n      return {\n        from: parseFloat(a),\n        to: parseFloat(b),\n        f: getUnit(aUnit)\n      };\n    } else {\n      return {\n        from: this.asPX(name),\n        to: this.asPX(name, b),\n        f: getNumber\n      };\n    }\n  });\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n// \n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n// \n// http://www.apache.org/licenses/LICENSE-2.0\n// \n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob) {\n  var elproto = Element.prototype,\n    has = \"hasOwnProperty\",\n    supportsTouch = (\"createTouch\" in glob.doc),\n    events = [\"click\", \"dblclick\", \"mousedown\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"touchstart\", \"touchmove\", \"touchend\", \"touchcancel\"],\n    touchMap = {\n      mousedown: \"touchstart\",\n      mousemove: \"touchmove\",\n      mouseup: \"touchend\"\n    },\n    getScroll = function (xy, el) {\n      var name = xy == \"y\" ? \"scrollTop\" : \"scrollLeft\",\n        doc = el && el.node ? el.node.ownerDocument : glob.doc;\n      return doc[name in doc.documentElement ? \"documentElement\" : \"body\"][name];\n    },\n    preventDefault = function () {\n      this.returnValue = false;\n    },\n    preventTouch = function () {\n      return this.originalEvent.preventDefault();\n    },\n    stopPropagation = function () {\n      this.cancelBubble = true;\n    },\n    stopTouch = function () {\n      return this.originalEvent.stopPropagation();\n    },\n    addEvent = function (obj, type, fn, element) {\n      var realName = supportsTouch && touchMap[type] ? touchMap[type] : type,\n        f = function (e) {\n          var scrollY = getScroll(\"y\", element),\n            scrollX = getScroll(\"x\", element);\n          if (supportsTouch && touchMap[has](type)) {\n            for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\n              if (e.targetTouches[i].target == obj || obj.contains(e.targetTouches[i].target)) {\n                var olde = e;\n                e = e.targetTouches[i];\n                e.originalEvent = olde;\n                e.preventDefault = preventTouch;\n                e.stopPropagation = stopTouch;\n                break;\n              }\n            }\n          }\n          var x = e.clientX + scrollX,\n            y = e.clientY + scrollY;\n          return fn.call(element, e, x, y);\n        };\n      if (type !== realName) {\n        obj.addEventListener(type, f, false);\n      }\n      obj.addEventListener(realName, f, false);\n      return function () {\n        if (type !== realName) {\n          obj.removeEventListener(type, f, false);\n        }\n        obj.removeEventListener(realName, f, false);\n        return true;\n      };\n    },\n    drag = [],\n    dragMove = function (e) {\n      var x = e.clientX,\n        y = e.clientY,\n        scrollY = getScroll(\"y\"),\n        scrollX = getScroll(\"x\"),\n        dragi,\n        j = drag.length;\n      while (j--) {\n        dragi = drag[j];\n        if (supportsTouch) {\n          var i = e.touches && e.touches.length,\n            touch;\n          while (i--) {\n            touch = e.touches[i];\n            if (touch.identifier == dragi.el._drag.id || dragi.el.node.contains(touch.target)) {\n              x = touch.clientX;\n              y = touch.clientY;\n              (e.originalEvent ? e.originalEvent : e).preventDefault();\n              break;\n            }\n          }\n        } else {\n          e.preventDefault();\n        }\n        var node = dragi.el.node,\n          o,\n          next = node.nextSibling,\n          parent = node.parentNode,\n          display = node.style.display;\n        // glob.win.opera && parent.removeChild(node);\n        // node.style.display = \"none\";\n        // o = dragi.el.paper.getElementByPoint(x, y);\n        // node.style.display = display;\n        // glob.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\n        // o && eve(\"snap.drag.over.\" + dragi.el.id, dragi.el, o);\n        x += scrollX;\n        y += scrollY;\n        eve(\"snap.drag.move.\" + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\n      }\n    },\n    dragUp = function (e) {\n      Snap.unmousemove(dragMove).unmouseup(dragUp);\n      var i = drag.length,\n        dragi;\n      while (i--) {\n        dragi = drag[i];\n        dragi.el._drag = {};\n        eve(\"snap.drag.end.\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n        eve.off(\"snap.drag.*.\" + dragi.el.id);\n      }\n      drag = [];\n    };\n  /*\\\r\n   * Element.click\r\n   [ method ]\r\n   **\r\n   * Adds a click event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.unclick\r\n   [ method ]\r\n   **\r\n   * Removes a click event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.dblclick\r\n   [ method ]\r\n   **\r\n   * Adds a double click event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.undblclick\r\n   [ method ]\r\n   **\r\n   * Removes a double click event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.mousedown\r\n   [ method ]\r\n   **\r\n   * Adds a mousedown event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.unmousedown\r\n   [ method ]\r\n   **\r\n   * Removes a mousedown event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.mousemove\r\n   [ method ]\r\n   **\r\n   * Adds a mousemove event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.unmousemove\r\n   [ method ]\r\n   **\r\n   * Removes a mousemove event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.mouseout\r\n   [ method ]\r\n   **\r\n   * Adds a mouseout event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.unmouseout\r\n   [ method ]\r\n   **\r\n   * Removes a mouseout event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.mouseover\r\n   [ method ]\r\n   **\r\n   * Adds a mouseover event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.unmouseover\r\n   [ method ]\r\n   **\r\n   * Removes a mouseover event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.mouseup\r\n   [ method ]\r\n   **\r\n   * Adds a mouseup event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.unmouseup\r\n   [ method ]\r\n   **\r\n   * Removes a mouseup event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.touchstart\r\n   [ method ]\r\n   **\r\n   * Adds a touchstart event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.untouchstart\r\n   [ method ]\r\n   **\r\n   * Removes a touchstart event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.touchmove\r\n   [ method ]\r\n   **\r\n   * Adds a touchmove event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.untouchmove\r\n   [ method ]\r\n   **\r\n   * Removes a touchmove event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.touchend\r\n   [ method ]\r\n   **\r\n   * Adds a touchend event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.untouchend\r\n   [ method ]\r\n   **\r\n   * Removes a touchend event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n\n  /*\\\r\n   * Element.touchcancel\r\n   [ method ]\r\n   **\r\n   * Adds a touchcancel event handler to the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  /*\\\r\n   * Element.untouchcancel\r\n   [ method ]\r\n   **\r\n   * Removes a touchcancel event handler from the element\r\n   - handler (function) handler for the event\r\n   = (object) @Element\r\n  \\*/\n  for (var i = events.length; i--;) {\n    (function (eventName) {\n      Snap[eventName] = elproto[eventName] = function (fn, scope) {\n        if (Snap.is(fn, \"function\")) {\n          this.events = this.events || [];\n          this.events.push({\n            name: eventName,\n            f: fn,\n            unbind: addEvent(this.node || document, eventName, fn, scope || this)\n          });\n        } else {\n          for (var i = 0, ii = this.events.length; i < ii; i++) if (this.events[i].name == eventName) {\n            try {\n              this.events[i].f.call(this);\n            } catch (e) {}\n          }\n        }\n        return this;\n      };\n      Snap[\"un\" + eventName] = elproto[\"un\" + eventName] = function (fn) {\n        var events = this.events || [],\n          l = events.length;\n        while (l--) if (events[l].name == eventName && (events[l].f == fn || !fn)) {\n          events[l].unbind();\n          events.splice(l, 1);\n          !events.length && delete this.events;\n          return this;\n        }\n        return this;\n      };\n    })(events[i]);\n  }\n  /*\\\r\n   * Element.hover\r\n   [ method ]\r\n   **\r\n   * Adds hover event handlers to the element\r\n   - f_in (function) handler for hover in\r\n   - f_out (function) handler for hover out\r\n   - icontext (object) #optional context for hover in handler\r\n   - ocontext (object) #optional context for hover out handler\r\n   = (object) @Element\r\n  \\*/\n  elproto.hover = function (f_in, f_out, scope_in, scope_out) {\n    return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\n  };\n  /*\\\r\n   * Element.unhover\r\n   [ method ]\r\n   **\r\n   * Removes hover event handlers from the element\r\n   - f_in (function) handler for hover in\r\n   - f_out (function) handler for hover out\r\n   = (object) @Element\r\n  \\*/\n  elproto.unhover = function (f_in, f_out) {\n    return this.unmouseover(f_in).unmouseout(f_out);\n  };\n  var draggable = [];\n  // SIERRA unclear what _context_ refers to for starting, ending, moving the drag gesture.\n  // SIERRA Element.drag(): _x position of the mouse_: Where are the x/y values offset from?\n  // SIERRA Element.drag(): much of this member's doc appears to be duplicated for some reason.\n  // SIERRA Unclear about this sentence: _Additionally following drag events will be triggered: drag.start.<id> on start, drag.end.<id> on end and drag.move.<id> on every move._ Is there a global _drag_ object to which you can assign handlers keyed by an element's ID?\n  /*\\\r\n   * Element.drag\r\n   [ method ]\r\n   **\r\n   * Adds event handlers for an element's drag gesture\r\n   **\r\n   - onmove (function) handler for moving\r\n   - onstart (function) handler for drag start\r\n   - onend (function) handler for drag end\r\n   - mcontext (object) #optional context for moving handler\r\n   - scontext (object) #optional context for drag start handler\r\n   - econtext (object) #optional context for drag end handler\r\n   * Additionaly following `drag` events are triggered: `drag.start.<id>` on start, \r\n   * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element is dragged over another element \r\n   * `drag.over.<id>` fires as well.\r\n   *\r\n   * Start event and start handler are called in specified context or in context of the element with following parameters:\r\n   o x (number) x position of the mouse\r\n   o y (number) y position of the mouse\r\n   o event (object) DOM event object\r\n   * Move event and move handler are called in specified context or in context of the element with following parameters:\r\n   o dx (number) shift by x from the start point\r\n   o dy (number) shift by y from the start point\r\n   o x (number) x position of the mouse\r\n   o y (number) y position of the mouse\r\n   o event (object) DOM event object\r\n   * End event and end handler are called in specified context or in context of the element with following parameters:\r\n   o event (object) DOM event object\r\n   = (object) @Element\r\n  \\*/\n  elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\n    var el = this;\n    if (!arguments.length) {\n      var origTransform;\n      return el.drag(function (dx, dy) {\n        this.attr({\n          transform: origTransform + (origTransform ? \"T\" : \"t\") + [dx, dy]\n        });\n      }, function () {\n        origTransform = this.transform().local;\n      });\n    }\n    function start(e, x, y) {\n      (e.originalEvent || e).preventDefault();\n      el._drag.x = x;\n      el._drag.y = y;\n      el._drag.id = e.identifier;\n      !drag.length && Snap.mousemove(dragMove).mouseup(dragUp);\n      drag.push({\n        el: el,\n        move_scope: move_scope,\n        start_scope: start_scope,\n        end_scope: end_scope\n      });\n      onstart && eve.on(\"snap.drag.start.\" + el.id, onstart);\n      onmove && eve.on(\"snap.drag.move.\" + el.id, onmove);\n      onend && eve.on(\"snap.drag.end.\" + el.id, onend);\n      eve(\"snap.drag.start.\" + el.id, start_scope || move_scope || el, x, y, e);\n    }\n    function init(e, x, y) {\n      eve(\"snap.draginit.\" + el.id, el, e, x, y);\n    }\n    eve.on(\"snap.draginit.\" + el.id, start);\n    el._drag = {};\n    draggable.push({\n      el: el,\n      start: start,\n      init: init\n    });\n    el.mousedown(init);\n    return el;\n  };\n  /*\r\n   * Element.onDragOver\r\n   [ method ]\r\n   **\r\n   * Shortcut to assign event handler for `drag.over.<id>` event, where `id` is the element's `id` (see @Element.id)\r\n   - f (function) handler for event, first argument would be the element you are dragging over\r\n  \\*/\n  // elproto.onDragOver = function (f) {\n  //     f ? eve.on(\"snap.drag.over.\" + this.id, f) : eve.unbind(\"snap.drag.over.\" + this.id);\n  // };\n  /*\\\r\n   * Element.undrag\r\n   [ method ]\r\n   **\r\n   * Removes all drag event handlers from the given element\r\n  \\*/\n  elproto.undrag = function () {\n    var i = draggable.length;\n    while (i--) if (draggable[i].el == this) {\n      this.unmousedown(draggable[i].init);\n      draggable.splice(i, 1);\n      eve.unbind(\"snap.drag.*.\" + this.id);\n      eve.unbind(\"snap.draginit.\" + this.id);\n    }\n    !draggable.length && Snap.unmousemove(dragMove).unmouseup(dragUp);\n    return this;\n  };\n});\n\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob) {\n  var elproto = Element.prototype,\n    pproto = Paper.prototype,\n    rgurl = /^\\s*url\\((.+)\\)/,\n    Str = String,\n    $ = Snap._.$;\n  Snap.filter = {};\n  /*\\\r\n   * Paper.filter\r\n   [ method ]\r\n   **\r\n   * Creates a `<filter>` element\r\n   **\r\n   - filstr (string) SVG fragment of filter provided as a string\r\n   = (object) @Element\r\n   * Note: It is recommended to use filters embedded into the page inside an empty SVG element.\r\n   > Usage\r\n   | var f = paper.filter('<feGaussianBlur stdDeviation=\"2\"/>'),\r\n   |     c = paper.circle(10, 10, 10).attr({\r\n   |         filter: f\r\n   |     });\r\n  \\*/\n  pproto.filter = function (filstr) {\n    var paper = this;\n    if (paper.type != \"svg\") {\n      paper = paper.paper;\n    }\n    var f = Snap.parse(Str(filstr)),\n      id = Snap._.id(),\n      width = paper.node.offsetWidth,\n      height = paper.node.offsetHeight,\n      filter = $(\"filter\");\n    $(filter, {\n      id: id,\n      filterUnits: \"userSpaceOnUse\"\n    });\n    filter.appendChild(f.node);\n    paper.defs.appendChild(filter);\n    return new Element(filter);\n  };\n  eve.on(\"snap.util.getattr.filter\", function () {\n    eve.stop();\n    var p = $(this.node, \"filter\");\n    if (p) {\n      var match = Str(p).match(rgurl);\n      return match && Snap.select(match[1]);\n    }\n  });\n  eve.on(\"snap.util.attr.filter\", function (value) {\n    if (value instanceof Element && value.type == \"filter\") {\n      eve.stop();\n      var id = value.node.id;\n      if (!id) {\n        $(value.node, {\n          id: value.id\n        });\n        id = value.id;\n      }\n      $(this.node, {\n        filter: Snap.url(id)\n      });\n    }\n    if (!value || value == \"none\") {\n      eve.stop();\n      this.node.removeAttribute(\"filter\");\n    }\n  });\n  /*\\\r\n   * Snap.filter.blur\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the blur filter\r\n   **\r\n   - x (number) amount of horizontal blur, in pixels\r\n   - y (number) #optional amount of vertical blur, in pixels\r\n   = (string) filter representation\r\n   > Usage\r\n   | var f = paper.filter(Snap.filter.blur(5, 10)),\r\n   |     c = paper.circle(10, 10, 10).attr({\r\n   |         filter: f\r\n   |     });\r\n  \\*/\n  Snap.filter.blur = function (x, y) {\n    if (x == null) {\n      x = 2;\n    }\n    var def = y == null ? x : [x, y];\n    return Snap.format('\\<feGaussianBlur stdDeviation=\"{def}\"/>', {\n      def: def\n    });\n  };\n  Snap.filter.blur.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.shadow\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the shadow filter\r\n   **\r\n   - dx (number) #optional horizontal shift of the shadow, in pixels\r\n   - dy (number) #optional vertical shift of the shadow, in pixels\r\n   - blur (number) #optional amount of blur\r\n   - color (string) #optional color of the shadow\r\n   - opacity (number) #optional `0..1` opacity of the shadow\r\n   * or\r\n   - dx (number) #optional horizontal shift of the shadow, in pixels\r\n   - dy (number) #optional vertical shift of the shadow, in pixels\r\n   - color (string) #optional color of the shadow\r\n   - opacity (number) #optional `0..1` opacity of the shadow\r\n   * which makes blur default to `4`. Or\r\n   - dx (number) #optional horizontal shift of the shadow, in pixels\r\n   - dy (number) #optional vertical shift of the shadow, in pixels\r\n   - opacity (number) #optional `0..1` opacity of the shadow\r\n   = (string) filter representation\r\n   > Usage\r\n   | var f = paper.filter(Snap.filter.shadow(0, 2, .3)),\r\n   |     c = paper.circle(10, 10, 10).attr({\r\n   |         filter: f\r\n   |     });\r\n  \\*/\n  Snap.filter.shadow = function (dx, dy, blur, color, opacity) {\n    if (opacity == null) {\n      if (color == null) {\n        opacity = blur;\n        blur = 4;\n        color = \"#000\";\n      } else {\n        opacity = color;\n        color = blur;\n        blur = 4;\n      }\n    }\n    if (blur == null) {\n      blur = 4;\n    }\n    if (opacity == null) {\n      opacity = 1;\n    }\n    if (dx == null) {\n      dx = 0;\n      dy = 2;\n    }\n    if (dy == null) {\n      dy = dx;\n    }\n    color = Snap.color(color);\n    return Snap.format('<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"{blur}\"/><feOffset dx=\"{dx}\" dy=\"{dy}\" result=\"offsetblur\"/><feFlood flood-color=\"{color}\"/><feComposite in2=\"offsetblur\" operator=\"in\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"{opacity}\"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge>', {\n      color: color,\n      dx: dx,\n      dy: dy,\n      blur: blur,\n      opacity: opacity\n    });\n  };\n  Snap.filter.shadow.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.grayscale\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the grayscale filter\r\n   **\r\n   - amount (number) amount of filter (`0..1`)\r\n   = (string) filter representation\r\n  \\*/\n  Snap.filter.grayscale = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return Snap.format('<feColorMatrix type=\"matrix\" values=\"{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0\"/>', {\n      a: 0.2126 + 0.7874 * (1 - amount),\n      b: 0.7152 - 0.7152 * (1 - amount),\n      c: 0.0722 - 0.0722 * (1 - amount),\n      d: 0.2126 - 0.2126 * (1 - amount),\n      e: 0.7152 + 0.2848 * (1 - amount),\n      f: 0.0722 - 0.0722 * (1 - amount),\n      g: 0.2126 - 0.2126 * (1 - amount),\n      h: 0.0722 + 0.9278 * (1 - amount)\n    });\n  };\n  Snap.filter.grayscale.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.sepia\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the sepia filter\r\n   **\r\n   - amount (number) amount of filter (`0..1`)\r\n   = (string) filter representation\r\n  \\*/\n  Snap.filter.sepia = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return Snap.format('<feColorMatrix type=\"matrix\" values=\"{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0\"/>', {\n      a: 0.393 + 0.607 * (1 - amount),\n      b: 0.769 - 0.769 * (1 - amount),\n      c: 0.189 - 0.189 * (1 - amount),\n      d: 0.349 - 0.349 * (1 - amount),\n      e: 0.686 + 0.314 * (1 - amount),\n      f: 0.168 - 0.168 * (1 - amount),\n      g: 0.272 - 0.272 * (1 - amount),\n      h: 0.534 - 0.534 * (1 - amount),\n      i: 0.131 + 0.869 * (1 - amount)\n    });\n  };\n  Snap.filter.sepia.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.saturate\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the saturate filter\r\n   **\r\n   - amount (number) amount of filter (`0..1`)\r\n   = (string) filter representation\r\n  \\*/\n  Snap.filter.saturate = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return Snap.format('<feColorMatrix type=\"saturate\" values=\"{amount}\"/>', {\n      amount: 1 - amount\n    });\n  };\n  Snap.filter.saturate.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.hueRotate\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the hue-rotate filter\r\n   **\r\n   - angle (number) angle of rotation\r\n   = (string) filter representation\r\n  \\*/\n  Snap.filter.hueRotate = function (angle) {\n    angle = angle || 0;\n    return Snap.format('<feColorMatrix type=\"hueRotate\" values=\"{angle}\"/>', {\n      angle: angle\n    });\n  };\n  Snap.filter.hueRotate.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.invert\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the invert filter\r\n   **\r\n   - amount (number) amount of filter (`0..1`)\r\n   = (string) filter representation\r\n  \\*/\n  Snap.filter.invert = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    //        <feColorMatrix type=\"matrix\" values=\"-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0\" color-interpolation-filters=\"sRGB\"/>\n    return Snap.format('<feComponentTransfer><feFuncR type=\"table\" tableValues=\"{amount} {amount2}\"/><feFuncG type=\"table\" tableValues=\"{amount} {amount2}\"/><feFuncB type=\"table\" tableValues=\"{amount} {amount2}\"/></feComponentTransfer>', {\n      amount: amount,\n      amount2: 1 - amount\n    });\n  };\n  Snap.filter.invert.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.brightness\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the brightness filter\r\n   **\r\n   - amount (number) amount of filter (`0..1`)\r\n   = (string) filter representation\r\n  \\*/\n  Snap.filter.brightness = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return Snap.format('<feComponentTransfer><feFuncR type=\"linear\" slope=\"{amount}\"/><feFuncG type=\"linear\" slope=\"{amount}\"/><feFuncB type=\"linear\" slope=\"{amount}\"/></feComponentTransfer>', {\n      amount: amount\n    });\n  };\n  Snap.filter.brightness.toString = function () {\n    return this();\n  };\n  /*\\\r\n   * Snap.filter.contrast\r\n   [ method ]\r\n   **\r\n   * Returns an SVG markup string for the contrast filter\r\n   **\r\n   - amount (number) amount of filter (`0..1`)\r\n   = (string) filter representation\r\n  \\*/\n  Snap.filter.contrast = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return Snap.format('<feComponentTransfer><feFuncR type=\"linear\" slope=\"{amount}\" intercept=\"{amount2}\"/><feFuncG type=\"linear\" slope=\"{amount}\" intercept=\"{amount2}\"/><feFuncB type=\"linear\" slope=\"{amount}\" intercept=\"{amount2}\"/></feComponentTransfer>', {\n      amount: amount,\n      amount2: .5 - amount / 2\n    });\n  };\n  Snap.filter.contrast.toString = function () {\n    return this();\n  };\n});\n\n// Copyright (c) 2014 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var box = Snap._.box,\n    is = Snap.is,\n    firstLetter = /^[^a-z]*([tbmlrc])/i,\n    toString = function () {\n      return \"T\" + this.dx + \",\" + this.dy;\n    };\n  /*\\\r\n   * Element.getAlign\r\n   [ method ]\r\n   **\r\n   * Returns shift needed to align the element relatively to given element.\r\n   * If no elements specified, parent `<svg>` container will be used.\r\n   - el (object) @optional alignment element\r\n   - way (string) one of six values: `\"top\"`, `\"middle\"`, `\"bottom\"`, `\"left\"`, `\"center\"`, `\"right\"`\r\n   = (object|string) Object in format `{dx: , dy: }` also has a string representation as a transformation string\r\n   > Usage\r\n   | el.transform(el.getAlign(el2, \"top\"));\r\n   * or\r\n   | var dy = el.getAlign(el2, \"top\").dy;\r\n  \\*/\n  Element.prototype.getAlign = function (el, way) {\n    if (way == null && is(el, \"string\")) {\n      way = el;\n      el = null;\n    }\n    el = el || this.paper;\n    var bx = el.getBBox ? el.getBBox() : box(el),\n      bb = this.getBBox(),\n      out = {};\n    way = way && way.match(firstLetter);\n    way = way ? way[1].toLowerCase() : \"c\";\n    switch (way) {\n      case \"t\":\n        out.dx = 0;\n        out.dy = bx.y - bb.y;\n        break;\n      case \"b\":\n        out.dx = 0;\n        out.dy = bx.y2 - bb.y2;\n        break;\n      case \"m\":\n        out.dx = 0;\n        out.dy = bx.cy - bb.cy;\n        break;\n      case \"l\":\n        out.dx = bx.x - bb.x;\n        out.dy = 0;\n        break;\n      case \"r\":\n        out.dx = bx.x2 - bb.x2;\n        out.dy = 0;\n        break;\n      default:\n        out.dx = bx.cx - bb.cx;\n        out.dy = 0;\n        break;\n    }\n    out.toString = toString;\n    return out;\n  };\n  /*\\\r\n   * Element.align\r\n   [ method ]\r\n   **\r\n   * Aligns the element relatively to given one via transformation.\r\n   * If no elements specified, parent `<svg>` container will be used.\r\n   - el (object) @optional alignment element\r\n   - way (string) one of six values: `\"top\"`, `\"middle\"`, `\"bottom\"`, `\"left\"`, `\"center\"`, `\"right\"`\r\n   = (object) this element\r\n   > Usage\r\n   | el.align(el2, \"top\");\r\n   * or\r\n   | el.align(\"middle\");\r\n  \\*/\n  Element.prototype.align = function (el, way) {\n    return this.transform(\"...\" + this.getAlign(el, way));\n  };\n});\n\n// Copyright (c) 2016 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\n  var elproto = Element.prototype,\n    is = Snap.is,\n    Str = String,\n    has = \"hasOwnProperty\";\n  function slice(from, to, f) {\n    return function (arr) {\n      var res = arr.slice(from, to);\n      if (res.length == 1) {\n        res = res[0];\n      }\n      return f ? f(res) : res;\n    };\n  }\n  var Animation = function (attr, ms, easing, callback) {\n    if (typeof easing == \"function\" && !easing.length) {\n      callback = easing;\n      easing = mina.linear;\n    }\n    this.attr = attr;\n    this.dur = ms;\n    easing && (this.easing = easing);\n    callback && (this.callback = callback);\n  };\n  Snap._.Animation = Animation;\n  /*\\\r\n   * Snap.animation\r\n   [ method ]\r\n   **\r\n   * Creates an animation object\r\n   **\r\n   - attr (object) attributes of final destination\r\n   - duration (number) duration of the animation, in milliseconds\r\n   - easing (function) #optional one of easing functions of @mina or custom one\r\n   - callback (function) #optional callback function that fires when animation ends\r\n   = (object) animation object\r\n  \\*/\n  Snap.animation = function (attr, ms, easing, callback) {\n    return new Animation(attr, ms, easing, callback);\n  };\n  /*\\\r\n   * Element.inAnim\r\n   [ method ]\r\n   **\r\n   * Returns a set of animations that may be able to manipulate the current element\r\n   **\r\n   = (object) in format:\r\n   o {\r\n   o     anim (object) animation object,\r\n   o     mina (object) @mina object,\r\n   o     curStatus (number) 0..1 — status of the animation: 0 — just started, 1 — just finished,\r\n   o     status (function) gets or sets the status of the animation,\r\n   o     stop (function) stops the animation\r\n   o }\r\n  \\*/\n  elproto.inAnim = function () {\n    var el = this,\n      res = [];\n    for (var id in el.anims) if (el.anims[has](id)) {\n      (function (a) {\n        res.push({\n          anim: new Animation(a._attrs, a.dur, a.easing, a._callback),\n          mina: a,\n          curStatus: a.status(),\n          status: function (val) {\n            return a.status(val);\n          },\n          stop: function () {\n            a.stop();\n          }\n        });\n      })(el.anims[id]);\n    }\n    return res;\n  };\n  /*\\\r\n   * Snap.animate\r\n   [ method ]\r\n   **\r\n   * Runs generic animation of one number into another with a caring function\r\n   **\r\n   - from (number|array) number or array of numbers\r\n   - to (number|array) number or array of numbers\r\n   - setter (function) caring function that accepts one number argument\r\n   - duration (number) duration, in milliseconds\r\n   - easing (function) #optional easing function from @mina or custom\r\n   - callback (function) #optional callback function to execute when animation ends\r\n   = (object) animation object in @mina format\r\n   o {\r\n   o     id (string) animation id, consider it read-only,\r\n   o     duration (function) gets or sets the duration of the animation,\r\n   o     easing (function) easing,\r\n   o     speed (function) gets or sets the speed of the animation,\r\n   o     status (function) gets or sets the status of the animation,\r\n   o     stop (function) stops the animation\r\n   o }\r\n   | var rect = Snap().rect(0, 0, 10, 10);\r\n   | Snap.animate(0, 10, function (val) {\r\n   |     rect.attr({\r\n   |         x: val\r\n   |     });\r\n   | }, 1000);\r\n   | // in given context is equivalent to\r\n   | rect.animate({x: 10}, 1000);\r\n  \\*/\n  Snap.animate = function (from, to, setter, ms, easing, callback) {\n    if (typeof easing == \"function\" && !easing.length) {\n      callback = easing;\n      easing = mina.linear;\n    }\n    var now = mina.time(),\n      anim = mina(from, to, now, now + ms, mina.time, setter, easing);\n    callback && eve.once(\"mina.finish.\" + anim.id, callback);\n    return anim;\n  };\n  /*\\\r\n   * Element.stop\r\n   [ method ]\r\n   **\r\n   * Stops all the animations for the current element\r\n   **\r\n   = (Element) the current element\r\n  \\*/\n  elproto.stop = function () {\n    var anims = this.inAnim();\n    for (var i = 0, ii = anims.length; i < ii; i++) {\n      anims[i].stop();\n    }\n    return this;\n  };\n  /*\\\r\n   * Element.animate\r\n   [ method ]\r\n   **\r\n   * Animates the given attributes of the element\r\n   **\r\n   - attrs (object) key-value pairs of destination attributes\r\n   - duration (number) duration of the animation in milliseconds\r\n   - easing (function) #optional easing function from @mina or custom\r\n   - callback (function) #optional callback function that executes when the animation ends\r\n   = (Element) the current element\r\n  \\*/\n  elproto.animate = function (attrs, ms, easing, callback) {\n    if (typeof easing == \"function\" && !easing.length) {\n      callback = easing;\n      easing = mina.linear;\n    }\n    if (attrs instanceof Animation) {\n      callback = attrs.callback;\n      easing = attrs.easing;\n      ms = attrs.dur;\n      attrs = attrs.attr;\n    }\n    var fkeys = [],\n      tkeys = [],\n      keys = {},\n      from,\n      to,\n      f,\n      eq,\n      el = this;\n    for (var key in attrs) if (attrs[has](key)) {\n      if (el.equal) {\n        eq = el.equal(key, Str(attrs[key]));\n        from = eq.from;\n        to = eq.to;\n        f = eq.f;\n      } else {\n        from = +el.attr(key);\n        to = +attrs[key];\n      }\n      var len = is(from, \"array\") ? from.length : 1;\n      keys[key] = slice(fkeys.length, fkeys.length + len, f);\n      fkeys = fkeys.concat(from);\n      tkeys = tkeys.concat(to);\n    }\n    var now = mina.time(),\n      anim = mina(fkeys, tkeys, now, now + ms, mina.time, function (val) {\n        var attr = {};\n        for (var key in keys) if (keys[has](key)) {\n          attr[key] = keys[key](val);\n        }\n        el.attr(attr);\n      }, easing);\n    el.anims[anim.id] = anim;\n    anim._attrs = attrs;\n    anim._callback = callback;\n    eve(\"snap.animcreated.\" + el.id, anim);\n    eve.once(\"mina.finish.\" + anim.id, function () {\n      eve.off(\"mina.*.\" + anim.id);\n      delete el.anims[anim.id];\n      callback && callback.call(el);\n    });\n    eve.once(\"mina.stop.\" + anim.id, function () {\n      eve.off(\"mina.*.\" + anim.id);\n      delete el.anims[anim.id];\n    });\n    return el;\n  };\n});\n\n// Copyright (c) 2017 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nSnap.plugin(function (Snap, Element, Paper, glob) {\n  // Colours are from https://www.materialui.co\n  var red = \"#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000\",\n    pink = \"#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162\",\n    purple = \"#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF\",\n    deeppurple = \"#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA\",\n    indigo = \"#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE\",\n    blue = \"#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF\",\n    lightblue = \"#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA\",\n    cyan = \"#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4\",\n    teal = \"#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5\",\n    green = \"#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853\",\n    lightgreen = \"#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17\",\n    lime = \"#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00\",\n    yellow = \"#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600\",\n    amber = \"#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00\",\n    orange = \"#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00\",\n    deeporange = \"#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00\",\n    brown = \"#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723\",\n    grey = \"#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121\",\n    bluegrey = \"#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238\";\n  /*\\\r\n   * Snap.mui\r\n   [ property ]\r\n   **\r\n   * Contain Material UI colours.\r\n   | Snap().rect(0, 0, 10, 10).attr({fill: Snap.mui.deeppurple, stroke: Snap.mui.amber[600]});\r\n   # For colour reference: <a href=\"https://www.materialui.co\">https://www.materialui.co</a>.\r\n  \\*/\n  Snap.mui = {};\n  /*\\\r\n   * Snap.flat\r\n   [ property ]\r\n   **\r\n   * Contain Flat UI colours.\r\n   | Snap().rect(0, 0, 10, 10).attr({fill: Snap.flat.carrot, stroke: Snap.flat.wetasphalt});\r\n   # For colour reference: <a href=\"https://www.materialui.co\">https://www.materialui.co</a>.\r\n  \\*/\n  Snap.flat = {};\n  function saveColor(colors) {\n    colors = colors.split(/(?=#)/);\n    var color = new String(colors[5]);\n    color[50] = colors[0];\n    color[100] = colors[1];\n    color[200] = colors[2];\n    color[300] = colors[3];\n    color[400] = colors[4];\n    color[500] = colors[5];\n    color[600] = colors[6];\n    color[700] = colors[7];\n    color[800] = colors[8];\n    color[900] = colors[9];\n    if (colors[10]) {\n      color.A100 = colors[10];\n      color.A200 = colors[11];\n      color.A400 = colors[12];\n      color.A700 = colors[13];\n    }\n    return color;\n  }\n  Snap.mui.red = saveColor(red);\n  Snap.mui.pink = saveColor(pink);\n  Snap.mui.purple = saveColor(purple);\n  Snap.mui.deeppurple = saveColor(deeppurple);\n  Snap.mui.indigo = saveColor(indigo);\n  Snap.mui.blue = saveColor(blue);\n  Snap.mui.lightblue = saveColor(lightblue);\n  Snap.mui.cyan = saveColor(cyan);\n  Snap.mui.teal = saveColor(teal);\n  Snap.mui.green = saveColor(green);\n  Snap.mui.lightgreen = saveColor(lightgreen);\n  Snap.mui.lime = saveColor(lime);\n  Snap.mui.yellow = saveColor(yellow);\n  Snap.mui.amber = saveColor(amber);\n  Snap.mui.orange = saveColor(orange);\n  Snap.mui.deeporange = saveColor(deeporange);\n  Snap.mui.brown = saveColor(brown);\n  Snap.mui.grey = saveColor(grey);\n  Snap.mui.bluegrey = saveColor(bluegrey);\n  Snap.flat.turquoise = \"#1abc9c\";\n  Snap.flat.greensea = \"#16a085\";\n  Snap.flat.sunflower = \"#f1c40f\";\n  Snap.flat.orange = \"#f39c12\";\n  Snap.flat.emerland = \"#2ecc71\";\n  Snap.flat.nephritis = \"#27ae60\";\n  Snap.flat.carrot = \"#e67e22\";\n  Snap.flat.pumpkin = \"#d35400\";\n  Snap.flat.peterriver = \"#3498db\";\n  Snap.flat.belizehole = \"#2980b9\";\n  Snap.flat.alizarin = \"#e74c3c\";\n  Snap.flat.pomegranate = \"#c0392b\";\n  Snap.flat.amethyst = \"#9b59b6\";\n  Snap.flat.wisteria = \"#8e44ad\";\n  Snap.flat.clouds = \"#ecf0f1\";\n  Snap.flat.silver = \"#bdc3c7\";\n  Snap.flat.wetasphalt = \"#34495e\";\n  Snap.flat.midnightblue = \"#2c3e50\";\n  Snap.flat.concrete = \"#95a5a6\";\n  Snap.flat.asbestos = \"#7f8c8d\";\n  /*\\\r\n   * Snap.importMUIColors\r\n   [ method ]\r\n   **\r\n   * Imports Material UI colours into global object.\r\n   | Snap.importMUIColors();\r\n   | Snap().rect(0, 0, 10, 10).attr({fill: deeppurple, stroke: amber[600]});\r\n   # For colour reference: <a href=\"https://www.materialui.co\">https://www.materialui.co</a>.\r\n  \\*/\n  Snap.importMUIColors = function () {\n    for (var color in Snap.mui) {\n      if (Snap.mui.hasOwnProperty(color)) {\n        window[color] = Snap.mui[color];\n      }\n    }\n  };\n});\nmodule.exports = Snap;","map":{"version":3,"names":["window","eve","require","mina","animations","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","Date","getTime","requestID","isArray","Array","a","Object","prototype","toString","call","idgen","idprefix","ID","diff","b","A","B","res","i","ii","length","dif","bb","timer","now","sta","val","s","ds","dur","speed","spd","duration","stopit","id","update","pause","pdif","get","resume","frame","start","j","jj","end","easing","set","timeStamp","len","hasOwnProperty","anim","linear","status","stop","time","getById","n","easeout","Math","pow","easein","easeinout","q","Q","sqrt","x","X","abs","y","Y","t","backin","backout","elastic","sin","PI","bounce","p","l","Snap","root","version","w","h","nodeType","wrap","is","apply","Element","glob","doc","querySelector","String","e","Paper","_","win","document","has","Str","toFloat","parseFloat","toInt","parseInt","math","mmax","max","mmin","min","round","E","S","objectToString","ISURL","colourRegExp","bezierrg","separator","whitespace","commaSpaces","hsrg","hs","rg","pathCommand","tCommand","pathValues","el","type","xlink","xmlns","hub","URL","url","$","attr","createTextNode","text","createComment","substring","getAttributeNS","getAttribute","nodeValue","key","setAttributeNS","setAttribute","removeAttribute","createElementNS","getAttrs","attrs","attributes","name","out","namespaceURI","textContent","o","toLowerCase","isFinite","slice","format","tokenRegex","objNotationRegex","replacer","all","obj","replace","quote","quotedName","isFunc","str","clone","constructor","repush","array","item","push","splice","cacher","f","scope","postprocessor","newf","arg","arguments","args","join","cache","count","shift","angle","x1","y1","x2","y2","x3","y3","atan2","rad","deg","x_y","x_y_w_h","width","height","tan","cos","asin","num","acos","atan","len2","closestPoint","path","distance2","dx","dy","pathNode","node","pathLength","getTotalLength","precision","pathSegList","numberOfItems","best","bestLength","bestDistance","Infinity","scan","scanLength","scanDistance","getPointAtLength","before","after","beforeLength","afterLength","beforeDistance","afterDistance","distance","snapTo","values","value","tolerance","rem","getRGB","colour","indexOf","r","g","hex","error","rgbtoString","charAt","toHex","red","green","blue","opacity","rgb","match","split","hsb2rgb","hsl2rgb","hsb","hsl","toFixed","color","getElementsByTagName","style","defaultView","getComputedStyle","getPropertyValue","hsbtoString","hsltoString","prepareRGB","string","clr","packageRGB","rgb2hsl","rgb2hsb","v","R","G","C","H","V","L","M","m","parsePathString","pathString","pth","arr","paramCounts","c","u","z","data","params","concat","parseTransformString","TString","svgTransform2string","tstr","rgTransform","transform2matrix","bbox","tdata","Matrix","tlen","command","absolute","inver","invert","translate","rotate","scale","add","_unit2px","unit2px","contains","compareDocumentPosition","adown","documentElement","bup","parentNode","getSomeDefs","ownerSVGElement","select","pdefs","defs","make","getSomeSVG","svg","mgr","fill","appendChild","getW","getBBox","getH","nam","removeChild","query","selectAll","nodelist","querySelectorAll","add2group","list","forEach","children","childNodes","setInterval","snap","paper","tagName","nodeName","anims","transform","mask","pattern","symbol","method","json","firstDefined","att","parse","createDocumentFragment","full","div","createElement","innerHTML","firstChild","Fragment","frag","fragment","parent","desc","proto","ownerDocument","body","dom","contentDocument","ch","jsonFiller","toJSON","on","nt","lastIndexOf","css","letter","cssAttr","toUpperCase","ajax","postData","req","XMLHttpRequest","pd","encodeURIComponent","open","setRequestHeader","once","onreadystatechange","readyState","send","load","responseText","getOffset","elem","box","getBoundingClientRect","docElem","clientTop","clientLeft","top","pageYOffset","scrollTop","left","pageXOffset","scrollLeft","getElementByPoint","canvas","target","elementFromPoint","opera","so","sr","createSVGRect","hits","getIntersectionList","plugin","elproto","isWithoutTransform","getClientRects","removed","localMatrix","original","href","getElementById","pathfinder","deflt","bboxwt","realPath","matrix","map","propString","extractTransform","doReturn","test","papa","global","getCTM","local","ms","localString","toTransformString","globalMatrix","totalMatrix","diffMatrix","total","gradientTransform","patternTransform","append","it","appendTo","prepend","first","insertBefore","prependTo","nextSibling","insertAfter","remove","asPX","use","fixids","els","ids","uses","urltest","linktest","oldid","old","fs","cloneNode","toDefs","toPattern","patternUnits","viewBox","marker","refX","refY","cx","cy","markerWidth","markerHeight","orient","eldata","removeData","outerSVG","innerSVG","chld","toDataURL","btoa","contents","unescape","d","matrixproto","aNew","bNew","multLeft","cNew","eNew","me","skewX","skew","skewY","fromCharCode","offset","norm","normalize","mag","determinant","row","scalex","shear","scaley","isSimple","isSuperSimple","noRotation","shorter","reURLValue","deurl","clipIt","clip","undefined","fillStroke","grad","gradient","gradrg","parseGrad","tokens","stops","seed","step","k","toAbsolute","txt","className","baseVal","vb","rx","ry","tp","textPath","tuner","chunk","tuned","setFontSize","fontSize","getter","setter","textExtract","chi","internal","getFontSize","rgNotSpace","rgBadSpace","rgTrim","addClass","classes","curClasses","pos","clazz","finalValue","removeClass","hasClass","toggleClass","flag","operators","+","-","/","*","reUnit","reAddon","getNumber","getUnit","unit","plus","evnt","atr","aUnit","op","isNaN","bplus","from","to","rect","circle","preload","onerror","src","img","cssText","onload","image","preserveAspectRatio","offsetWidth","offsetHeight","ellipse","group","vbx","vby","vbw","vbh","ptrn","vx","vy","vw","vh","line","polyline","points","polygon","Gstops","GaddStop","inserted","stopOffset","GgetBBox","GsetStops","addStop","unshift","gradientLinear","gradientRadial","gradientUnits","setStops","fx","fy","clear","next","p2s","paths","ps","sleep","r1","r2","r0","rectPath","pathClone","pathArray","getPointAtSegmentLength","p1x","p1y","c1x","c1y","c2x","c2y","p2x","p2y","bezlen","findDotsAtSegment","getTotLen","getLengthFactory","istotal","subpath","O","onlystart","path2curve","sp","subpaths","point","getSubpathsAtLength","t1","t13","t12","t2","t3","mx","my","nx","ny","ax","ay","alpha","bezierBBox","curveDim","isPointInsideBBox","isBBoxIntersect","bbox1","bbox2","base3","p1","p2","p3","p4","x4","y4","z2","Tvalues","Cvalues","sum","ct","xbase","ybase","comb","ll","intersect","denominator","px","py","px2","py2","inter","bez1","bez2","interHelper","interCount","justCount","l1","l2","n1","n2","dots1","dots2","xy","di","di1","dj","dj1","ci","cj","pathIntersection","path1","path2","interPathHelper","pathIntersectionNumber","x1m","y1m","x2m","y2m","pi","pj","intr","kk","segment1","segment2","isPointInsidePath","pathBBox","dim","xmin","ymin","xmax","ymax","ellipsePath","getPath","pathToRelative","lowerCase","rel","pa","pathToAbsolute","pa0","crz","dots","pop","catmullRom2bezier","l2c","q2c","_13","_23","a2c","large_arc_flag","sweep_flag","recursive","_120","rx2","ry2","f1","f2","df","f2old","x2old","y2old","c1","s1","c2","s2","hx","hy","m1","m2","m3","m4","newres","findDotAtSegment","x0","y0","tvalues","bounds","b2ac","sqrtb2ac","jlen","mt","curve","bx","by","qx","qy","attrs2","processPath","pcom","T","fixArc","pp","pcoms1","pcoms2","fixM","a1","a2","pfirst","seg","seg2","seglen","seg2len","mapPath","pathi","crp","iLen","getSubpath","closest","inside","found","intersection","intersectionNumber","isPointInside","toRelative","toCubic","Set","items","bindings","setproto","thisArg","animate","Animation","each","begin","handler","cb","callbacker","bind","aname","unbound","index","insertion","tail","todel","arglen","exclude","names","stroke","getEmpty","equaliseTransform","maxlength","tt1","tt2","path2array","getViewBox","getColour","Function","isNumeric","arrayEqual","arr1","arr2","equal","Number","bUnit","supportsTouch","events","touchMap","mousedown","mousemove","mouseup","getScroll","preventDefault","returnValue","preventTouch","originalEvent","stopPropagation","cancelBubble","stopTouch","addEvent","fn","element","realName","scrollY","scrollX","targetTouches","olde","clientX","clientY","addEventListener","removeEventListener","drag","dragMove","dragi","touches","touch","identifier","_drag","display","move_scope","dragUp","unmousemove","unmouseup","end_scope","start_scope","off","eventName","unbind","hover","f_in","f_out","scope_in","scope_out","mouseover","mouseout","unhover","unmouseover","unmouseout","draggable","onmove","onstart","onend","origTransform","init","undrag","unmousedown","pproto","rgurl","filter","filstr","filterUnits","blur","def","shadow","grayscale","amount","sepia","saturate","hueRotate","amount2","brightness","contrast","firstLetter","getAlign","way","align","animation","inAnim","_attrs","_callback","curStatus","fkeys","tkeys","keys","eq","pink","purple","deeppurple","indigo","lightblue","cyan","teal","lightgreen","lime","yellow","amber","orange","deeporange","brown","grey","bluegrey","mui","flat","saveColor","colors","A100","A200","A400","A700","turquoise","greensea","sunflower","emerland","nephritis","carrot","pumpkin","peterriver","belizehole","alizarin","pomegranate","amethyst","wisteria","clouds","silver","wetasphalt","midnightblue","concrete","asbestos","importMUIColors","module","exports"],"sources":["C:/Projetos/pw_proj/TechFlow/projeto/node_modules/snapsvg-cjs/dist/snap.svg-cjs.js"],"sourcesContent":["window.eve = require('eve')\r\n\r\n// Copyright (c) 2017 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nvar mina = (function (eve) {\r\n    var animations = {},\r\n    requestAnimFrame = window.requestAnimationFrame       ||\r\n                       window.webkitRequestAnimationFrame ||\r\n                       window.mozRequestAnimationFrame    ||\r\n                       window.oRequestAnimationFrame      ||\r\n                       window.msRequestAnimationFrame     ||\r\n                       function (callback) {\r\n                           setTimeout(callback, 16, new Date().getTime());\r\n                           return true;\r\n                       },\r\n    requestID,\r\n    isArray = Array.isArray || function (a) {\r\n        return a instanceof Array ||\r\n            Object.prototype.toString.call(a) == \"[object Array]\";\r\n    },\r\n    idgen = 0,\r\n    idprefix = \"M\" + (+new Date).toString(36),\r\n    ID = function () {\r\n        return idprefix + (idgen++).toString(36);\r\n    },\r\n    diff = function (a, b, A, B) {\r\n        if (isArray(a)) {\r\n            res = [];\r\n            for (var i = 0, ii = a.length; i < ii; i++) {\r\n                res[i] = diff(a[i], b, A[i], B);\r\n            }\r\n            return res;\r\n        }\r\n        var dif = (A - a) / (B - b);\r\n        return function (bb) {\r\n            return a + dif * (bb - b);\r\n        };\r\n    },\r\n    timer = Date.now || function () {\r\n        return +new Date;\r\n    },\r\n    sta = function (val) {\r\n        var a = this;\r\n        if (val == null) {\r\n            return a.s;\r\n        }\r\n        var ds = a.s - val;\r\n        a.b += a.dur * ds;\r\n        a.B += a.dur * ds;\r\n        a.s = val;\r\n    },\r\n    speed = function (val) {\r\n        var a = this;\r\n        if (val == null) {\r\n            return a.spd;\r\n        }\r\n        a.spd = val;\r\n    },\r\n    duration = function (val) {\r\n        var a = this;\r\n        if (val == null) {\r\n            return a.dur;\r\n        }\r\n        a.s = a.s * val / a.dur;\r\n        a.dur = val;\r\n    },\r\n    stopit = function () {\r\n        var a = this;\r\n        delete animations[a.id];\r\n        a.update();\r\n        eve(\"mina.stop.\" + a.id, a);\r\n    },\r\n    pause = function () {\r\n        var a = this;\r\n        if (a.pdif) {\r\n            return;\r\n        }\r\n        delete animations[a.id];\r\n        a.update();\r\n        a.pdif = a.get() - a.b;\r\n    },\r\n    resume = function () {\r\n        var a = this;\r\n        if (!a.pdif) {\r\n            return;\r\n        }\r\n        a.b = a.get() - a.pdif;\r\n        delete a.pdif;\r\n        animations[a.id] = a;\r\n        frame();\r\n    },\r\n    update = function () {\r\n        var a = this,\r\n            res;\r\n        if (isArray(a.start)) {\r\n            res = [];\r\n            for (var j = 0, jj = a.start.length; j < jj; j++) {\r\n                res[j] = +a.start[j] +\r\n                    (a.end[j] - a.start[j]) * a.easing(a.s);\r\n            }\r\n        } else {\r\n            res = +a.start + (a.end - a.start) * a.easing(a.s);\r\n        }\r\n        a.set(res);\r\n    },\r\n    frame = function (timeStamp) {\r\n        // Manual invokation?\r\n        if (!timeStamp) {\r\n            // Frame loop stopped?\r\n            if (!requestID) {\r\n                // Start frame loop...\r\n                requestID = requestAnimFrame(frame);\r\n            }\r\n            return;\r\n        }\r\n        var len = 0;\r\n        for (var i in animations) if (animations.hasOwnProperty(i)) {\r\n            var a = animations[i],\r\n                b = a.get(),\r\n                res;\r\n            len++;\r\n            a.s = (b - a.b) / (a.dur / a.spd);\r\n            if (a.s >= 1) {\r\n                delete animations[i];\r\n                a.s = 1;\r\n                len--;\r\n                (function (a) {\r\n                    setTimeout(function () {\r\n                        eve(\"mina.finish.\" + a.id, a);\r\n                    });\r\n                }(a));\r\n            }\r\n            a.update();\r\n        }\r\n        requestID = len ? requestAnimFrame(frame) : false;\r\n    },\r\n    /*\\\r\n     * mina\r\n     [ method ]\r\n     **\r\n     * Generic animation of numbers\r\n     **\r\n     - a (number) start _slave_ number\r\n     - A (number) end _slave_ number\r\n     - b (number) start _master_ number (start time in general case)\r\n     - B (number) end _master_ number (end time in general case)\r\n     - get (function) getter of _master_ number (see @mina.time)\r\n     - set (function) setter of _slave_ number\r\n     - easing (function) #optional easing function, default is @mina.linear\r\n     = (object) animation descriptor\r\n     o {\r\n     o         id (string) animation id,\r\n     o         start (number) start _slave_ number,\r\n     o         end (number) end _slave_ number,\r\n     o         b (number) start _master_ number,\r\n     o         s (number) animation status (0..1),\r\n     o         dur (number) animation duration,\r\n     o         spd (number) animation speed,\r\n     o         get (function) getter of _master_ number (see @mina.time),\r\n     o         set (function) setter of _slave_ number,\r\n     o         easing (function) easing function, default is @mina.linear,\r\n     o         status (function) status getter/setter,\r\n     o         speed (function) speed getter/setter,\r\n     o         duration (function) duration getter/setter,\r\n     o         stop (function) animation stopper\r\n     o         pause (function) pauses the animation\r\n     o         resume (function) resumes the animation\r\n     o         update (function) calles setter with the right value of the animation\r\n     o }\r\n    \\*/\r\n    mina = function (a, A, b, B, get, set, easing) {\r\n        var anim = {\r\n            id: ID(),\r\n            start: a,\r\n            end: A,\r\n            b: b,\r\n            s: 0,\r\n            dur: B - b,\r\n            spd: 1,\r\n            get: get,\r\n            set: set,\r\n            easing: easing || mina.linear,\r\n            status: sta,\r\n            speed: speed,\r\n            duration: duration,\r\n            stop: stopit,\r\n            pause: pause,\r\n            resume: resume,\r\n            update: update\r\n        };\r\n        animations[anim.id] = anim;\r\n        var len = 0, i;\r\n        for (i in animations) if (animations.hasOwnProperty(i)) {\r\n            len++;\r\n            if (len == 2) {\r\n                break;\r\n            }\r\n        }\r\n        len == 1 && frame();\r\n        return anim;\r\n    };\r\n    /*\\\r\n     * mina.time\r\n     [ method ]\r\n     **\r\n     * Returns the current time. Equivalent to:\r\n     | function () {\r\n     |     return (new Date).getTime();\r\n     | }\r\n    \\*/\r\n    mina.time = timer;\r\n    /*\\\r\n     * mina.getById\r\n     [ method ]\r\n     **\r\n     * Returns an animation by its id\r\n     - id (string) animation's id\r\n     = (object) See @mina\r\n    \\*/\r\n    mina.getById = function (id) {\r\n        return animations[id] || null;\r\n    };\r\n\r\n    /*\\\r\n     * mina.linear\r\n     [ method ]\r\n     **\r\n     * Default linear easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.linear = function (n) {\r\n        return n;\r\n    };\r\n    /*\\\r\n     * mina.easeout\r\n     [ method ]\r\n     **\r\n     * Easeout easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.easeout = function (n) {\r\n        return Math.pow(n, 1.7);\r\n    };\r\n    /*\\\r\n     * mina.easein\r\n     [ method ]\r\n     **\r\n     * Easein easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.easein = function (n) {\r\n        return Math.pow(n, .48);\r\n    };\r\n    /*\\\r\n     * mina.easeinout\r\n     [ method ]\r\n     **\r\n     * Easeinout easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.easeinout = function (n) {\r\n        if (n == 1) {\r\n            return 1;\r\n        }\r\n        if (n == 0) {\r\n            return 0;\r\n        }\r\n        var q = .48 - n / 1.04,\r\n            Q = Math.sqrt(.1734 + q * q),\r\n            x = Q - q,\r\n            X = Math.pow(Math.abs(x), 1 / 3) * (x < 0 ? -1 : 1),\r\n            y = -Q - q,\r\n            Y = Math.pow(Math.abs(y), 1 / 3) * (y < 0 ? -1 : 1),\r\n            t = X + Y + .5;\r\n        return (1 - t) * 3 * t * t + t * t * t;\r\n    };\r\n    /*\\\r\n     * mina.backin\r\n     [ method ]\r\n     **\r\n     * Backin easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.backin = function (n) {\r\n        if (n == 1) {\r\n            return 1;\r\n        }\r\n        var s = 1.70158;\r\n        return n * n * ((s + 1) * n - s);\r\n    };\r\n    /*\\\r\n     * mina.backout\r\n     [ method ]\r\n     **\r\n     * Backout easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.backout = function (n) {\r\n        if (n == 0) {\r\n            return 0;\r\n        }\r\n        n = n - 1;\r\n        var s = 1.70158;\r\n        return n * n * ((s + 1) * n + s) + 1;\r\n    };\r\n    /*\\\r\n     * mina.elastic\r\n     [ method ]\r\n     **\r\n     * Elastic easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.elastic = function (n) {\r\n        if (n == !!n) {\r\n            return n;\r\n        }\r\n        return Math.pow(2, -10 * n) * Math.sin((n - .075) *\r\n            (2 * Math.PI) / .3) + 1;\r\n    };\r\n    /*\\\r\n     * mina.bounce\r\n     [ method ]\r\n     **\r\n     * Bounce easing\r\n     - n (number) input 0..1\r\n     = (number) output 0..1\r\n    \\*/\r\n    mina.bounce = function (n) {\r\n        var s = 7.5625,\r\n            p = 2.75,\r\n            l;\r\n        if (n < 1 / p) {\r\n            l = s * n * n;\r\n        } else {\r\n            if (n < 2 / p) {\r\n                n -= 1.5 / p;\r\n                l = s * n * n + .75;\r\n            } else {\r\n                if (n < 2.5 / p) {\r\n                    n -= 2.25 / p;\r\n                    l = s * n * n + .9375;\r\n                } else {\r\n                    n -= 2.625 / p;\r\n                    l = s * n * n + .984375;\r\n                }\r\n            }\r\n        }\r\n        return l;\r\n    };\r\n    window.mina = mina;\r\n    return mina;\r\n})(typeof eve == \"undefined\" ? function () {} : eve);\r\n\r\n// Copyright (c) 2013 - 2017 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nvar Snap = (function(root) {\r\nSnap.version = \"0.5.1\";\r\n/*\\\r\n * Snap\r\n [ method ]\r\n **\r\n * Creates a drawing surface or wraps existing SVG element.\r\n **\r\n - width (number|string) width of surface\r\n - height (number|string) height of surface\r\n * or\r\n - DOM (SVGElement) element to be wrapped into Snap structure\r\n * or\r\n - array (array) array of elements (will return set of elements)\r\n * or\r\n - query (string) CSS query selector\r\n = (object) @Element\r\n\\*/\r\nfunction Snap(w, h) {\r\n    if (w) {\r\n        if (w.nodeType) {\r\n            return wrap(w);\r\n        }\r\n        if (is(w, \"array\") && Snap.set) {\r\n            return Snap.set.apply(Snap, w);\r\n        }\r\n        if (w instanceof Element) {\r\n            return w;\r\n        }\r\n        if (h == null) {\r\n            try {\r\n                w = glob.doc.querySelector(String(w));\r\n                return wrap(w);\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n    w = w == null ? \"100%\" : w;\r\n    h = h == null ? \"100%\" : h;\r\n    return new Paper(w, h);\r\n}\r\nSnap.toString = function () {\r\n    return \"Snap v\" + this.version;\r\n};\r\nSnap._ = {};\r\nvar glob = {\r\n    win: root.window,\r\n    doc: root.window.document\r\n};\r\nSnap._.glob = glob;\r\nvar has = \"hasOwnProperty\",\r\n    Str = String,\r\n    toFloat = parseFloat,\r\n    toInt = parseInt,\r\n    math = Math,\r\n    mmax = math.max,\r\n    mmin = math.min,\r\n    abs = math.abs,\r\n    pow = math.pow,\r\n    PI = math.PI,\r\n    round = math.round,\r\n    E = \"\",\r\n    S = \" \",\r\n    objectToString = Object.prototype.toString,\r\n    ISURL = /^url\\(['\"]?([^\\)]+?)['\"]?\\)$/i,\r\n    colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?(?:\\s*,\\s*[\\d\\.]+%?)?)\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?%?)\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?%?)\\s*\\))\\s*$/i,\r\n    bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\r\n    separator = Snap._.separator = /[,\\s]+/,\r\n    whitespace = /[\\s]/g,\r\n    commaSpaces = /[\\s]*,[\\s]*/,\r\n    hsrg = {hs: 1, rg: 1},\r\n    pathCommand = /([a-z])[\\s,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\s]*,?[\\s]*)+)/ig,\r\n    tCommand = /([rstm])[\\s,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\s]*,?[\\s]*)+)/ig,\r\n    pathValues = /(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\\s]*,?[\\s]*/ig,\r\n    idgen = 0,\r\n    idprefix = \"S\" + (+new Date).toString(36),\r\n    ID = function (el) {\r\n        return (el && el.type ? el.type : E) + idprefix + (idgen++).toString(36);\r\n    },\r\n    xlink = \"http://www.w3.org/1999/xlink\",\r\n    xmlns = \"http://www.w3.org/2000/svg\",\r\n    hub = {},\r\n    /*\\\r\n     * Snap.url\r\n     [ method ]\r\n     **\r\n     * Wraps path into `\"url('<path>')\"`.\r\n     - value (string) path\r\n     = (string) wrapped path\r\n    \\*/\r\n    URL = Snap.url = function (url) {\r\n        return \"url('#\" + url + \"')\";\r\n    };\r\n\r\nfunction $(el, attr) {\r\n    if (attr) {\r\n        if (el == \"#text\") {\r\n            el = glob.doc.createTextNode(attr.text || attr[\"#text\"] || \"\");\r\n        }\r\n        if (el == \"#comment\") {\r\n            el = glob.doc.createComment(attr.text || attr[\"#text\"] || \"\");\r\n        }\r\n        if (typeof el == \"string\") {\r\n            el = $(el);\r\n        }\r\n        if (typeof attr == \"string\") {\r\n            if (el.nodeType == 1) {\r\n                if (attr.substring(0, 6) == \"xlink:\") {\r\n                    return el.getAttributeNS(xlink, attr.substring(6));\r\n                }\r\n                if (attr.substring(0, 4) == \"xml:\") {\r\n                    return el.getAttributeNS(xmlns, attr.substring(4));\r\n                }\r\n                return el.getAttribute(attr);\r\n            } else if (attr == \"text\") {\r\n                return el.nodeValue;\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n        if (el.nodeType == 1) {\r\n            for (var key in attr) if (attr[has](key)) {\r\n                var val = Str(attr[key]);\r\n                if (val) {\r\n                    if (key.substring(0, 6) == \"xlink:\") {\r\n                        el.setAttributeNS(xlink, key.substring(6), val);\r\n                    } else if (key.substring(0, 4) == \"xml:\") {\r\n                        el.setAttributeNS(xmlns, key.substring(4), val);\r\n                    } else {\r\n                        el.setAttribute(key, val);\r\n                    }\r\n                } else {\r\n                    el.removeAttribute(key);\r\n                }\r\n            }\r\n        } else if (\"text\" in attr) {\r\n            el.nodeValue = attr.text;\r\n        }\r\n    } else {\r\n        el = glob.doc.createElementNS(xmlns, el);\r\n    }\r\n    return el;\r\n}\r\nSnap._.$ = $;\r\nSnap._.id = ID;\r\nfunction getAttrs(el) {\r\n    var attrs = el.attributes,\r\n        name,\r\n        out = {};\r\n    for (var i = 0; i < attrs.length; i++) {\r\n        if (attrs[i].namespaceURI == xlink) {\r\n            name = \"xlink:\";\r\n        } else {\r\n            name = \"\";\r\n        }\r\n        name += attrs[i].name;\r\n        out[name] = attrs[i].textContent;\r\n    }\r\n    return out;\r\n}\r\nfunction is(o, type) {\r\n    type = Str.prototype.toLowerCase.call(type);\r\n    if (type == \"finite\") {\r\n        return isFinite(o);\r\n    }\r\n    if (type == \"array\" &&\r\n        (o instanceof Array || Array.isArray && Array.isArray(o))) {\r\n        return true;\r\n    }\r\n    return  type == \"null\" && o === null ||\r\n            type == typeof o && o !== null ||\r\n            type == \"object\" && o === Object(o) ||\r\n            objectToString.call(o).slice(8, -1).toLowerCase() == type;\r\n}\r\n/*\\\r\n * Snap.format\r\n [ method ]\r\n **\r\n * Replaces construction of type `{<name>}` to the corresponding argument\r\n **\r\n - token (string) string to format\r\n - json (object) object which properties are used as a replacement\r\n = (string) formatted string\r\n > Usage\r\n | // this draws a rectangular shape equivalent to \"M10,20h40v50h-40z\"\r\n | paper.path(Snap.format(\"M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z\", {\r\n |     x: 10,\r\n |     y: 20,\r\n |     dim: {\r\n |         width: 40,\r\n |         height: 50,\r\n |         \"negative width\": -40\r\n |     }\r\n | }));\r\n\\*/\r\nSnap.format = (function () {\r\n    var tokenRegex = /\\{([^\\}]+)\\}/g,\r\n        objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|\")(.+?)\\2\\])(\\(\\))?/g, // matches .xxxxx or [\"xxxxx\"] to run over object properties\r\n        replacer = function (all, key, obj) {\r\n            var res = obj;\r\n            key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\r\n                name = name || quotedName;\r\n                if (res) {\r\n                    if (name in res) {\r\n                        res = res[name];\r\n                    }\r\n                    typeof res == \"function\" && isFunc && (res = res());\r\n                }\r\n            });\r\n            res = (res == null || res == obj ? all : res) + \"\";\r\n            return res;\r\n        };\r\n    return function (str, obj) {\r\n        return Str(str).replace(tokenRegex, function (all, key) {\r\n            return replacer(all, key, obj);\r\n        });\r\n    };\r\n})();\r\nfunction clone(obj) {\r\n    if (typeof obj == \"function\" || Object(obj) !== obj) {\r\n        return obj;\r\n    }\r\n    var res = new obj.constructor;\r\n    for (var key in obj) if (obj[has](key)) {\r\n        res[key] = clone(obj[key]);\r\n    }\r\n    return res;\r\n}\r\nSnap._.clone = clone;\r\nfunction repush(array, item) {\r\n    for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\r\n        return array.push(array.splice(i, 1)[0]);\r\n    }\r\n}\r\nfunction cacher(f, scope, postprocessor) {\r\n    function newf() {\r\n        var arg = Array.prototype.slice.call(arguments, 0),\r\n            args = arg.join(\"\\u2400\"),\r\n            cache = newf.cache = newf.cache || {},\r\n            count = newf.count = newf.count || [];\r\n        if (cache[has](args)) {\r\n            repush(count, args);\r\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\r\n        }\r\n        count.length >= 1e3 && delete cache[count.shift()];\r\n        count.push(args);\r\n        cache[args] = f.apply(scope, arg);\r\n        return postprocessor ? postprocessor(cache[args]) : cache[args];\r\n    }\r\n    return newf;\r\n}\r\nSnap._.cacher = cacher;\r\nfunction angle(x1, y1, x2, y2, x3, y3) {\r\n    if (x3 == null) {\r\n        var x = x1 - x2,\r\n            y = y1 - y2;\r\n        if (!x && !y) {\r\n            return 0;\r\n        }\r\n        return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;\r\n    } else {\r\n        return angle(x1, y1, x3, y3) - angle(x2, y2, x3, y3);\r\n    }\r\n}\r\nfunction rad(deg) {\r\n    return deg % 360 * PI / 180;\r\n}\r\nfunction deg(rad) {\r\n    return rad * 180 / PI % 360;\r\n}\r\nfunction x_y() {\r\n    return this.x + S + this.y;\r\n}\r\nfunction x_y_w_h() {\r\n    return this.x + S + this.y + S + this.width + \" \\xd7 \" + this.height;\r\n}\r\n\r\n/*\\\r\n * Snap.rad\r\n [ method ]\r\n **\r\n * Transform angle to radians\r\n - deg (number) angle in degrees\r\n = (number) angle in radians\r\n\\*/\r\nSnap.rad = rad;\r\n/*\\\r\n * Snap.deg\r\n [ method ]\r\n **\r\n * Transform angle to degrees\r\n - rad (number) angle in radians\r\n = (number) angle in degrees\r\n\\*/\r\nSnap.deg = deg;\r\n/*\\\r\n * Snap.sin\r\n [ method ]\r\n **\r\n * Equivalent to `Math.sin()` only works with degrees, not radians.\r\n - angle (number) angle in degrees\r\n = (number) sin\r\n\\*/\r\nSnap.sin = function (angle) {\r\n    return math.sin(Snap.rad(angle));\r\n};\r\n/*\\\r\n * Snap.tan\r\n [ method ]\r\n **\r\n * Equivalent to `Math.tan()` only works with degrees, not radians.\r\n - angle (number) angle in degrees\r\n = (number) tan\r\n\\*/\r\nSnap.tan = function (angle) {\r\n    return math.tan(Snap.rad(angle));\r\n};\r\n/*\\\r\n * Snap.cos\r\n [ method ]\r\n **\r\n * Equivalent to `Math.cos()` only works with degrees, not radians.\r\n - angle (number) angle in degrees\r\n = (number) cos\r\n\\*/\r\nSnap.cos = function (angle) {\r\n    return math.cos(Snap.rad(angle));\r\n};\r\n/*\\\r\n * Snap.asin\r\n [ method ]\r\n **\r\n * Equivalent to `Math.asin()` only works with degrees, not radians.\r\n - num (number) value\r\n = (number) asin in degrees\r\n\\*/\r\nSnap.asin = function (num) {\r\n    return Snap.deg(math.asin(num));\r\n};\r\n/*\\\r\n * Snap.acos\r\n [ method ]\r\n **\r\n * Equivalent to `Math.acos()` only works with degrees, not radians.\r\n - num (number) value\r\n = (number) acos in degrees\r\n\\*/\r\nSnap.acos = function (num) {\r\n    return Snap.deg(math.acos(num));\r\n};\r\n/*\\\r\n * Snap.atan\r\n [ method ]\r\n **\r\n * Equivalent to `Math.atan()` only works with degrees, not radians.\r\n - num (number) value\r\n = (number) atan in degrees\r\n\\*/\r\nSnap.atan = function (num) {\r\n    return Snap.deg(math.atan(num));\r\n};\r\n/*\\\r\n * Snap.atan2\r\n [ method ]\r\n **\r\n * Equivalent to `Math.atan2()` only works with degrees, not radians.\r\n - num (number) value\r\n = (number) atan2 in degrees\r\n\\*/\r\nSnap.atan2 = function (num) {\r\n    return Snap.deg(math.atan2(num));\r\n};\r\n/*\\\r\n * Snap.angle\r\n [ method ]\r\n **\r\n * Returns an angle between two or three points\r\n - x1 (number) x coord of first point\r\n - y1 (number) y coord of first point\r\n - x2 (number) x coord of second point\r\n - y2 (number) y coord of second point\r\n - x3 (number) #optional x coord of third point\r\n - y3 (number) #optional y coord of third point\r\n = (number) angle in degrees\r\n\\*/\r\nSnap.angle = angle;\r\n/*\\\r\n * Snap.len\r\n [ method ]\r\n **\r\n * Returns distance between two points\r\n - x1 (number) x coord of first point\r\n - y1 (number) y coord of first point\r\n - x2 (number) x coord of second point\r\n - y2 (number) y coord of second point\r\n = (number) distance\r\n\\*/\r\nSnap.len = function (x1, y1, x2, y2) {\r\n    return Math.sqrt(Snap.len2(x1, y1, x2, y2));\r\n};\r\n/*\\\r\n * Snap.len2\r\n [ method ]\r\n **\r\n * Returns squared distance between two points\r\n - x1 (number) x coord of first point\r\n - y1 (number) y coord of first point\r\n - x2 (number) x coord of second point\r\n - y2 (number) y coord of second point\r\n = (number) distance\r\n\\*/\r\nSnap.len2 = function (x1, y1, x2, y2) {\r\n    return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\r\n};\r\n/*\\\r\n * Snap.closestPoint\r\n [ method ]\r\n **\r\n * Returns closest point to a given one on a given path.\r\n - path (Element) path element\r\n - x (number) x coord of a point\r\n - y (number) y coord of a point\r\n = (object) in format\r\n {\r\n    x (number) x coord of the point on the path\r\n    y (number) y coord of the point on the path\r\n    length (number) length of the path to the point\r\n    distance (number) distance from the given point to the path\r\n }\r\n\\*/\r\n// Copied from http://bl.ocks.org/mbostock/8027637\r\nSnap.closestPoint = function (path, x, y) {\r\n    function distance2(p) {\r\n        var dx = p.x - x,\r\n            dy = p.y - y;\r\n        return dx * dx + dy * dy;\r\n    }\r\n    var pathNode = path.node,\r\n        pathLength = pathNode.getTotalLength(),\r\n        precision = pathLength / pathNode.pathSegList.numberOfItems * .125,\r\n        best,\r\n        bestLength,\r\n        bestDistance = Infinity;\r\n\r\n    // linear scan for coarse approximation\r\n    for (var scan, scanLength = 0, scanDistance; scanLength <= pathLength; scanLength += precision) {\r\n        if ((scanDistance = distance2(scan = pathNode.getPointAtLength(scanLength))) < bestDistance) {\r\n            best = scan;\r\n            bestLength = scanLength;\r\n            bestDistance = scanDistance;\r\n        }\r\n    }\r\n\r\n    // binary search for precise estimate\r\n    precision *= .5;\r\n    while (precision > .5) {\r\n        var before,\r\n            after,\r\n            beforeLength,\r\n            afterLength,\r\n            beforeDistance,\r\n            afterDistance;\r\n        if ((beforeLength = bestLength - precision) >= 0 && (beforeDistance = distance2(before = pathNode.getPointAtLength(beforeLength))) < bestDistance) {\r\n            best = before;\r\n            bestLength = beforeLength;\r\n            bestDistance = beforeDistance;\r\n        } else if ((afterLength = bestLength + precision) <= pathLength && (afterDistance = distance2(after = pathNode.getPointAtLength(afterLength))) < bestDistance) {\r\n            best = after;\r\n            bestLength = afterLength;\r\n            bestDistance = afterDistance;\r\n        } else {\r\n            precision *= .5;\r\n        }\r\n    }\r\n\r\n    best = {\r\n        x: best.x,\r\n        y: best.y,\r\n        length: bestLength,\r\n        distance: Math.sqrt(bestDistance)\r\n    };\r\n    return best;\r\n}\r\n/*\\\r\n * Snap.is\r\n [ method ]\r\n **\r\n * Handy replacement for the `typeof` operator\r\n - o (…) any object or primitive\r\n - type (string) name of the type, e.g., `string`, `function`, `number`, etc.\r\n = (boolean) `true` if given value is of given type\r\n\\*/\r\nSnap.is = is;\r\n/*\\\r\n * Snap.snapTo\r\n [ method ]\r\n **\r\n * Snaps given value to given grid\r\n - values (array|number) given array of values or step of the grid\r\n - value (number) value to adjust\r\n - tolerance (number) #optional maximum distance to the target value that would trigger the snap. Default is `10`.\r\n = (number) adjusted value\r\n\\*/\r\nSnap.snapTo = function (values, value, tolerance) {\r\n    tolerance = is(tolerance, \"finite\") ? tolerance : 10;\r\n    if (is(values, \"array\")) {\r\n        var i = values.length;\r\n        while (i--) if (abs(values[i] - value) <= tolerance) {\r\n            return values[i];\r\n        }\r\n    } else {\r\n        values = +values;\r\n        var rem = value % values;\r\n        if (rem < tolerance) {\r\n            return value - rem;\r\n        }\r\n        if (rem > values - tolerance) {\r\n            return value - rem + values;\r\n        }\r\n    }\r\n    return value;\r\n};\r\n// Colour\r\n/*\\\r\n * Snap.getRGB\r\n [ method ]\r\n **\r\n * Parses color string as RGB object\r\n - color (string) color string in one of the following formats:\r\n # <ul>\r\n #     <li>Color name (<code>red</code>, <code>green</code>, <code>cornflowerblue</code>, etc)</li>\r\n #     <li>#••• — shortened HTML color: (<code>#000</code>, <code>#fc0</code>, etc.)</li>\r\n #     <li>#•••••• — full length HTML color: (<code>#000000</code>, <code>#bd2300</code>)</li>\r\n #     <li>rgb(•••, •••, •••) — red, green and blue channels values: (<code>rgb(200,&nbsp;100,&nbsp;0)</code>)</li>\r\n #     <li>rgba(•••, •••, •••, •••) — also with opacity</li>\r\n #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>)</li>\r\n #     <li>rgba(•••%, •••%, •••%, •••%) — also with opacity</li>\r\n #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>)</li>\r\n #     <li>hsba(•••, •••, •••, •••) — also with opacity</li>\r\n #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\r\n #     <li>hsba(•••%, •••%, •••%, •••%) — also with opacity</li>\r\n #     <li>hsl(•••, •••, •••) — hue, saturation and luminosity values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;0.5)</code>)</li>\r\n #     <li>hsla(•••, •••, •••, •••) — also with opacity</li>\r\n #     <li>hsl(•••%, •••%, •••%) — same as above, but in %</li>\r\n #     <li>hsla(•••%, •••%, •••%, •••%) — also with opacity</li>\r\n # </ul>\r\n * Note that `%` can be used any time: `rgb(20%, 255, 50%)`.\r\n = (object) RGB object in the following format:\r\n o {\r\n o     r (number) red,\r\n o     g (number) green,\r\n o     b (number) blue,\r\n o     hex (string) color in HTML/CSS format: #••••••,\r\n o     error (boolean) true if string can't be parsed\r\n o }\r\n\\*/\r\nSnap.getRGB = cacher(function (colour) {\r\n    if (!colour || !!((colour = Str(colour)).indexOf(\"-\") + 1)) {\r\n        return {r: -1, g: -1, b: -1, hex: \"none\", error: 1, toString: rgbtoString};\r\n    }\r\n    if (colour == \"none\") {\r\n        return {r: -1, g: -1, b: -1, hex: \"none\", toString: rgbtoString};\r\n    }\r\n    !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == \"#\") && (colour = toHex(colour));\r\n    if (!colour) {\r\n        return {r: -1, g: -1, b: -1, hex: \"none\", error: 1, toString: rgbtoString};\r\n    }\r\n    var res,\r\n        red,\r\n        green,\r\n        blue,\r\n        opacity,\r\n        t,\r\n        values,\r\n        rgb = colour.match(colourRegExp);\r\n    if (rgb) {\r\n        if (rgb[2]) {\r\n            blue = toInt(rgb[2].substring(5), 16);\r\n            green = toInt(rgb[2].substring(3, 5), 16);\r\n            red = toInt(rgb[2].substring(1, 3), 16);\r\n        }\r\n        if (rgb[3]) {\r\n            blue = toInt((t = rgb[3].charAt(3)) + t, 16);\r\n            green = toInt((t = rgb[3].charAt(2)) + t, 16);\r\n            red = toInt((t = rgb[3].charAt(1)) + t, 16);\r\n        }\r\n        if (rgb[4]) {\r\n            values = rgb[4].split(commaSpaces);\r\n            red = toFloat(values[0]);\r\n            values[0].slice(-1) == \"%\" && (red *= 2.55);\r\n            green = toFloat(values[1]);\r\n            values[1].slice(-1) == \"%\" && (green *= 2.55);\r\n            blue = toFloat(values[2]);\r\n            values[2].slice(-1) == \"%\" && (blue *= 2.55);\r\n            rgb[1].toLowerCase().slice(0, 4) == \"rgba\" && (opacity = toFloat(values[3]));\r\n            values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\r\n        }\r\n        if (rgb[5]) {\r\n            values = rgb[5].split(commaSpaces);\r\n            red = toFloat(values[0]);\r\n            values[0].slice(-1) == \"%\" && (red /= 100);\r\n            green = toFloat(values[1]);\r\n            values[1].slice(-1) == \"%\" && (green /= 100);\r\n            blue = toFloat(values[2]);\r\n            values[2].slice(-1) == \"%\" && (blue /= 100);\r\n            (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\r\n            rgb[1].toLowerCase().slice(0, 4) == \"hsba\" && (opacity = toFloat(values[3]));\r\n            values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\r\n            return Snap.hsb2rgb(red, green, blue, opacity);\r\n        }\r\n        if (rgb[6]) {\r\n            values = rgb[6].split(commaSpaces);\r\n            red = toFloat(values[0]);\r\n            values[0].slice(-1) == \"%\" && (red /= 100);\r\n            green = toFloat(values[1]);\r\n            values[1].slice(-1) == \"%\" && (green /= 100);\r\n            blue = toFloat(values[2]);\r\n            values[2].slice(-1) == \"%\" && (blue /= 100);\r\n            (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\r\n            rgb[1].toLowerCase().slice(0, 4) == \"hsla\" && (opacity = toFloat(values[3]));\r\n            values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\r\n            return Snap.hsl2rgb(red, green, blue, opacity);\r\n        }\r\n        red = mmin(math.round(red), 255);\r\n        green = mmin(math.round(green), 255);\r\n        blue = mmin(math.round(blue), 255);\r\n        opacity = mmin(mmax(opacity, 0), 1);\r\n        rgb = {r: red, g: green, b: blue, toString: rgbtoString};\r\n        rgb.hex = \"#\" + (16777216 | blue | green << 8 | red << 16).toString(16).slice(1);\r\n        rgb.opacity = is(opacity, \"finite\") ? opacity : 1;\r\n        return rgb;\r\n    }\r\n    return {r: -1, g: -1, b: -1, hex: \"none\", error: 1, toString: rgbtoString};\r\n}, Snap);\r\n/*\\\r\n * Snap.hsb\r\n [ method ]\r\n **\r\n * Converts HSB values to a hex representation of the color\r\n - h (number) hue\r\n - s (number) saturation\r\n - b (number) value or brightness\r\n = (string) hex representation of the color\r\n\\*/\r\nSnap.hsb = cacher(function (h, s, b) {\r\n    return Snap.hsb2rgb(h, s, b).hex;\r\n});\r\n/*\\\r\n * Snap.hsl\r\n [ method ]\r\n **\r\n * Converts HSL values to a hex representation of the color\r\n - h (number) hue\r\n - s (number) saturation\r\n - l (number) luminosity\r\n = (string) hex representation of the color\r\n\\*/\r\nSnap.hsl = cacher(function (h, s, l) {\r\n    return Snap.hsl2rgb(h, s, l).hex;\r\n});\r\n/*\\\r\n * Snap.rgb\r\n [ method ]\r\n **\r\n * Converts RGB values to a hex representation of the color\r\n - r (number) red\r\n - g (number) green\r\n - b (number) blue\r\n = (string) hex representation of the color\r\n\\*/\r\nSnap.rgb = cacher(function (r, g, b, o) {\r\n    if (is(o, \"finite\")) {\r\n        var round = math.round;\r\n        return \"rgba(\" + [round(r), round(g), round(b), +o.toFixed(2)] + \")\";\r\n    }\r\n    return \"#\" + (16777216 | b | g << 8 | r << 16).toString(16).slice(1);\r\n});\r\nvar toHex = function (color) {\r\n    var i = glob.doc.getElementsByTagName(\"head\")[0] || glob.doc.getElementsByTagName(\"svg\")[0],\r\n        red = \"rgb(255, 0, 0)\";\r\n    toHex = cacher(function (color) {\r\n        if (color.toLowerCase() == \"red\") {\r\n            return red;\r\n        }\r\n        i.style.color = red;\r\n        i.style.color = color;\r\n        var out = glob.doc.defaultView.getComputedStyle(i, E).getPropertyValue(\"color\");\r\n        return out == red ? null : out;\r\n    });\r\n    return toHex(color);\r\n},\r\nhsbtoString = function () {\r\n    return \"hsb(\" + [this.h, this.s, this.b] + \")\";\r\n},\r\nhsltoString = function () {\r\n    return \"hsl(\" + [this.h, this.s, this.l] + \")\";\r\n},\r\nrgbtoString = function () {\r\n    return this.opacity == 1 || this.opacity == null ?\r\n            this.hex :\r\n            \"rgba(\" + [this.r, this.g, this.b, this.opacity] + \")\";\r\n},\r\nprepareRGB = function (r, g, b) {\r\n    if (g == null && is(r, \"object\") && \"r\" in r && \"g\" in r && \"b\" in r) {\r\n        b = r.b;\r\n        g = r.g;\r\n        r = r.r;\r\n    }\r\n    if (g == null && is(r, string)) {\r\n        var clr = Snap.getRGB(r);\r\n        r = clr.r;\r\n        g = clr.g;\r\n        b = clr.b;\r\n    }\r\n    if (r > 1 || g > 1 || b > 1) {\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n    }\r\n\r\n    return [r, g, b];\r\n},\r\npackageRGB = function (r, g, b, o) {\r\n    r = math.round(r * 255);\r\n    g = math.round(g * 255);\r\n    b = math.round(b * 255);\r\n    var rgb = {\r\n        r: r,\r\n        g: g,\r\n        b: b,\r\n        opacity: is(o, \"finite\") ? o : 1,\r\n        hex: Snap.rgb(r, g, b),\r\n        toString: rgbtoString\r\n    };\r\n    is(o, \"finite\") && (rgb.opacity = o);\r\n    return rgb;\r\n};\r\n/*\\\r\n * Snap.color\r\n [ method ]\r\n **\r\n * Parses the color string and returns an object featuring the color's component values\r\n - clr (string) color string in one of the supported formats (see @Snap.getRGB)\r\n = (object) Combined RGB/HSB object in the following format:\r\n o {\r\n o     r (number) red,\r\n o     g (number) green,\r\n o     b (number) blue,\r\n o     hex (string) color in HTML/CSS format: #••••••,\r\n o     error (boolean) `true` if string can't be parsed,\r\n o     h (number) hue,\r\n o     s (number) saturation,\r\n o     v (number) value (brightness),\r\n o     l (number) lightness\r\n o }\r\n\\*/\r\nSnap.color = function (clr) {\r\n    var rgb;\r\n    if (is(clr, \"object\") && \"h\" in clr && \"s\" in clr && \"b\" in clr) {\r\n        rgb = Snap.hsb2rgb(clr);\r\n        clr.r = rgb.r;\r\n        clr.g = rgb.g;\r\n        clr.b = rgb.b;\r\n        clr.opacity = 1;\r\n        clr.hex = rgb.hex;\r\n    } else if (is(clr, \"object\") && \"h\" in clr && \"s\" in clr && \"l\" in clr) {\r\n        rgb = Snap.hsl2rgb(clr);\r\n        clr.r = rgb.r;\r\n        clr.g = rgb.g;\r\n        clr.b = rgb.b;\r\n        clr.opacity = 1;\r\n        clr.hex = rgb.hex;\r\n    } else {\r\n        if (is(clr, \"string\")) {\r\n            clr = Snap.getRGB(clr);\r\n        }\r\n        if (is(clr, \"object\") && \"r\" in clr && \"g\" in clr && \"b\" in clr && !(\"error\" in clr)) {\r\n            rgb = Snap.rgb2hsl(clr);\r\n            clr.h = rgb.h;\r\n            clr.s = rgb.s;\r\n            clr.l = rgb.l;\r\n            rgb = Snap.rgb2hsb(clr);\r\n            clr.v = rgb.b;\r\n        } else {\r\n            clr = {hex: \"none\"};\r\n            clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\r\n            clr.error = 1;\r\n        }\r\n    }\r\n    clr.toString = rgbtoString;\r\n    return clr;\r\n};\r\n/*\\\r\n * Snap.hsb2rgb\r\n [ method ]\r\n **\r\n * Converts HSB values to an RGB object\r\n - h (number) hue\r\n - s (number) saturation\r\n - v (number) value or brightness\r\n = (object) RGB object in the following format:\r\n o {\r\n o     r (number) red,\r\n o     g (number) green,\r\n o     b (number) blue,\r\n o     hex (string) color in HTML/CSS format: #••••••\r\n o }\r\n\\*/\r\nSnap.hsb2rgb = function (h, s, v, o) {\r\n    if (is(h, \"object\") && \"h\" in h && \"s\" in h && \"b\" in h) {\r\n        v = h.b;\r\n        s = h.s;\r\n        o = h.o;\r\n        h = h.h;\r\n    }\r\n    h *= 360;\r\n    var R, G, B, X, C;\r\n    h = h % 360 / 60;\r\n    C = v * s;\r\n    X = C * (1 - abs(h % 2 - 1));\r\n    R = G = B = v - C;\r\n\r\n    h = ~~h;\r\n    R += [C, X, 0, 0, X, C][h];\r\n    G += [X, C, C, X, 0, 0][h];\r\n    B += [0, 0, X, C, C, X][h];\r\n    return packageRGB(R, G, B, o);\r\n};\r\n/*\\\r\n * Snap.hsl2rgb\r\n [ method ]\r\n **\r\n * Converts HSL values to an RGB object\r\n - h (number) hue\r\n - s (number) saturation\r\n - l (number) luminosity\r\n = (object) RGB object in the following format:\r\n o {\r\n o     r (number) red,\r\n o     g (number) green,\r\n o     b (number) blue,\r\n o     hex (string) color in HTML/CSS format: #••••••\r\n o }\r\n\\*/\r\nSnap.hsl2rgb = function (h, s, l, o) {\r\n    if (is(h, \"object\") && \"h\" in h && \"s\" in h && \"l\" in h) {\r\n        l = h.l;\r\n        s = h.s;\r\n        h = h.h;\r\n    }\r\n    if (h > 1 || s > 1 || l > 1) {\r\n        h /= 360;\r\n        s /= 100;\r\n        l /= 100;\r\n    }\r\n    h *= 360;\r\n    var R, G, B, X, C;\r\n    h = h % 360 / 60;\r\n    C = 2 * s * (l < .5 ? l : 1 - l);\r\n    X = C * (1 - abs(h % 2 - 1));\r\n    R = G = B = l - C / 2;\r\n\r\n    h = ~~h;\r\n    R += [C, X, 0, 0, X, C][h];\r\n    G += [X, C, C, X, 0, 0][h];\r\n    B += [0, 0, X, C, C, X][h];\r\n    return packageRGB(R, G, B, o);\r\n};\r\n/*\\\r\n * Snap.rgb2hsb\r\n [ method ]\r\n **\r\n * Converts RGB values to an HSB object\r\n - r (number) red\r\n - g (number) green\r\n - b (number) blue\r\n = (object) HSB object in the following format:\r\n o {\r\n o     h (number) hue,\r\n o     s (number) saturation,\r\n o     b (number) brightness\r\n o }\r\n\\*/\r\nSnap.rgb2hsb = function (r, g, b) {\r\n    b = prepareRGB(r, g, b);\r\n    r = b[0];\r\n    g = b[1];\r\n    b = b[2];\r\n\r\n    var H, S, V, C;\r\n    V = mmax(r, g, b);\r\n    C = V - mmin(r, g, b);\r\n    H = C == 0 ? null :\r\n        V == r ? (g - b) / C :\r\n        V == g ? (b - r) / C + 2 :\r\n                 (r - g) / C + 4;\r\n    H = (H + 360) % 6 * 60 / 360;\r\n    S = C == 0 ? 0 : C / V;\r\n    return {h: H, s: S, b: V, toString: hsbtoString};\r\n};\r\n/*\\\r\n * Snap.rgb2hsl\r\n [ method ]\r\n **\r\n * Converts RGB values to an HSL object\r\n - r (number) red\r\n - g (number) green\r\n - b (number) blue\r\n = (object) HSL object in the following format:\r\n o {\r\n o     h (number) hue,\r\n o     s (number) saturation,\r\n o     l (number) luminosity\r\n o }\r\n\\*/\r\nSnap.rgb2hsl = function (r, g, b) {\r\n    b = prepareRGB(r, g, b);\r\n    r = b[0];\r\n    g = b[1];\r\n    b = b[2];\r\n\r\n    var H, S, L, M, m, C;\r\n    M = mmax(r, g, b);\r\n    m = mmin(r, g, b);\r\n    C = M - m;\r\n    H = C == 0 ? null :\r\n        M == r ? (g - b) / C :\r\n        M == g ? (b - r) / C + 2 :\r\n                 (r - g) / C + 4;\r\n    H = (H + 360) % 6 * 60 / 360;\r\n    L = (M + m) / 2;\r\n    S = C == 0 ? 0 :\r\n         L < .5 ? C / (2 * L) :\r\n                  C / (2 - 2 * L);\r\n    return {h: H, s: S, l: L, toString: hsltoString};\r\n};\r\n\r\n// Transformations\r\n/*\\\r\n * Snap.parsePathString\r\n [ method ]\r\n **\r\n * Utility method\r\n **\r\n * Parses given path string into an array of arrays of path segments\r\n - pathString (string|array) path string or array of segments (in the last case it is returned straight away)\r\n = (array) array of segments\r\n\\*/\r\nSnap.parsePathString = function (pathString) {\r\n    if (!pathString) {\r\n        return null;\r\n    }\r\n    var pth = Snap.path(pathString);\r\n    if (pth.arr) {\r\n        return Snap.path.clone(pth.arr);\r\n    }\r\n\r\n    var paramCounts = {a: 7, c: 6, o: 2, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, u: 3, z: 0},\r\n        data = [];\r\n    if (is(pathString, \"array\") && is(pathString[0], \"array\")) { // rough assumption\r\n        data = Snap.path.clone(pathString);\r\n    }\r\n    if (!data.length) {\r\n        Str(pathString).replace(pathCommand, function (a, b, c) {\r\n            var params = [],\r\n                name = b.toLowerCase();\r\n            c.replace(pathValues, function (a, b) {\r\n                b && params.push(+b);\r\n            });\r\n            if (name == \"m\" && params.length > 2) {\r\n                data.push([b].concat(params.splice(0, 2)));\r\n                name = \"l\";\r\n                b = b == \"m\" ? \"l\" : \"L\";\r\n            }\r\n            if (name == \"o\" && params.length == 1) {\r\n                data.push([b, params[0]]);\r\n            }\r\n            if (name == \"r\") {\r\n                data.push([b].concat(params));\r\n            } else while (params.length >= paramCounts[name]) {\r\n                data.push([b].concat(params.splice(0, paramCounts[name])));\r\n                if (!paramCounts[name]) {\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    data.toString = Snap.path.toString;\r\n    pth.arr = Snap.path.clone(data);\r\n    return data;\r\n};\r\n/*\\\r\n * Snap.parseTransformString\r\n [ method ]\r\n **\r\n * Utility method\r\n **\r\n * Parses given transform string into an array of transformations\r\n - TString (string|array) transform string or array of transformations (in the last case it is returned straight away)\r\n = (array) array of transformations\r\n\\*/\r\nvar parseTransformString = Snap.parseTransformString = function (TString) {\r\n    if (!TString) {\r\n        return null;\r\n    }\r\n    var paramCounts = {r: 3, s: 4, t: 2, m: 6},\r\n        data = [];\r\n    if (is(TString, \"array\") && is(TString[0], \"array\")) { // rough assumption\r\n        data = Snap.path.clone(TString);\r\n    }\r\n    if (!data.length) {\r\n        Str(TString).replace(tCommand, function (a, b, c) {\r\n            var params = [],\r\n                name = b.toLowerCase();\r\n            c.replace(pathValues, function (a, b) {\r\n                b && params.push(+b);\r\n            });\r\n            data.push([b].concat(params));\r\n        });\r\n    }\r\n    data.toString = Snap.path.toString;\r\n    return data;\r\n};\r\nfunction svgTransform2string(tstr) {\r\n    var res = [];\r\n    tstr = tstr.replace(/(?:^|\\s)(\\w+)\\(([^)]+)\\)/g, function (all, name, params) {\r\n        params = params.split(/\\s*,\\s*|\\s+/);\r\n        if (name == \"rotate\" && params.length == 1) {\r\n            params.push(0, 0);\r\n        }\r\n        if (name == \"scale\") {\r\n            if (params.length > 2) {\r\n                params = params.slice(0, 2);\r\n            } else if (params.length == 2) {\r\n                params.push(0, 0);\r\n            }\r\n            if (params.length == 1) {\r\n                params.push(params[0], 0, 0);\r\n            }\r\n        }\r\n        if (name == \"skewX\") {\r\n            res.push([\"m\", 1, 0, math.tan(rad(params[0])), 1, 0, 0]);\r\n        } else if (name == \"skewY\") {\r\n            res.push([\"m\", 1, math.tan(rad(params[0])), 0, 1, 0, 0]);\r\n        } else {\r\n            res.push([name.charAt(0)].concat(params));\r\n        }\r\n        return all;\r\n    });\r\n    return res;\r\n}\r\nSnap._.svgTransform2string = svgTransform2string;\r\nSnap._.rgTransform = /^[a-z][\\s]*-?\\.?\\d/i;\r\nfunction transform2matrix(tstr, bbox) {\r\n    var tdata = parseTransformString(tstr),\r\n        m = new Snap.Matrix;\r\n    if (tdata) {\r\n        for (var i = 0, ii = tdata.length; i < ii; i++) {\r\n            var t = tdata[i],\r\n                tlen = t.length,\r\n                command = Str(t[0]).toLowerCase(),\r\n                absolute = t[0] != command,\r\n                inver = absolute ? m.invert() : 0,\r\n                x1,\r\n                y1,\r\n                x2,\r\n                y2,\r\n                bb;\r\n            if (command == \"t\" && tlen == 2){\r\n                m.translate(t[1], 0);\r\n            } else if (command == \"t\" && tlen == 3) {\r\n                if (absolute) {\r\n                    x1 = inver.x(0, 0);\r\n                    y1 = inver.y(0, 0);\r\n                    x2 = inver.x(t[1], t[2]);\r\n                    y2 = inver.y(t[1], t[2]);\r\n                    m.translate(x2 - x1, y2 - y1);\r\n                } else {\r\n                    m.translate(t[1], t[2]);\r\n                }\r\n            } else if (command == \"r\") {\r\n                if (tlen == 2) {\r\n                    bb = bb || bbox;\r\n                    m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\r\n                } else if (tlen == 4) {\r\n                    if (absolute) {\r\n                        x2 = inver.x(t[2], t[3]);\r\n                        y2 = inver.y(t[2], t[3]);\r\n                        m.rotate(t[1], x2, y2);\r\n                    } else {\r\n                        m.rotate(t[1], t[2], t[3]);\r\n                    }\r\n                }\r\n            } else if (command == \"s\") {\r\n                if (tlen == 2 || tlen == 3) {\r\n                    bb = bb || bbox;\r\n                    m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\r\n                } else if (tlen == 4) {\r\n                    if (absolute) {\r\n                        x2 = inver.x(t[2], t[3]);\r\n                        y2 = inver.y(t[2], t[3]);\r\n                        m.scale(t[1], t[1], x2, y2);\r\n                    } else {\r\n                        m.scale(t[1], t[1], t[2], t[3]);\r\n                    }\r\n                } else if (tlen == 5) {\r\n                    if (absolute) {\r\n                        x2 = inver.x(t[3], t[4]);\r\n                        y2 = inver.y(t[3], t[4]);\r\n                        m.scale(t[1], t[2], x2, y2);\r\n                    } else {\r\n                        m.scale(t[1], t[2], t[3], t[4]);\r\n                    }\r\n                }\r\n            } else if (command == \"m\" && tlen == 7) {\r\n                m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\r\n            }\r\n        }\r\n    }\r\n    return m;\r\n}\r\nSnap._.transform2matrix = transform2matrix;\r\nSnap._unit2px = unit2px;\r\nvar contains = glob.doc.contains || glob.doc.compareDocumentPosition ?\r\n    function (a, b) {\r\n        var adown = a.nodeType == 9 ? a.documentElement : a,\r\n            bup = b && b.parentNode;\r\n            return a == bup || !!(bup && bup.nodeType == 1 && (\r\n                adown.contains ?\r\n                    adown.contains(bup) :\r\n                    a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16\r\n            ));\r\n    } :\r\n    function (a, b) {\r\n        if (b) {\r\n            while (b) {\r\n                b = b.parentNode;\r\n                if (b == a) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\nfunction getSomeDefs(el) {\r\n    var p = el.node.ownerSVGElement && wrap(el.node.ownerSVGElement) ||\r\n            el.node.parentNode && wrap(el.node.parentNode) ||\r\n            Snap.select(\"svg\") ||\r\n            Snap(0, 0),\r\n        pdefs = p.select(\"defs\"),\r\n        defs  = pdefs == null ? false : pdefs.node;\r\n    if (!defs) {\r\n        defs = make(\"defs\", p.node).node;\r\n    }\r\n    return defs;\r\n}\r\nfunction getSomeSVG(el) {\r\n    return el.node.ownerSVGElement && wrap(el.node.ownerSVGElement) || Snap.select(\"svg\");\r\n}\r\nSnap._.getSomeDefs = getSomeDefs;\r\nSnap._.getSomeSVG = getSomeSVG;\r\nfunction unit2px(el, name, value) {\r\n    var svg = getSomeSVG(el).node,\r\n        out = {},\r\n        mgr = svg.querySelector(\".svg---mgr\");\r\n    if (!mgr) {\r\n        mgr = $(\"rect\");\r\n        $(mgr, {x: -9e9, y: -9e9, width: 10, height: 10, \"class\": \"svg---mgr\", fill: \"none\"});\r\n        svg.appendChild(mgr);\r\n    }\r\n    function getW(val) {\r\n        if (val == null) {\r\n            return E;\r\n        }\r\n        if (val == +val) {\r\n            return val;\r\n        }\r\n        $(mgr, {width: val});\r\n        try {\r\n            return mgr.getBBox().width;\r\n        } catch (e) {\r\n            return 0;\r\n        }\r\n    }\r\n    function getH(val) {\r\n        if (val == null) {\r\n            return E;\r\n        }\r\n        if (val == +val) {\r\n            return val;\r\n        }\r\n        $(mgr, {height: val});\r\n        try {\r\n            return mgr.getBBox().height;\r\n        } catch (e) {\r\n            return 0;\r\n        }\r\n    }\r\n    function set(nam, f) {\r\n        if (name == null) {\r\n            out[nam] = f(el.attr(nam) || 0);\r\n        } else if (nam == name) {\r\n            out = f(value == null ? el.attr(nam) || 0 : value);\r\n        }\r\n    }\r\n    switch (el.type) {\r\n        case \"rect\":\r\n            set(\"rx\", getW);\r\n            set(\"ry\", getH);\r\n        case \"image\":\r\n            set(\"width\", getW);\r\n            set(\"height\", getH);\r\n        case \"text\":\r\n            set(\"x\", getW);\r\n            set(\"y\", getH);\r\n        break;\r\n        case \"circle\":\r\n            set(\"cx\", getW);\r\n            set(\"cy\", getH);\r\n            set(\"r\", getW);\r\n        break;\r\n        case \"ellipse\":\r\n            set(\"cx\", getW);\r\n            set(\"cy\", getH);\r\n            set(\"rx\", getW);\r\n            set(\"ry\", getH);\r\n        break;\r\n        case \"line\":\r\n            set(\"x1\", getW);\r\n            set(\"x2\", getW);\r\n            set(\"y1\", getH);\r\n            set(\"y2\", getH);\r\n        break;\r\n        case \"marker\":\r\n            set(\"refX\", getW);\r\n            set(\"markerWidth\", getW);\r\n            set(\"refY\", getH);\r\n            set(\"markerHeight\", getH);\r\n        break;\r\n        case \"radialGradient\":\r\n            set(\"fx\", getW);\r\n            set(\"fy\", getH);\r\n        break;\r\n        case \"tspan\":\r\n            set(\"dx\", getW);\r\n            set(\"dy\", getH);\r\n        break;\r\n        default:\r\n            set(name, getW);\r\n    }\r\n    svg.removeChild(mgr);\r\n    return out;\r\n}\r\n/*\\\r\n * Snap.select\r\n [ method ]\r\n **\r\n * Wraps a DOM element specified by CSS selector as @Element\r\n - query (string) CSS selector of the element\r\n = (Element) the current element\r\n\\*/\r\nSnap.select = function (query) {\r\n    query = Str(query).replace(/([^\\\\]):/g, \"$1\\\\:\");\r\n    return wrap(glob.doc.querySelector(query));\r\n};\r\n/*\\\r\n * Snap.selectAll\r\n [ method ]\r\n **\r\n * Wraps DOM elements specified by CSS selector as set or array of @Element\r\n - query (string) CSS selector of the element\r\n = (Element) the current element\r\n\\*/\r\nSnap.selectAll = function (query) {\r\n    var nodelist = glob.doc.querySelectorAll(query),\r\n        set = (Snap.set || Array)();\r\n    for (var i = 0; i < nodelist.length; i++) {\r\n        set.push(wrap(nodelist[i]));\r\n    }\r\n    return set;\r\n};\r\n\r\nfunction add2group(list) {\r\n    if (!is(list, \"array\")) {\r\n        list = Array.prototype.slice.call(arguments, 0);\r\n    }\r\n    var i = 0,\r\n        j = 0,\r\n        node = this.node;\r\n    while (this[i]) delete this[i++];\r\n    for (i = 0; i < list.length; i++) {\r\n        if (list[i].type == \"set\") {\r\n            list[i].forEach(function (el) {\r\n                node.appendChild(el.node);\r\n            });\r\n        } else {\r\n            node.appendChild(list[i].node);\r\n        }\r\n    }\r\n    var children = node.childNodes;\r\n    for (i = 0; i < children.length; i++) {\r\n        this[j++] = wrap(children[i]);\r\n    }\r\n    return this;\r\n}\r\n// Hub garbage collector every 10s\r\nsetInterval(function () {\r\n    for (var key in hub) if (hub[has](key)) {\r\n        var el = hub[key],\r\n            node = el.node;\r\n        if (el.type != \"svg\" && !node.ownerSVGElement || el.type == \"svg\" && (!node.parentNode || \"ownerSVGElement\" in node.parentNode && !node.ownerSVGElement)) {\r\n            delete hub[key];\r\n        }\r\n    }\r\n}, 1e4);\r\nfunction Element(el) {\r\n    if (el.snap in hub) {\r\n        return hub[el.snap];\r\n    }\r\n    var svg;\r\n    try {\r\n        svg = el.ownerSVGElement;\r\n    } catch(e) {}\r\n    /*\\\r\n     * Element.node\r\n     [ property (object) ]\r\n     **\r\n     * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.\r\n     > Usage\r\n     | // draw a circle at coordinate 10,10 with radius of 10\r\n     | var c = paper.circle(10, 10, 10);\r\n     | c.node.onclick = function () {\r\n     |     c.attr(\"fill\", \"red\");\r\n     | };\r\n    \\*/\r\n    this.node = el;\r\n    if (svg) {\r\n        this.paper = new Paper(svg);\r\n    }\r\n    /*\\\r\n     * Element.type\r\n     [ property (string) ]\r\n     **\r\n     * SVG tag name of the given element.\r\n    \\*/\r\n    this.type = el.tagName || el.nodeName;\r\n    var id = this.id = ID(this);\r\n    this.anims = {};\r\n    this._ = {\r\n        transform: []\r\n    };\r\n    el.snap = id;\r\n    hub[id] = this;\r\n    if (this.type == \"g\") {\r\n        this.add = add2group;\r\n    }\r\n    if (this.type in {g: 1, mask: 1, pattern: 1, symbol: 1}) {\r\n        for (var method in Paper.prototype) if (Paper.prototype[has](method)) {\r\n            this[method] = Paper.prototype[method];\r\n        }\r\n    }\r\n}\r\n   /*\\\r\n     * Element.attr\r\n     [ method ]\r\n     **\r\n     * Gets or sets given attributes of the element.\r\n     **\r\n     - params (object) contains key-value pairs of attributes you want to set\r\n     * or\r\n     - param (string) name of the attribute\r\n     = (Element) the current element\r\n     * or\r\n     = (string) value of attribute\r\n     > Usage\r\n     | el.attr({\r\n     |     fill: \"#fc0\",\r\n     |     stroke: \"#000\",\r\n     |     strokeWidth: 2, // CamelCase...\r\n     |     \"fill-opacity\": 0.5, // or dash-separated names\r\n     |     width: \"*=2\" // prefixed values\r\n     | });\r\n     | console.log(el.attr(\"fill\")); // #fc0\r\n     * Prefixed values in format `\"+=10\"` supported. All four operations\r\n     * (`+`, `-`, `*` and `/`) could be used. Optionally you can use units for `+`\r\n     * and `-`: `\"+=2em\"`.\r\n    \\*/\r\n    Element.prototype.attr = function (params, value) {\r\n        var el = this,\r\n            node = el.node;\r\n        if (!params) {\r\n            if (node.nodeType != 1) {\r\n                return {\r\n                    text: node.nodeValue\r\n                };\r\n            }\r\n            var attr = node.attributes,\r\n                out = {};\r\n            for (var i = 0, ii = attr.length; i < ii; i++) {\r\n                out[attr[i].nodeName] = attr[i].nodeValue;\r\n            }\r\n            return out;\r\n        }\r\n        if (is(params, \"string\")) {\r\n            if (arguments.length > 1) {\r\n                var json = {};\r\n                json[params] = value;\r\n                params = json;\r\n            } else {\r\n                return eve(\"snap.util.getattr.\" + params, el).firstDefined();\r\n            }\r\n        }\r\n        for (var att in params) {\r\n            if (params[has](att)) {\r\n                eve(\"snap.util.attr.\" + att, el, params[att]);\r\n            }\r\n        }\r\n        return el;\r\n    };\r\n/*\\\r\n * Snap.parse\r\n [ method ]\r\n **\r\n * Parses SVG fragment and converts it into a @Fragment\r\n **\r\n - svg (string) SVG string\r\n = (Fragment) the @Fragment\r\n\\*/\r\nSnap.parse = function (svg) {\r\n    var f = glob.doc.createDocumentFragment(),\r\n        full = true,\r\n        div = glob.doc.createElement(\"div\");\r\n    svg = Str(svg);\r\n    if (!svg.match(/^\\s*<\\s*svg(?:\\s|>)/)) {\r\n        svg = \"<svg>\" + svg + \"</svg>\";\r\n        full = false;\r\n    }\r\n    div.innerHTML = svg;\r\n    svg = div.getElementsByTagName(\"svg\")[0];\r\n    if (svg) {\r\n        if (full) {\r\n            f = svg;\r\n        } else {\r\n            while (svg.firstChild) {\r\n                f.appendChild(svg.firstChild);\r\n            }\r\n        }\r\n    }\r\n    return new Fragment(f);\r\n};\r\nfunction Fragment(frag) {\r\n    this.node = frag;\r\n}\r\n/*\\\r\n * Snap.fragment\r\n [ method ]\r\n **\r\n * Creates a DOM fragment from a given list of elements or strings\r\n **\r\n - varargs (…) SVG string\r\n = (Fragment) the @Fragment\r\n\\*/\r\nSnap.fragment = function () {\r\n    var args = Array.prototype.slice.call(arguments, 0),\r\n        f = glob.doc.createDocumentFragment();\r\n    for (var i = 0, ii = args.length; i < ii; i++) {\r\n        var item = args[i];\r\n        if (item.node && item.node.nodeType) {\r\n            f.appendChild(item.node);\r\n        }\r\n        if (item.nodeType) {\r\n            f.appendChild(item);\r\n        }\r\n        if (typeof item == \"string\") {\r\n            f.appendChild(Snap.parse(item).node);\r\n        }\r\n    }\r\n    return new Fragment(f);\r\n};\r\n\r\nfunction make(name, parent) {\r\n    var res = $(name);\r\n    parent.appendChild(res);\r\n    var el = wrap(res);\r\n    return el;\r\n}\r\nfunction Paper(w, h) {\r\n    var res,\r\n        desc,\r\n        defs,\r\n        proto = Paper.prototype;\r\n    if (w && w.tagName && w.tagName.toLowerCase() == \"svg\") {\r\n        if (w.snap in hub) {\r\n            return hub[w.snap];\r\n        }\r\n        var doc = w.ownerDocument;\r\n        res = new Element(w);\r\n        desc = w.getElementsByTagName(\"desc\")[0];\r\n        defs = w.getElementsByTagName(\"defs\")[0];\r\n        if (!desc) {\r\n            desc = $(\"desc\");\r\n            desc.appendChild(doc.createTextNode(\"Created with Snap\"));\r\n            res.node.appendChild(desc);\r\n        }\r\n        if (!defs) {\r\n            defs = $(\"defs\");\r\n            res.node.appendChild(defs);\r\n        }\r\n        res.defs = defs;\r\n        for (var key in proto) if (proto[has](key)) {\r\n            res[key] = proto[key];\r\n        }\r\n        res.paper = res.root = res;\r\n    } else {\r\n        res = make(\"svg\", glob.doc.body);\r\n        $(res.node, {\r\n            height: h,\r\n            version: 1.1,\r\n            width: w,\r\n            xmlns: xmlns\r\n        });\r\n    }\r\n    return res;\r\n}\r\nfunction wrap(dom) {\r\n    if (!dom) {\r\n        return dom;\r\n    }\r\n    if (dom instanceof Element || dom instanceof Fragment) {\r\n        return dom;\r\n    }\r\n    if (dom.tagName && dom.tagName.toLowerCase() == \"svg\") {\r\n        return new Paper(dom);\r\n    }\r\n    if (dom.tagName && dom.tagName.toLowerCase() == \"object\" && dom.type == \"image/svg+xml\") {\r\n        return new Paper(dom.contentDocument.getElementsByTagName(\"svg\")[0]);\r\n    }\r\n    return new Element(dom);\r\n}\r\n\r\nSnap._.make = make;\r\nSnap._.wrap = wrap;\r\n/*\\\r\n * Paper.el\r\n [ method ]\r\n **\r\n * Creates an element on paper with a given name and no attributes\r\n **\r\n - name (string) tag name\r\n - attr (object) attributes\r\n = (Element) the current element\r\n > Usage\r\n | var c = paper.circle(10, 10, 10); // is the same as...\r\n | var c = paper.el(\"circle\").attr({\r\n |     cx: 10,\r\n |     cy: 10,\r\n |     r: 10\r\n | });\r\n | // and the same as\r\n | var c = paper.el(\"circle\", {\r\n |     cx: 10,\r\n |     cy: 10,\r\n |     r: 10\r\n | });\r\n\\*/\r\nPaper.prototype.el = function (name, attr) {\r\n    var el = make(name, this.node);\r\n    attr && el.attr(attr);\r\n    return el;\r\n};\r\n/*\\\r\n * Element.children\r\n [ method ]\r\n **\r\n * Returns array of all the children of the element.\r\n = (array) array of Elements\r\n\\*/\r\nElement.prototype.children = function () {\r\n    var out = [],\r\n        ch = this.node.childNodes;\r\n    for (var i = 0, ii = ch.length; i < ii; i++) {\r\n        out[i] = Snap(ch[i]);\r\n    }\r\n    return out;\r\n};\r\nfunction jsonFiller(root, o) {\r\n    for (var i = 0, ii = root.length; i < ii; i++) {\r\n        var item = {\r\n                type: root[i].type,\r\n                attr: root[i].attr()\r\n            },\r\n            children = root[i].children();\r\n        o.push(item);\r\n        if (children.length) {\r\n            jsonFiller(children, item.childNodes = []);\r\n        }\r\n    }\r\n}\r\n/*\\\r\n * Element.toJSON\r\n [ method ]\r\n **\r\n * Returns object representation of the given element and all its children.\r\n = (object) in format\r\n o {\r\n o     type (string) this.type,\r\n o     attr (object) attributes map,\r\n o     childNodes (array) optional array of children in the same format\r\n o }\r\n\\*/\r\nElement.prototype.toJSON = function () {\r\n    var out = [];\r\n    jsonFiller([this], out);\r\n    return out[0];\r\n};\r\n// default\r\neve.on(\"snap.util.getattr\", function () {\r\n    var att = eve.nt();\r\n    att = att.substring(att.lastIndexOf(\".\") + 1);\r\n    var css = att.replace(/[A-Z]/g, function (letter) {\r\n        return \"-\" + letter.toLowerCase();\r\n    });\r\n    if (cssAttr[has](css)) {\r\n        return this.node.ownerDocument.defaultView.getComputedStyle(this.node, null).getPropertyValue(css);\r\n    } else {\r\n        return $(this.node, att);\r\n    }\r\n});\r\nvar cssAttr = {\r\n    \"alignment-baseline\": 0,\r\n    \"baseline-shift\": 0,\r\n    \"clip\": 0,\r\n    \"clip-path\": 0,\r\n    \"clip-rule\": 0,\r\n    \"color\": 0,\r\n    \"color-interpolation\": 0,\r\n    \"color-interpolation-filters\": 0,\r\n    \"color-profile\": 0,\r\n    \"color-rendering\": 0,\r\n    \"cursor\": 0,\r\n    \"direction\": 0,\r\n    \"display\": 0,\r\n    \"dominant-baseline\": 0,\r\n    \"enable-background\": 0,\r\n    \"fill\": 0,\r\n    \"fill-opacity\": 0,\r\n    \"fill-rule\": 0,\r\n    \"filter\": 0,\r\n    \"flood-color\": 0,\r\n    \"flood-opacity\": 0,\r\n    \"font\": 0,\r\n    \"font-family\": 0,\r\n    \"font-size\": 0,\r\n    \"font-size-adjust\": 0,\r\n    \"font-stretch\": 0,\r\n    \"font-style\": 0,\r\n    \"font-variant\": 0,\r\n    \"font-weight\": 0,\r\n    \"glyph-orientation-horizontal\": 0,\r\n    \"glyph-orientation-vertical\": 0,\r\n    \"image-rendering\": 0,\r\n    \"kerning\": 0,\r\n    \"letter-spacing\": 0,\r\n    \"lighting-color\": 0,\r\n    \"marker\": 0,\r\n    \"marker-end\": 0,\r\n    \"marker-mid\": 0,\r\n    \"marker-start\": 0,\r\n    \"mask\": 0,\r\n    \"opacity\": 0,\r\n    \"overflow\": 0,\r\n    \"pointer-events\": 0,\r\n    \"shape-rendering\": 0,\r\n    \"stop-color\": 0,\r\n    \"stop-opacity\": 0,\r\n    \"stroke\": 0,\r\n    \"stroke-dasharray\": 0,\r\n    \"stroke-dashoffset\": 0,\r\n    \"stroke-linecap\": 0,\r\n    \"stroke-linejoin\": 0,\r\n    \"stroke-miterlimit\": 0,\r\n    \"stroke-opacity\": 0,\r\n    \"stroke-width\": 0,\r\n    \"text-anchor\": 0,\r\n    \"text-decoration\": 0,\r\n    \"text-rendering\": 0,\r\n    \"unicode-bidi\": 0,\r\n    \"visibility\": 0,\r\n    \"word-spacing\": 0,\r\n    \"writing-mode\": 0\r\n};\r\n\r\neve.on(\"snap.util.attr\", function (value) {\r\n    var att = eve.nt(),\r\n        attr = {};\r\n    att = att.substring(att.lastIndexOf(\".\") + 1);\r\n    attr[att] = value;\r\n    var style = att.replace(/-(\\w)/gi, function (all, letter) {\r\n            return letter.toUpperCase();\r\n        }),\r\n        css = att.replace(/[A-Z]/g, function (letter) {\r\n            return \"-\" + letter.toLowerCase();\r\n        });\r\n    if (cssAttr[has](css)) {\r\n        this.node.style[style] = value == null ? E : value;\r\n    } else {\r\n        $(this.node, attr);\r\n    }\r\n});\r\n(function (proto) {}(Paper.prototype));\r\n\r\n// simple ajax\r\n/*\\\r\n * Snap.ajax\r\n [ method ]\r\n **\r\n * Simple implementation of Ajax\r\n **\r\n - url (string) URL\r\n - postData (object|string) data for post request\r\n - callback (function) callback\r\n - scope (object) #optional scope of callback\r\n * or\r\n - url (string) URL\r\n - callback (function) callback\r\n - scope (object) #optional scope of callback\r\n = (XMLHttpRequest) the XMLHttpRequest object, just in case\r\n\\*/\r\nSnap.ajax = function (url, postData, callback, scope){\r\n    var req = new XMLHttpRequest,\r\n        id = ID();\r\n    if (req) {\r\n        if (is(postData, \"function\")) {\r\n            scope = callback;\r\n            callback = postData;\r\n            postData = null;\r\n        } else if (is(postData, \"object\")) {\r\n            var pd = [];\r\n            for (var key in postData) if (postData.hasOwnProperty(key)) {\r\n                pd.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(postData[key]));\r\n            }\r\n            postData = pd.join(\"&\");\r\n        }\r\n        req.open(postData ? \"POST\" : \"GET\", url, true);\r\n        if (postData) {\r\n            req.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            req.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n        }\r\n        if (callback) {\r\n            eve.once(\"snap.ajax.\" + id + \".0\", callback);\r\n            eve.once(\"snap.ajax.\" + id + \".200\", callback);\r\n            eve.once(\"snap.ajax.\" + id + \".304\", callback);\r\n        }\r\n        req.onreadystatechange = function() {\r\n            if (req.readyState != 4) return;\r\n            eve(\"snap.ajax.\" + id + \".\" + req.status, scope, req);\r\n        };\r\n        if (req.readyState == 4) {\r\n            return req;\r\n        }\r\n        req.send(postData);\r\n        return req;\r\n    }\r\n};\r\n/*\\\r\n * Snap.load\r\n [ method ]\r\n **\r\n * Loads external SVG file as a @Fragment (see @Snap.ajax for more advanced AJAX)\r\n **\r\n - url (string) URL\r\n - callback (function) callback\r\n - scope (object) #optional scope of callback\r\n\\*/\r\nSnap.load = function (url, callback, scope) {\r\n    Snap.ajax(url, function (req) {\r\n        var f = Snap.parse(req.responseText);\r\n        scope ? callback.call(scope, f) : callback(f);\r\n    });\r\n};\r\nvar getOffset = function (elem) {\r\n    var box = elem.getBoundingClientRect(),\r\n        doc = elem.ownerDocument,\r\n        body = doc.body,\r\n        docElem = doc.documentElement,\r\n        clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\r\n        top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,\r\n        left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\r\n    return {\r\n        y: top,\r\n        x: left\r\n    };\r\n};\r\n/*\\\r\n * Snap.getElementByPoint\r\n [ method ]\r\n **\r\n * Returns you topmost element under given point.\r\n **\r\n = (object) Snap element object\r\n - x (number) x coordinate from the top left corner of the window\r\n - y (number) y coordinate from the top left corner of the window\r\n > Usage\r\n | Snap.getElementByPoint(mouseX, mouseY).attr({stroke: \"#f00\"});\r\n\\*/\r\nSnap.getElementByPoint = function (x, y) {\r\n    var paper = this,\r\n        svg = paper.canvas,\r\n        target = glob.doc.elementFromPoint(x, y);\r\n    if (glob.win.opera && target.tagName == \"svg\") {\r\n        var so = getOffset(target),\r\n            sr = target.createSVGRect();\r\n        sr.x = x - so.x;\r\n        sr.y = y - so.y;\r\n        sr.width = sr.height = 1;\r\n        var hits = target.getIntersectionList(sr, null);\r\n        if (hits.length) {\r\n            target = hits[hits.length - 1];\r\n        }\r\n    }\r\n    if (!target) {\r\n        return null;\r\n    }\r\n    return wrap(target);\r\n};\r\n/*\\\r\n * Snap.plugin\r\n [ method ]\r\n **\r\n * Let you write plugins. You pass in a function with five arguments, like this:\r\n | Snap.plugin(function (Snap, Element, Paper, global, Fragment) {\r\n |     Snap.newmethod = function () {};\r\n |     Element.prototype.newmethod = function () {};\r\n |     Paper.prototype.newmethod = function () {};\r\n | });\r\n * Inside the function you have access to all main objects (and their\r\n * prototypes). This allow you to extend anything you want.\r\n **\r\n - f (function) your plugin body\r\n\\*/\r\nSnap.plugin = function (f) {\r\n    f(Snap, Element, Paper, glob, Fragment);\r\n};\r\nglob.win.Snap = Snap;\r\nreturn Snap;\r\n}(window || this));\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var elproto = Element.prototype,\r\n        is = Snap.is,\r\n        Str = String,\r\n        unit2px = Snap._unit2px,\r\n        $ = Snap._.$,\r\n        make = Snap._.make,\r\n        getSomeDefs = Snap._.getSomeDefs,\r\n        has = \"hasOwnProperty\",\r\n        wrap = Snap._.wrap;\r\n    /*\\\r\n     * Element.getBBox\r\n     [ method ]\r\n     **\r\n     * Returns the bounding box descriptor for the given element\r\n     **\r\n     = (object) bounding box descriptor:\r\n     o {\r\n     o     cx: (number) x of the center,\r\n     o     cy: (number) x of the center,\r\n     o     h: (number) height,\r\n     o     height: (number) height,\r\n     o     path: (string) path command for the box,\r\n     o     r0: (number) radius of a circle that fully encloses the box,\r\n     o     r1: (number) radius of the smallest circle that can be enclosed,\r\n     o     r2: (number) radius of the largest circle that can be enclosed,\r\n     o     vb: (string) box as a viewbox command,\r\n     o     w: (number) width,\r\n     o     width: (number) width,\r\n     o     x2: (number) x of the right side,\r\n     o     x: (number) x of the left side,\r\n     o     y2: (number) y of the bottom edge,\r\n     o     y: (number) y of the top edge\r\n     o }\r\n    \\*/\r\n    elproto.getBBox = function (isWithoutTransform) {\r\n        if (this.type == \"tspan\") {\r\n            return Snap._.box(this.node.getClientRects().item(0));\r\n        }\r\n        if (!Snap.Matrix || !Snap.path) {\r\n            return this.node.getBBox();\r\n        }\r\n        var el = this,\r\n            m = new Snap.Matrix;\r\n        if (el.removed) {\r\n            return Snap._.box();\r\n        }\r\n        while (el.type == \"use\") {\r\n            if (!isWithoutTransform) {\r\n                m = m.add(el.transform().localMatrix.translate(el.attr(\"x\") || 0, el.attr(\"y\") || 0));\r\n            }\r\n            if (el.original) {\r\n                el = el.original;\r\n            } else {\r\n                var href = el.attr(\"xlink:href\");\r\n                el = el.original = el.node.ownerDocument.getElementById(href.substring(href.indexOf(\"#\") + 1));\r\n            }\r\n        }\r\n        var _ = el._,\r\n            pathfinder = Snap.path.get[el.type] || Snap.path.get.deflt;\r\n        try {\r\n            if (isWithoutTransform) {\r\n                _.bboxwt = pathfinder ? Snap.path.getBBox(el.realPath = pathfinder(el)) : Snap._.box(el.node.getBBox());\r\n                return Snap._.box(_.bboxwt);\r\n            } else {\r\n                el.realPath = pathfinder(el);\r\n                el.matrix = el.transform().localMatrix;\r\n                _.bbox = Snap.path.getBBox(Snap.path.map(el.realPath, m.add(el.matrix)));\r\n                return Snap._.box(_.bbox);\r\n            }\r\n        } catch (e) {\r\n            // Firefox doesn’t give you bbox of hidden element\r\n            return Snap._.box();\r\n        }\r\n    };\r\n    var propString = function () {\r\n        return this.string;\r\n    };\r\n    function extractTransform(el, tstr) {\r\n        if (tstr == null) {\r\n            var doReturn = true;\r\n            if (el.type == \"linearGradient\" || el.type == \"radialGradient\") {\r\n                tstr = el.node.getAttribute(\"gradientTransform\");\r\n            } else if (el.type == \"pattern\") {\r\n                tstr = el.node.getAttribute(\"patternTransform\");\r\n            } else {\r\n                tstr = el.node.getAttribute(\"transform\");\r\n            }\r\n            if (!tstr) {\r\n                return new Snap.Matrix;\r\n            }\r\n            tstr = Snap._.svgTransform2string(tstr);\r\n        } else {\r\n            if (!Snap._.rgTransform.test(tstr)) {\r\n                tstr = Snap._.svgTransform2string(tstr);\r\n            } else {\r\n                tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, el._.transform || \"\");\r\n            }\r\n            if (is(tstr, \"array\")) {\r\n                tstr = Snap.path ? Snap.path.toString.call(tstr) : Str(tstr);\r\n            }\r\n            el._.transform = tstr;\r\n        }\r\n        var m = Snap._.transform2matrix(tstr, el.getBBox(1));\r\n        if (doReturn) {\r\n            return m;\r\n        } else {\r\n            el.matrix = m;\r\n        }\r\n    }\r\n    /*\\\r\n     * Element.transform\r\n     [ method ]\r\n     **\r\n     * Gets or sets transformation of the element\r\n     **\r\n     - tstr (string) transform string in Snap or SVG format\r\n     = (Element) the current element\r\n     * or\r\n     = (object) transformation descriptor:\r\n     o {\r\n     o     string (string) transform string,\r\n     o     globalMatrix (Matrix) matrix of all transformations applied to element or its parents,\r\n     o     localMatrix (Matrix) matrix of transformations applied only to the element,\r\n     o     diffMatrix (Matrix) matrix of difference between global and local transformations,\r\n     o     global (string) global transformation as string,\r\n     o     local (string) local transformation as string,\r\n     o     toString (function) returns `string` property\r\n     o }\r\n    \\*/\r\n    elproto.transform = function (tstr) {\r\n        var _ = this._;\r\n        if (tstr == null) {\r\n            var papa = this,\r\n                global = new Snap.Matrix(this.node.getCTM()),\r\n                local = extractTransform(this),\r\n                ms = [local],\r\n                m = new Snap.Matrix,\r\n                i,\r\n                localString = local.toTransformString(),\r\n                string = Str(local) == Str(this.matrix) ?\r\n                            Str(_.transform) : localString;\r\n            while (papa.type != \"svg\" && (papa = papa.parent())) {\r\n                ms.push(extractTransform(papa));\r\n            }\r\n            i = ms.length;\r\n            while (i--) {\r\n                m.add(ms[i]);\r\n            }\r\n            return {\r\n                string: string,\r\n                globalMatrix: global,\r\n                totalMatrix: m,\r\n                localMatrix: local,\r\n                diffMatrix: global.clone().add(local.invert()),\r\n                global: global.toTransformString(),\r\n                total: m.toTransformString(),\r\n                local: localString,\r\n                toString: propString\r\n            };\r\n        }\r\n        if (tstr instanceof Snap.Matrix) {\r\n            this.matrix = tstr;\r\n            this._.transform = tstr.toTransformString();\r\n        } else {\r\n            extractTransform(this, tstr);\r\n        }\r\n\r\n        if (this.node) {\r\n            if (this.type == \"linearGradient\" || this.type == \"radialGradient\") {\r\n                $(this.node, {gradientTransform: this.matrix});\r\n            } else if (this.type == \"pattern\") {\r\n                $(this.node, {patternTransform: this.matrix});\r\n            } else {\r\n                $(this.node, {transform: this.matrix});\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.parent\r\n     [ method ]\r\n     **\r\n     * Returns the element's parent\r\n     **\r\n     = (Element) the parent element\r\n    \\*/\r\n    elproto.parent = function () {\r\n        return wrap(this.node.parentNode);\r\n    };\r\n    /*\\\r\n     * Element.append\r\n     [ method ]\r\n     **\r\n     * Appends the given element to current one\r\n     **\r\n     - el (Element|Set) element to append\r\n     = (Element) the parent element\r\n    \\*/\r\n    /*\\\r\n     * Element.add\r\n     [ method ]\r\n     **\r\n     * See @Element.append\r\n    \\*/\r\n    elproto.append = elproto.add = function (el) {\r\n        if (el) {\r\n            if (el.type == \"set\") {\r\n                var it = this;\r\n                el.forEach(function (el) {\r\n                    it.add(el);\r\n                });\r\n                return this;\r\n            }\r\n            el = wrap(el);\r\n            this.node.appendChild(el.node);\r\n            el.paper = this.paper;\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.appendTo\r\n     [ method ]\r\n     **\r\n     * Appends the current element to the given one\r\n     **\r\n     - el (Element) parent element to append to\r\n     = (Element) the child element\r\n    \\*/\r\n    elproto.appendTo = function (el) {\r\n        if (el) {\r\n            el = wrap(el);\r\n            el.append(this);\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.prepend\r\n     [ method ]\r\n     **\r\n     * Prepends the given element to the current one\r\n     **\r\n     - el (Element) element to prepend\r\n     = (Element) the parent element\r\n    \\*/\r\n    elproto.prepend = function (el) {\r\n        if (el) {\r\n            if (el.type == \"set\") {\r\n                var it = this,\r\n                    first;\r\n                el.forEach(function (el) {\r\n                    if (first) {\r\n                        first.after(el);\r\n                    } else {\r\n                        it.prepend(el);\r\n                    }\r\n                    first = el;\r\n                });\r\n                return this;\r\n            }\r\n            el = wrap(el);\r\n            var parent = el.parent();\r\n            this.node.insertBefore(el.node, this.node.firstChild);\r\n            this.add && this.add();\r\n            el.paper = this.paper;\r\n            this.parent() && this.parent().add();\r\n            parent && parent.add();\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.prependTo\r\n     [ method ]\r\n     **\r\n     * Prepends the current element to the given one\r\n     **\r\n     - el (Element) parent element to prepend to\r\n     = (Element) the child element\r\n    \\*/\r\n    elproto.prependTo = function (el) {\r\n        el = wrap(el);\r\n        el.prepend(this);\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.before\r\n     [ method ]\r\n     **\r\n     * Inserts given element before the current one\r\n     **\r\n     - el (Element) element to insert\r\n     = (Element) the parent element\r\n    \\*/\r\n    elproto.before = function (el) {\r\n        if (el.type == \"set\") {\r\n            var it = this;\r\n            el.forEach(function (el) {\r\n                var parent = el.parent();\r\n                it.node.parentNode.insertBefore(el.node, it.node);\r\n                parent && parent.add();\r\n            });\r\n            this.parent().add();\r\n            return this;\r\n        }\r\n        el = wrap(el);\r\n        var parent = el.parent();\r\n        this.node.parentNode.insertBefore(el.node, this.node);\r\n        this.parent() && this.parent().add();\r\n        parent && parent.add();\r\n        el.paper = this.paper;\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.after\r\n     [ method ]\r\n     **\r\n     * Inserts given element after the current one\r\n     **\r\n     - el (Element) element to insert\r\n     = (Element) the parent element\r\n    \\*/\r\n    elproto.after = function (el) {\r\n        el = wrap(el);\r\n        var parent = el.parent();\r\n        if (this.node.nextSibling) {\r\n            this.node.parentNode.insertBefore(el.node, this.node.nextSibling);\r\n        } else {\r\n            this.node.parentNode.appendChild(el.node);\r\n        }\r\n        this.parent() && this.parent().add();\r\n        parent && parent.add();\r\n        el.paper = this.paper;\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.insertBefore\r\n     [ method ]\r\n     **\r\n     * Inserts the element after the given one\r\n     **\r\n     - el (Element) element next to whom insert to\r\n     = (Element) the parent element\r\n    \\*/\r\n    elproto.insertBefore = function (el) {\r\n        el = wrap(el);\r\n        var parent = this.parent();\r\n        el.node.parentNode.insertBefore(this.node, el.node);\r\n        this.paper = el.paper;\r\n        parent && parent.add();\r\n        el.parent() && el.parent().add();\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.insertAfter\r\n     [ method ]\r\n     **\r\n     * Inserts the element after the given one\r\n     **\r\n     - el (Element) element next to whom insert to\r\n     = (Element) the parent element\r\n    \\*/\r\n    elproto.insertAfter = function (el) {\r\n        el = wrap(el);\r\n        var parent = this.parent();\r\n        el.node.parentNode.insertBefore(this.node, el.node.nextSibling);\r\n        this.paper = el.paper;\r\n        parent && parent.add();\r\n        el.parent() && el.parent().add();\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.remove\r\n     [ method ]\r\n     **\r\n     * Removes element from the DOM\r\n     = (Element) the detached element\r\n    \\*/\r\n    elproto.remove = function () {\r\n        var parent = this.parent();\r\n        this.node.parentNode && this.node.parentNode.removeChild(this.node);\r\n        delete this.paper;\r\n        this.removed = true;\r\n        parent && parent.add();\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.select\r\n     [ method ]\r\n     **\r\n     * Gathers the nested @Element matching the given set of CSS selectors\r\n     **\r\n     - query (string) CSS selector\r\n     = (Element) result of query selection\r\n    \\*/\r\n    elproto.select = function (query) {\r\n        return wrap(this.node.querySelector(query));\r\n    };\r\n    /*\\\r\n     * Element.selectAll\r\n     [ method ]\r\n     **\r\n     * Gathers nested @Element objects matching the given set of CSS selectors\r\n     **\r\n     - query (string) CSS selector\r\n     = (Set|array) result of query selection\r\n    \\*/\r\n    elproto.selectAll = function (query) {\r\n        var nodelist = this.node.querySelectorAll(query),\r\n            set = (Snap.set || Array)();\r\n        for (var i = 0; i < nodelist.length; i++) {\r\n            set.push(wrap(nodelist[i]));\r\n        }\r\n        return set;\r\n    };\r\n    /*\\\r\n     * Element.asPX\r\n     [ method ]\r\n     **\r\n     * Returns given attribute of the element as a `px` value (not %, em, etc.)\r\n     **\r\n     - attr (string) attribute name\r\n     - value (string) #optional attribute value\r\n     = (Element) result of query selection\r\n    \\*/\r\n    elproto.asPX = function (attr, value) {\r\n        if (value == null) {\r\n            value = this.attr(attr);\r\n        }\r\n        return +unit2px(this, attr, value);\r\n    };\r\n    // SIERRA Element.use(): I suggest adding a note about how to access the original element the returned <use> instantiates. It's a part of SVG with which ordinary web developers may be least familiar.\r\n    /*\\\r\n     * Element.use\r\n     [ method ]\r\n     **\r\n     * Creates a `<use>` element linked to the current element\r\n     **\r\n     = (Element) the `<use>` element\r\n    \\*/\r\n    elproto.use = function () {\r\n        var use,\r\n            id = this.node.id;\r\n        if (!id) {\r\n            id = this.id;\r\n            $(this.node, {\r\n                id: id\r\n            });\r\n        }\r\n        if (this.type == \"linearGradient\" || this.type == \"radialGradient\" ||\r\n            this.type == \"pattern\") {\r\n            use = make(this.type, this.node.parentNode);\r\n        } else {\r\n            use = make(\"use\", this.node.parentNode);\r\n        }\r\n        $(use.node, {\r\n            \"xlink:href\": \"#\" + id\r\n        });\r\n        use.original = this;\r\n        return use;\r\n    };\r\n    function fixids(el) {\r\n        var els = el.selectAll(\"*\"),\r\n            it,\r\n            url = /^\\s*url\\((\"|'|)(.*)\\1\\)\\s*$/,\r\n            ids = [],\r\n            uses = {};\r\n        function urltest(it, name) {\r\n            var val = $(it.node, name);\r\n            val = val && val.match(url);\r\n            val = val && val[2];\r\n            if (val && val.charAt() == \"#\") {\r\n                val = val.substring(1);\r\n            } else {\r\n                return;\r\n            }\r\n            if (val) {\r\n                uses[val] = (uses[val] || []).concat(function (id) {\r\n                    var attr = {};\r\n                    attr[name] = Snap.url(id);\r\n                    $(it.node, attr);\r\n                });\r\n            }\r\n        }\r\n        function linktest(it) {\r\n            var val = $(it.node, \"xlink:href\");\r\n            if (val && val.charAt() == \"#\") {\r\n                val = val.substring(1);\r\n            } else {\r\n                return;\r\n            }\r\n            if (val) {\r\n                uses[val] = (uses[val] || []).concat(function (id) {\r\n                    it.attr(\"xlink:href\", \"#\" + id);\r\n                });\r\n            }\r\n        }\r\n        for (var i = 0, ii = els.length; i < ii; i++) {\r\n            it = els[i];\r\n            urltest(it, \"fill\");\r\n            urltest(it, \"stroke\");\r\n            urltest(it, \"filter\");\r\n            urltest(it, \"mask\");\r\n            urltest(it, \"clip-path\");\r\n            linktest(it);\r\n            var oldid = $(it.node, \"id\");\r\n            if (oldid) {\r\n                $(it.node, {id: it.id});\r\n                ids.push({\r\n                    old: oldid,\r\n                    id: it.id\r\n                });\r\n            }\r\n        }\r\n        for (i = 0, ii = ids.length; i < ii; i++) {\r\n            var fs = uses[ids[i].old];\r\n            if (fs) {\r\n                for (var j = 0, jj = fs.length; j < jj; j++) {\r\n                    fs[j](ids[i].id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /*\\\r\n     * Element.clone\r\n     [ method ]\r\n     **\r\n     * Creates a clone of the element and inserts it after the element\r\n     **\r\n     = (Element) the clone\r\n    \\*/\r\n    elproto.clone = function () {\r\n        var clone = wrap(this.node.cloneNode(true));\r\n        if ($(clone.node, \"id\")) {\r\n            $(clone.node, {id: clone.id});\r\n        }\r\n        fixids(clone);\r\n        clone.insertAfter(this);\r\n        return clone;\r\n    };\r\n    /*\\\r\n     * Element.toDefs\r\n     [ method ]\r\n     **\r\n     * Moves element to the shared `<defs>` area\r\n     **\r\n     = (Element) the element\r\n    \\*/\r\n    elproto.toDefs = function () {\r\n        var defs = getSomeDefs(this);\r\n        defs.appendChild(this.node);\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.toPattern\r\n     [ method ]\r\n     **\r\n     * Creates a `<pattern>` element from the current element\r\n     **\r\n     * To create a pattern you have to specify the pattern rect:\r\n     - x (string|number)\r\n     - y (string|number)\r\n     - width (string|number)\r\n     - height (string|number)\r\n     = (Element) the `<pattern>` element\r\n     * You can use pattern later on as an argument for `fill` attribute:\r\n     | var p = paper.path(\"M10-5-10,15M15,0,0,15M0-5-20,15\").attr({\r\n     |         fill: \"none\",\r\n     |         stroke: \"#bada55\",\r\n     |         strokeWidth: 5\r\n     |     }).pattern(0, 0, 10, 10),\r\n     |     c = paper.circle(200, 200, 100);\r\n     | c.attr({\r\n     |     fill: p\r\n     | });\r\n    \\*/\r\n    elproto.pattern = elproto.toPattern = function (x, y, width, height) {\r\n        var p = make(\"pattern\", getSomeDefs(this));\r\n        if (x == null) {\r\n            x = this.getBBox();\r\n        }\r\n        if (is(x, \"object\") && \"x\" in x) {\r\n            y = x.y;\r\n            width = x.width;\r\n            height = x.height;\r\n            x = x.x;\r\n        }\r\n        $(p.node, {\r\n            x: x,\r\n            y: y,\r\n            width: width,\r\n            height: height,\r\n            patternUnits: \"userSpaceOnUse\",\r\n            id: p.id,\r\n            viewBox: [x, y, width, height].join(\" \")\r\n        });\r\n        p.node.appendChild(this.node);\r\n        return p;\r\n    };\r\n// SIERRA Element.marker(): clarify what a reference point is. E.g., helps you offset the object from its edge such as when centering it over a path.\r\n// SIERRA Element.marker(): I suggest the method should accept default reference point values.  Perhaps centered with (refX = width/2) and (refY = height/2)? Also, couldn't it assume the element's current _width_ and _height_? And please specify what _x_ and _y_ mean: offsets? If so, from where?  Couldn't they also be assigned default values?\r\n    /*\\\r\n     * Element.marker\r\n     [ method ]\r\n     **\r\n     * Creates a `<marker>` element from the current element\r\n     **\r\n     * To create a marker you have to specify the bounding rect and reference point:\r\n     - x (number)\r\n     - y (number)\r\n     - width (number)\r\n     - height (number)\r\n     - refX (number)\r\n     - refY (number)\r\n     = (Element) the `<marker>` element\r\n     * You can specify the marker later as an argument for `marker-start`, `marker-end`, `marker-mid`, and `marker` attributes. The `marker` attribute places the marker at every point along the path, and `marker-mid` places them at every point except the start and end.\r\n    \\*/\r\n    // TODO add usage for markers\r\n    elproto.marker = function (x, y, width, height, refX, refY) {\r\n        var p = make(\"marker\", getSomeDefs(this));\r\n        if (x == null) {\r\n            x = this.getBBox();\r\n        }\r\n        if (is(x, \"object\") && \"x\" in x) {\r\n            y = x.y;\r\n            width = x.width;\r\n            height = x.height;\r\n            refX = x.refX || x.cx;\r\n            refY = x.refY || x.cy;\r\n            x = x.x;\r\n        }\r\n        $(p.node, {\r\n            viewBox: [x, y, width, height].join(\" \"),\r\n            markerWidth: width,\r\n            markerHeight: height,\r\n            orient: \"auto\",\r\n            refX: refX || 0,\r\n            refY: refY || 0,\r\n            id: p.id\r\n        });\r\n        p.node.appendChild(this.node);\r\n        return p;\r\n    };\r\n    var eldata = {};\r\n    /*\\\r\n     * Element.data\r\n     [ method ]\r\n     **\r\n     * Adds or retrieves given value associated with given key. (Don’t confuse\r\n     * with `data-` attributes)\r\n     *\r\n     * See also @Element.removeData\r\n     - key (string) key to store data\r\n     - value (any) #optional value to store\r\n     = (object) @Element\r\n     * or, if value is not specified:\r\n     = (any) value\r\n     > Usage\r\n     | for (var i = 0, i < 5, i++) {\r\n     |     paper.circle(10 + 15 * i, 10, 10)\r\n     |          .attr({fill: \"#000\"})\r\n     |          .data(\"i\", i)\r\n     |          .click(function () {\r\n     |             alert(this.data(\"i\"));\r\n     |          });\r\n     | }\r\n    \\*/\r\n    elproto.data = function (key, value) {\r\n        var data = eldata[this.id] = eldata[this.id] || {};\r\n        if (arguments.length == 0){\r\n            eve(\"snap.data.get.\" + this.id, this, data, null);\r\n            return data;\r\n        }\r\n        if (arguments.length == 1) {\r\n            if (Snap.is(key, \"object\")) {\r\n                for (var i in key) if (key[has](i)) {\r\n                    this.data(i, key[i]);\r\n                }\r\n                return this;\r\n            }\r\n            eve(\"snap.data.get.\" + this.id, this, data[key], key);\r\n            return data[key];\r\n        }\r\n        data[key] = value;\r\n        eve(\"snap.data.set.\" + this.id, this, value, key);\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.removeData\r\n     [ method ]\r\n     **\r\n     * Removes value associated with an element by given key.\r\n     * If key is not provided, removes all the data of the element.\r\n     - key (string) #optional key\r\n     = (object) @Element\r\n    \\*/\r\n    elproto.removeData = function (key) {\r\n        if (key == null) {\r\n            eldata[this.id] = {};\r\n        } else {\r\n            eldata[this.id] && delete eldata[this.id][key];\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.outerSVG\r\n     [ method ]\r\n     **\r\n     * Returns SVG code for the element, equivalent to HTML's `outerHTML`.\r\n     *\r\n     * See also @Element.innerSVG\r\n     = (string) SVG code for the element\r\n    \\*/\r\n    /*\\\r\n     * Element.toString\r\n     [ method ]\r\n     **\r\n     * See @Element.outerSVG\r\n    \\*/\r\n    elproto.outerSVG = elproto.toString = toString(1);\r\n    /*\\\r\n     * Element.innerSVG\r\n     [ method ]\r\n     **\r\n     * Returns SVG code for the element's contents, equivalent to HTML's `innerHTML`\r\n     = (string) SVG code for the element\r\n    \\*/\r\n    elproto.innerSVG = toString();\r\n    function toString(type) {\r\n        return function () {\r\n            var res = type ? \"<\" + this.type : \"\",\r\n                attr = this.node.attributes,\r\n                chld = this.node.childNodes;\r\n            if (type) {\r\n                for (var i = 0, ii = attr.length; i < ii; i++) {\r\n                    res += \" \" + attr[i].name + '=\"' +\r\n                            attr[i].value.replace(/\"/g, '\\\\\"') + '\"';\r\n                }\r\n            }\r\n            if (chld.length) {\r\n                type && (res += \">\");\r\n                for (i = 0, ii = chld.length; i < ii; i++) {\r\n                    if (chld[i].nodeType == 3) {\r\n                        res += chld[i].nodeValue;\r\n                    } else if (chld[i].nodeType == 1) {\r\n                        res += wrap(chld[i]).toString();\r\n                    }\r\n                }\r\n                type && (res += \"</\" + this.type + \">\");\r\n            } else {\r\n                type && (res += \"/>\");\r\n            }\r\n            return res;\r\n        };\r\n    }\r\n    elproto.toDataURL = function () {\r\n        if (window && window.btoa) {\r\n            var bb = this.getBBox(),\r\n                svg = Snap.format('<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"{width}\" height=\"{height}\" viewBox=\"{x} {y} {width} {height}\">{contents}</svg>', {\r\n                x: +bb.x.toFixed(3),\r\n                y: +bb.y.toFixed(3),\r\n                width: +bb.width.toFixed(3),\r\n                height: +bb.height.toFixed(3),\r\n                contents: this.outerSVG()\r\n            });\r\n            return \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(svg)));\r\n        }\r\n    };\r\n    /*\\\r\n     * Fragment.select\r\n     [ method ]\r\n     **\r\n     * See @Element.select\r\n    \\*/\r\n    Fragment.prototype.select = elproto.select;\r\n    /*\\\r\n     * Fragment.selectAll\r\n     [ method ]\r\n     **\r\n     * See @Element.selectAll\r\n    \\*/\r\n    Fragment.prototype.selectAll = elproto.selectAll;\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var objectToString = Object.prototype.toString,\r\n        Str = String,\r\n        math = Math,\r\n        E = \"\";\r\n    function Matrix(a, b, c, d, e, f) {\r\n        if (b == null && objectToString.call(a) == \"[object SVGMatrix]\") {\r\n            this.a = a.a;\r\n            this.b = a.b;\r\n            this.c = a.c;\r\n            this.d = a.d;\r\n            this.e = a.e;\r\n            this.f = a.f;\r\n            return;\r\n        }\r\n        if (a != null) {\r\n            this.a = +a;\r\n            this.b = +b;\r\n            this.c = +c;\r\n            this.d = +d;\r\n            this.e = +e;\r\n            this.f = +f;\r\n        } else {\r\n            this.a = 1;\r\n            this.b = 0;\r\n            this.c = 0;\r\n            this.d = 1;\r\n            this.e = 0;\r\n            this.f = 0;\r\n        }\r\n    }\r\n    (function (matrixproto) {\r\n        /*\\\r\n         * Matrix.add\r\n         [ method ]\r\n         **\r\n         * Adds the given matrix to existing one\r\n         - a (number)\r\n         - b (number)\r\n         - c (number)\r\n         - d (number)\r\n         - e (number)\r\n         - f (number)\r\n         * or\r\n         - matrix (object) @Matrix\r\n        \\*/\r\n        matrixproto.add = function (a, b, c, d, e, f) {\r\n            if (a && a instanceof Matrix) {\r\n                return this.add(a.a, a.b, a.c, a.d, a.e, a.f);\r\n            }\r\n            var aNew = a * this.a + b * this.c,\r\n                bNew = a * this.b + b * this.d;\r\n            this.e += e * this.a + f * this.c;\r\n            this.f += e * this.b + f * this.d;\r\n            this.c = c * this.a + d * this.c;\r\n            this.d = c * this.b + d * this.d;\r\n\r\n            this.a = aNew;\r\n            this.b = bNew;\r\n            return this;\r\n        };\r\n        /*\\\r\n         * Matrix.multLeft\r\n         [ method ]\r\n         **\r\n         * Multiplies a passed affine transform to the left: M * this.\r\n         - a (number)\r\n         - b (number)\r\n         - c (number)\r\n         - d (number)\r\n         - e (number)\r\n         - f (number)\r\n         * or\r\n         - matrix (object) @Matrix\r\n        \\*/\r\n        Matrix.prototype.multLeft = function (a, b, c, d, e, f) {\r\n            if (a && a instanceof Matrix) {\r\n                return this.multLeft(a.a, a.b, a.c, a.d, a.e, a.f);\r\n            }\r\n            var aNew = a * this.a + c * this.b,\r\n                cNew = a * this.c + c * this.d,\r\n                eNew = a * this.e + c * this.f + e;\r\n            this.b = b * this.a + d * this.b;\r\n            this.d = b * this.c + d * this.d;\r\n            this.f = b * this.e + d * this.f + f;\r\n\r\n            this.a = aNew;\r\n            this.c = cNew;\r\n            this.e = eNew;\r\n            return this;\r\n        };\r\n        /*\\\r\n         * Matrix.invert\r\n         [ method ]\r\n         **\r\n         * Returns an inverted version of the matrix\r\n         = (object) @Matrix\r\n        \\*/\r\n        matrixproto.invert = function () {\r\n            var me = this,\r\n                x = me.a * me.d - me.b * me.c;\r\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\r\n        };\r\n        /*\\\r\n         * Matrix.clone\r\n         [ method ]\r\n         **\r\n         * Returns a copy of the matrix\r\n         = (object) @Matrix\r\n        \\*/\r\n        matrixproto.clone = function () {\r\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\r\n        };\r\n        /*\\\r\n         * Matrix.translate\r\n         [ method ]\r\n         **\r\n         * Translate the matrix\r\n         - x (number) horizontal offset distance\r\n         - y (number) vertical offset distance\r\n        \\*/\r\n        matrixproto.translate = function (x, y) {\r\n            this.e += x * this.a + y * this.c;\r\n            this.f += x * this.b + y * this.d;\r\n            return this;\r\n        };\r\n        /*\\\r\n         * Matrix.scale\r\n         [ method ]\r\n         **\r\n         * Scales the matrix\r\n         - x (number) amount to be scaled, with `1` resulting in no change\r\n         - y (number) #optional amount to scale along the vertical axis. (Otherwise `x` applies to both axes.)\r\n         - cx (number) #optional horizontal origin point from which to scale\r\n         - cy (number) #optional vertical origin point from which to scale\r\n         * Default cx, cy is the middle point of the element.\r\n        \\*/\r\n        matrixproto.scale = function (x, y, cx, cy) {\r\n            y == null && (y = x);\r\n            (cx || cy) && this.translate(cx, cy);\r\n            this.a *= x;\r\n            this.b *= x;\r\n            this.c *= y;\r\n            this.d *= y;\r\n            (cx || cy) && this.translate(-cx, -cy);\r\n            return this;\r\n        };\r\n        /*\\\r\n         * Matrix.rotate\r\n         [ method ]\r\n         **\r\n         * Rotates the matrix\r\n         - a (number) angle of rotation, in degrees\r\n         - x (number) horizontal origin point from which to rotate\r\n         - y (number) vertical origin point from which to rotate\r\n        \\*/\r\n        matrixproto.rotate = function (a, x, y) {\r\n            a = Snap.rad(a);\r\n            x = x || 0;\r\n            y = y || 0;\r\n            var cos = +math.cos(a).toFixed(9),\r\n                sin = +math.sin(a).toFixed(9);\r\n            this.add(cos, sin, -sin, cos, x, y);\r\n            return this.add(1, 0, 0, 1, -x, -y);\r\n        };\r\n        /*\\\r\n         * Matrix.skewX\r\n         [ method ]\r\n         **\r\n         * Skews the matrix along the x-axis\r\n         - x (number) Angle to skew along the x-axis (in degrees).\r\n        \\*/\r\n        matrixproto.skewX = function (x) {\r\n            return this.skew(x, 0);\r\n        };\r\n        /*\\\r\n         * Matrix.skewY\r\n         [ method ]\r\n         **\r\n         * Skews the matrix along the y-axis\r\n         - y (number) Angle to skew along the y-axis (in degrees).\r\n        \\*/\r\n        matrixproto.skewY = function (y) {\r\n            return this.skew(0, y);\r\n        };\r\n        /*\\\r\n         * Matrix.skew\r\n         [ method ]\r\n         **\r\n         * Skews the matrix\r\n         - y (number) Angle to skew along the y-axis (in degrees).\r\n         - x (number) Angle to skew along the x-axis (in degrees).\r\n        \\*/\r\n        matrixproto.skew = function (x, y) {\r\n            x = x || 0;\r\n            y = y || 0;\r\n            x = Snap.rad(x);\r\n            y = Snap.rad(y);\r\n            var c = math.tan(x).toFixed(9);\r\n            var b = math.tan(y).toFixed(9);\r\n            return this.add(1, b, c, 1, 0, 0);\r\n        };\r\n        /*\\\r\n         * Matrix.x\r\n         [ method ]\r\n         **\r\n         * Returns x coordinate for given point after transformation described by the matrix. See also @Matrix.y\r\n         - x (number)\r\n         - y (number)\r\n         = (number) x\r\n        \\*/\r\n        matrixproto.x = function (x, y) {\r\n            return x * this.a + y * this.c + this.e;\r\n        };\r\n        /*\\\r\n         * Matrix.y\r\n         [ method ]\r\n         **\r\n         * Returns y coordinate for given point after transformation described by the matrix. See also @Matrix.x\r\n         - x (number)\r\n         - y (number)\r\n         = (number) y\r\n        \\*/\r\n        matrixproto.y = function (x, y) {\r\n            return x * this.b + y * this.d + this.f;\r\n        };\r\n        matrixproto.get = function (i) {\r\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\r\n        };\r\n        matrixproto.toString = function () {\r\n            return \"matrix(\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \")\";\r\n        };\r\n        matrixproto.offset = function () {\r\n            return [this.e.toFixed(4), this.f.toFixed(4)];\r\n        };\r\n        function norm(a) {\r\n            return a[0] * a[0] + a[1] * a[1];\r\n        }\r\n        function normalize(a) {\r\n            var mag = math.sqrt(norm(a));\r\n            a[0] && (a[0] /= mag);\r\n            a[1] && (a[1] /= mag);\r\n        }\r\n        /*\\\r\n         * Matrix.determinant\r\n         [ method ]\r\n         **\r\n         * Finds determinant of the given matrix.\r\n         = (number) determinant\r\n        \\*/\r\n        matrixproto.determinant = function () {\r\n            return this.a * this.d - this.b * this.c;\r\n        };\r\n        /*\\\r\n         * Matrix.split\r\n         [ method ]\r\n         **\r\n         * Splits matrix into primitive transformations\r\n         = (object) in format:\r\n         o dx (number) translation by x\r\n         o dy (number) translation by y\r\n         o scalex (number) scale by x\r\n         o scaley (number) scale by y\r\n         o shear (number) shear\r\n         o rotate (number) rotation in deg\r\n         o isSimple (boolean) could it be represented via simple transformations\r\n        \\*/\r\n        matrixproto.split = function () {\r\n            var out = {};\r\n            // translation\r\n            out.dx = this.e;\r\n            out.dy = this.f;\r\n\r\n            // scale and shear\r\n            var row = [[this.a, this.b], [this.c, this.d]];\r\n            out.scalex = math.sqrt(norm(row[0]));\r\n            normalize(row[0]);\r\n\r\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\r\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\r\n\r\n            out.scaley = math.sqrt(norm(row[1]));\r\n            normalize(row[1]);\r\n            out.shear /= out.scaley;\r\n\r\n            if (this.determinant() < 0) {\r\n                out.scalex = -out.scalex;\r\n            }\r\n\r\n            // rotation\r\n            var sin = row[0][1],\r\n                cos = row[1][1];\r\n            if (cos < 0) {\r\n                out.rotate = Snap.deg(math.acos(cos));\r\n                if (sin < 0) {\r\n                    out.rotate = 360 - out.rotate;\r\n                }\r\n            } else {\r\n                out.rotate = Snap.deg(math.asin(sin));\r\n            }\r\n\r\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\r\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\r\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\r\n            return out;\r\n        };\r\n        /*\\\r\n         * Matrix.toTransformString\r\n         [ method ]\r\n         **\r\n         * Returns transform string that represents given matrix\r\n         = (string) transform string\r\n        \\*/\r\n        matrixproto.toTransformString = function (shorter) {\r\n            var s = shorter || this.split();\r\n            if (!+s.shear.toFixed(9)) {\r\n                s.scalex = +s.scalex.toFixed(4);\r\n                s.scaley = +s.scaley.toFixed(4);\r\n                s.rotate = +s.rotate.toFixed(4);\r\n                return  (s.dx || s.dy ? \"t\" + [+s.dx.toFixed(4), +s.dy.toFixed(4)] : E) +\r\n                        (s.rotate ? \"r\" + [+s.rotate.toFixed(4), 0, 0] : E) +\r\n                        (s.scalex != 1 || s.scaley != 1 ? \"s\" + [s.scalex, s.scaley, 0, 0] : E);\r\n            } else {\r\n                return \"m\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\r\n            }\r\n        };\r\n    })(Matrix.prototype);\r\n    /*\\\r\n     * Snap.Matrix\r\n     [ method ]\r\n     **\r\n     * Matrix constructor, extend on your own risk.\r\n     * To create matrices use @Snap.matrix.\r\n    \\*/\r\n    Snap.Matrix = Matrix;\r\n    /*\\\r\n     * Snap.matrix\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Returns a matrix based on the given parameters\r\n     - a (number)\r\n     - b (number)\r\n     - c (number)\r\n     - d (number)\r\n     - e (number)\r\n     - f (number)\r\n     * or\r\n     - svgMatrix (SVGMatrix)\r\n     = (object) @Matrix\r\n    \\*/\r\n    Snap.matrix = function (a, b, c, d, e, f) {\r\n        return new Matrix(a, b, c, d, e, f);\r\n    };\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var has = \"hasOwnProperty\",\r\n        make = Snap._.make,\r\n        wrap = Snap._.wrap,\r\n        is = Snap.is,\r\n        getSomeDefs = Snap._.getSomeDefs,\r\n        reURLValue = /^url\\((['\"]?)([^)]+)\\1\\)$/,\r\n        $ = Snap._.$,\r\n        URL = Snap.url,\r\n        Str = String,\r\n        separator = Snap._.separator,\r\n        E = \"\";\r\n    /*\\\r\n     * Snap.deurl\r\n     [ method ]\r\n     **\r\n     * Unwraps path from `\"url(<path>)\"`.\r\n     - value (string) url path\r\n     = (string) unwrapped path\r\n    \\*/\r\n    Snap.deurl = function (value) {\r\n        var res = String(value).match(reURLValue);\r\n        return res ? res[2] : value;\r\n    }\r\n    // Attributes event handlers\r\n    eve.on(\"snap.util.attr.mask\", function (value) {\r\n        if (value instanceof Element || value instanceof Fragment) {\r\n            eve.stop();\r\n            if (value instanceof Fragment && value.node.childNodes.length == 1) {\r\n                value = value.node.firstChild;\r\n                getSomeDefs(this).appendChild(value);\r\n                value = wrap(value);\r\n            }\r\n            if (value.type == \"mask\") {\r\n                var mask = value;\r\n            } else {\r\n                mask = make(\"mask\", getSomeDefs(this));\r\n                mask.node.appendChild(value.node);\r\n            }\r\n            !mask.node.id && $(mask.node, {\r\n                id: mask.id\r\n            });\r\n            $(this.node, {\r\n                mask: URL(mask.id)\r\n            });\r\n        }\r\n    });\r\n    (function (clipIt) {\r\n        eve.on(\"snap.util.attr.clip\", clipIt);\r\n        eve.on(\"snap.util.attr.clip-path\", clipIt);\r\n        eve.on(\"snap.util.attr.clipPath\", clipIt);\r\n    }(function (value) {\r\n        if (value instanceof Element || value instanceof Fragment) {\r\n            eve.stop();\r\n            var clip,\r\n                node = value.node;\r\n            while (node) {\r\n                if (node.nodeName === \"clipPath\") {\r\n                    clip = new Element(node);\r\n                    break;\r\n                }\r\n                if (node.nodeName === \"svg\") {\r\n                    clip = undefined;\r\n                    break;\r\n                }\r\n                node = node.parentNode;\r\n            }\r\n            if (!clip) {\r\n                clip = make(\"clipPath\", getSomeDefs(this));\r\n                clip.node.appendChild(value.node);\r\n                !clip.node.id && $(clip.node, {\r\n                    id: clip.id\r\n                });\r\n            }\r\n            $(this.node, {\r\n                \"clip-path\": URL(clip.node.id || clip.id)\r\n            });\r\n        }\r\n    }));\r\n    function fillStroke(name) {\r\n        return function (value) {\r\n            eve.stop();\r\n            if (value instanceof Fragment && value.node.childNodes.length == 1 &&\r\n                (value.node.firstChild.tagName == \"radialGradient\" ||\r\n                value.node.firstChild.tagName == \"linearGradient\" ||\r\n                value.node.firstChild.tagName == \"pattern\")) {\r\n                value = value.node.firstChild;\r\n                getSomeDefs(this).appendChild(value);\r\n                value = wrap(value);\r\n            }\r\n            if (value instanceof Element) {\r\n                if (value.type == \"radialGradient\" || value.type == \"linearGradient\"\r\n                   || value.type == \"pattern\") {\r\n                    if (!value.node.id) {\r\n                        $(value.node, {\r\n                            id: value.id\r\n                        });\r\n                    }\r\n                    var fill = URL(value.node.id);\r\n                } else {\r\n                    fill = value.attr(name);\r\n                }\r\n            } else {\r\n                fill = Snap.color(value);\r\n                if (fill.error) {\r\n                    var grad = Snap(getSomeDefs(this).ownerSVGElement).gradient(value);\r\n                    if (grad) {\r\n                        if (!grad.node.id) {\r\n                            $(grad.node, {\r\n                                id: grad.id\r\n                            });\r\n                        }\r\n                        fill = URL(grad.node.id);\r\n                    } else {\r\n                        fill = value;\r\n                    }\r\n                } else {\r\n                    fill = Str(fill);\r\n                }\r\n            }\r\n            var attrs = {};\r\n            attrs[name] = fill;\r\n            $(this.node, attrs);\r\n            this.node.style[name] = E;\r\n        };\r\n    }\r\n    eve.on(\"snap.util.attr.fill\", fillStroke(\"fill\"));\r\n    eve.on(\"snap.util.attr.stroke\", fillStroke(\"stroke\"));\r\n    var gradrg = /^([lr])(?:\\(([^)]*)\\))?(.*)$/i;\r\n    eve.on(\"snap.util.grad.parse\", function parseGrad(string) {\r\n        string = Str(string);\r\n        var tokens = string.match(gradrg);\r\n        if (!tokens) {\r\n            return null;\r\n        }\r\n        var type = tokens[1],\r\n            params = tokens[2],\r\n            stops = tokens[3];\r\n        params = params.split(/\\s*,\\s*/).map(function (el) {\r\n            return +el == el ? +el : el;\r\n        });\r\n        if (params.length == 1 && params[0] == 0) {\r\n            params = [];\r\n        }\r\n        stops = stops.split(\"-\");\r\n        stops = stops.map(function (el) {\r\n            el = el.split(\":\");\r\n            var out = {\r\n                color: el[0]\r\n            };\r\n            if (el[1]) {\r\n                out.offset = parseFloat(el[1]);\r\n            }\r\n            return out;\r\n        });\r\n        var len = stops.length,\r\n            start = 0,\r\n            j = 0;\r\n        function seed(i, end) {\r\n            var step = (end - start) / (i - j);\r\n            for (var k = j; k < i; k++) {\r\n                stops[k].offset = +(+start + step * (k - j)).toFixed(2);\r\n            }\r\n            j = i;\r\n            start = end;\r\n        }\r\n        len--;\r\n        for (var i = 0; i < len; i++) if (\"offset\" in stops[i]) {\r\n            seed(i, stops[i].offset);\r\n        }\r\n        stops[len].offset = stops[len].offset || 100;\r\n        seed(len, stops[len].offset);\r\n        return {\r\n            type: type,\r\n            params: params,\r\n            stops: stops\r\n        };\r\n    });\r\n\r\n    eve.on(\"snap.util.attr.d\", function (value) {\r\n        eve.stop();\r\n        if (is(value, \"array\") && is(value[0], \"array\")) {\r\n            value = Snap.path.toString.call(value);\r\n        }\r\n        value = Str(value);\r\n        if (value.match(/[ruo]/i)) {\r\n            value = Snap.path.toAbsolute(value);\r\n        }\r\n        $(this.node, {d: value});\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.#text\", function (value) {\r\n        eve.stop();\r\n        value = Str(value);\r\n        var txt = glob.doc.createTextNode(value);\r\n        while (this.node.firstChild) {\r\n            this.node.removeChild(this.node.firstChild);\r\n        }\r\n        this.node.appendChild(txt);\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.path\", function (value) {\r\n        eve.stop();\r\n        this.attr({d: value});\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.class\", function (value) {\r\n        eve.stop();\r\n        this.node.className.baseVal = value;\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.viewBox\", function (value) {\r\n        var vb;\r\n        if (is(value, \"object\") && \"x\" in value) {\r\n            vb = [value.x, value.y, value.width, value.height].join(\" \");\r\n        } else if (is(value, \"array\")) {\r\n            vb = value.join(\" \");\r\n        } else {\r\n            vb = value;\r\n        }\r\n        $(this.node, {\r\n            viewBox: vb\r\n        });\r\n        eve.stop();\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.transform\", function (value) {\r\n        this.transform(value);\r\n        eve.stop();\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.r\", function (value) {\r\n        if (this.type == \"rect\") {\r\n            eve.stop();\r\n            $(this.node, {\r\n                rx: value,\r\n                ry: value\r\n            });\r\n        }\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.textpath\", function (value) {\r\n        eve.stop();\r\n        if (this.type == \"text\") {\r\n            var id, tp, node;\r\n            if (!value && this.textPath) {\r\n                tp = this.textPath;\r\n                while (tp.node.firstChild) {\r\n                    this.node.appendChild(tp.node.firstChild);\r\n                }\r\n                tp.remove();\r\n                delete this.textPath;\r\n                return;\r\n            }\r\n            if (is(value, \"string\")) {\r\n                var defs = getSomeDefs(this),\r\n                    path = wrap(defs.parentNode).path(value);\r\n                defs.appendChild(path.node);\r\n                id = path.id;\r\n                path.attr({id: id});\r\n            } else {\r\n                value = wrap(value);\r\n                if (value instanceof Element) {\r\n                    id = value.attr(\"id\");\r\n                    if (!id) {\r\n                        id = value.id;\r\n                        value.attr({id: id});\r\n                    }\r\n                }\r\n            }\r\n            if (id) {\r\n                tp = this.textPath;\r\n                node = this.node;\r\n                if (tp) {\r\n                    tp.attr({\"xlink:href\": \"#\" + id});\r\n                } else {\r\n                    tp = $(\"textPath\", {\r\n                        \"xlink:href\": \"#\" + id\r\n                    });\r\n                    while (node.firstChild) {\r\n                        tp.appendChild(node.firstChild);\r\n                    }\r\n                    node.appendChild(tp);\r\n                    this.textPath = wrap(tp);\r\n                }\r\n            }\r\n        }\r\n    })(-1);\r\n    eve.on(\"snap.util.attr.text\", function (value) {\r\n        if (this.type == \"text\") {\r\n            var i = 0,\r\n                node = this.node,\r\n                tuner = function (chunk) {\r\n                    var out = $(\"tspan\");\r\n                    if (is(chunk, \"array\")) {\r\n                        for (var i = 0; i < chunk.length; i++) {\r\n                            out.appendChild(tuner(chunk[i]));\r\n                        }\r\n                    } else {\r\n                        out.appendChild(glob.doc.createTextNode(chunk));\r\n                    }\r\n                    out.normalize && out.normalize();\r\n                    return out;\r\n                };\r\n            while (node.firstChild) {\r\n                node.removeChild(node.firstChild);\r\n            }\r\n            var tuned = tuner(value);\r\n            while (tuned.firstChild) {\r\n                node.appendChild(tuned.firstChild);\r\n            }\r\n        }\r\n        eve.stop();\r\n    })(-1);\r\n    function setFontSize(value) {\r\n        eve.stop();\r\n        if (value == +value) {\r\n            value += \"px\";\r\n        }\r\n        this.node.style.fontSize = value;\r\n    }\r\n    eve.on(\"snap.util.attr.fontSize\", setFontSize)(-1);\r\n    eve.on(\"snap.util.attr.font-size\", setFontSize)(-1);\r\n\r\n\r\n    eve.on(\"snap.util.getattr.transform\", function () {\r\n        eve.stop();\r\n        return this.transform();\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.textpath\", function () {\r\n        eve.stop();\r\n        return this.textPath;\r\n    })(-1);\r\n    // Markers\r\n    (function () {\r\n        function getter(end) {\r\n            return function () {\r\n                eve.stop();\r\n                var style = glob.doc.defaultView.getComputedStyle(this.node, null).getPropertyValue(\"marker-\" + end);\r\n                if (style == \"none\") {\r\n                    return style;\r\n                } else {\r\n                    return Snap(glob.doc.getElementById(style.match(reURLValue)[1]));\r\n                }\r\n            };\r\n        }\r\n        function setter(end) {\r\n            return function (value) {\r\n                eve.stop();\r\n                var name = \"marker\" + end.charAt(0).toUpperCase() + end.substring(1);\r\n                if (value == \"\" || !value) {\r\n                    this.node.style[name] = \"none\";\r\n                    return;\r\n                }\r\n                if (value.type == \"marker\") {\r\n                    var id = value.node.id;\r\n                    if (!id) {\r\n                        $(value.node, {id: value.id});\r\n                    }\r\n                    this.node.style[name] = URL(id);\r\n                    return;\r\n                }\r\n            };\r\n        }\r\n        eve.on(\"snap.util.getattr.marker-end\", getter(\"end\"))(-1);\r\n        eve.on(\"snap.util.getattr.markerEnd\", getter(\"end\"))(-1);\r\n        eve.on(\"snap.util.getattr.marker-start\", getter(\"start\"))(-1);\r\n        eve.on(\"snap.util.getattr.markerStart\", getter(\"start\"))(-1);\r\n        eve.on(\"snap.util.getattr.marker-mid\", getter(\"mid\"))(-1);\r\n        eve.on(\"snap.util.getattr.markerMid\", getter(\"mid\"))(-1);\r\n        eve.on(\"snap.util.attr.marker-end\", setter(\"end\"))(-1);\r\n        eve.on(\"snap.util.attr.markerEnd\", setter(\"end\"))(-1);\r\n        eve.on(\"snap.util.attr.marker-start\", setter(\"start\"))(-1);\r\n        eve.on(\"snap.util.attr.markerStart\", setter(\"start\"))(-1);\r\n        eve.on(\"snap.util.attr.marker-mid\", setter(\"mid\"))(-1);\r\n        eve.on(\"snap.util.attr.markerMid\", setter(\"mid\"))(-1);\r\n    }());\r\n    eve.on(\"snap.util.getattr.r\", function () {\r\n        if (this.type == \"rect\" && $(this.node, \"rx\") == $(this.node, \"ry\")) {\r\n            eve.stop();\r\n            return $(this.node, \"rx\");\r\n        }\r\n    })(-1);\r\n    function textExtract(node) {\r\n        var out = [];\r\n        var children = node.childNodes;\r\n        for (var i = 0, ii = children.length; i < ii; i++) {\r\n            var chi = children[i];\r\n            if (chi.nodeType == 3) {\r\n                out.push(chi.nodeValue);\r\n            }\r\n            if (chi.tagName == \"tspan\") {\r\n                if (chi.childNodes.length == 1 && chi.firstChild.nodeType == 3) {\r\n                    out.push(chi.firstChild.nodeValue);\r\n                } else {\r\n                    out.push(textExtract(chi));\r\n                }\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n    eve.on(\"snap.util.getattr.text\", function () {\r\n        if (this.type == \"text\" || this.type == \"tspan\") {\r\n            eve.stop();\r\n            var out = textExtract(this.node);\r\n            return out.length == 1 ? out[0] : out;\r\n        }\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.#text\", function () {\r\n        return this.node.textContent;\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.fill\", function (internal) {\r\n        if (internal) {\r\n            return;\r\n        }\r\n        eve.stop();\r\n        var value = eve(\"snap.util.getattr.fill\", this, true).firstDefined();\r\n        return Snap(Snap.deurl(value)) || value;\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.stroke\", function (internal) {\r\n        if (internal) {\r\n            return;\r\n        }\r\n        eve.stop();\r\n        var value = eve(\"snap.util.getattr.stroke\", this, true).firstDefined();\r\n        return Snap(Snap.deurl(value)) || value;\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.viewBox\", function () {\r\n        eve.stop();\r\n        var vb = $(this.node, \"viewBox\");\r\n        if (vb) {\r\n            vb = vb.split(separator);\r\n            return Snap._.box(+vb[0], +vb[1], +vb[2], +vb[3]);\r\n        } else {\r\n            return;\r\n        }\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.points\", function () {\r\n        var p = $(this.node, \"points\");\r\n        eve.stop();\r\n        if (p) {\r\n            return p.split(separator);\r\n        } else {\r\n            return;\r\n        }\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.path\", function () {\r\n        var p = $(this.node, \"d\");\r\n        eve.stop();\r\n        return p;\r\n    })(-1);\r\n    eve.on(\"snap.util.getattr.class\", function () {\r\n        return this.node.className.baseVal;\r\n    })(-1);\r\n    function getFontSize() {\r\n        eve.stop();\r\n        return this.node.style.fontSize;\r\n    }\r\n    eve.on(\"snap.util.getattr.fontSize\", getFontSize)(-1);\r\n    eve.on(\"snap.util.getattr.font-size\", getFontSize)(-1);\r\n});\r\n\r\n// Copyright (c) 2014 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var rgNotSpace = /\\S+/g,\r\n        rgBadSpace = /[\\t\\r\\n\\f]/g,\r\n        rgTrim = /(^\\s+|\\s+$)/g,\r\n        Str = String,\r\n        elproto = Element.prototype;\r\n    /*\\\r\n     * Element.addClass\r\n     [ method ]\r\n     **\r\n     * Adds given class name or list of class names to the element.\r\n     - value (string) class name or space separated list of class names\r\n     **\r\n     = (Element) original element.\r\n    \\*/\r\n    elproto.addClass = function (value) {\r\n        var classes = Str(value || \"\").match(rgNotSpace) || [],\r\n            elem = this.node,\r\n            className = elem.className.baseVal,\r\n            curClasses = className.match(rgNotSpace) || [],\r\n            j,\r\n            pos,\r\n            clazz,\r\n            finalValue;\r\n\r\n        if (classes.length) {\r\n            j = 0;\r\n            while (clazz = classes[j++]) {\r\n                pos = curClasses.indexOf(clazz);\r\n                if (!~pos) {\r\n                    curClasses.push(clazz);\r\n                }\r\n            }\r\n\r\n            finalValue = curClasses.join(\" \");\r\n            if (className != finalValue) {\r\n                elem.className.baseVal = finalValue;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.removeClass\r\n     [ method ]\r\n     **\r\n     * Removes given class name or list of class names from the element.\r\n     - value (string) class name or space separated list of class names\r\n     **\r\n     = (Element) original element.\r\n    \\*/\r\n    elproto.removeClass = function (value) {\r\n        var classes = Str(value || \"\").match(rgNotSpace) || [],\r\n            elem = this.node,\r\n            className = elem.className.baseVal,\r\n            curClasses = className.match(rgNotSpace) || [],\r\n            j,\r\n            pos,\r\n            clazz,\r\n            finalValue;\r\n        if (curClasses.length) {\r\n            j = 0;\r\n            while (clazz = classes[j++]) {\r\n                pos = curClasses.indexOf(clazz);\r\n                if (~pos) {\r\n                    curClasses.splice(pos, 1);\r\n                }\r\n            }\r\n\r\n            finalValue = curClasses.join(\" \");\r\n            if (className != finalValue) {\r\n                elem.className.baseVal = finalValue;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.hasClass\r\n     [ method ]\r\n     **\r\n     * Checks if the element has a given class name in the list of class names applied to it.\r\n     - value (string) class name\r\n     **\r\n     = (boolean) `true` if the element has given class\r\n    \\*/\r\n    elproto.hasClass = function (value) {\r\n        var elem = this.node,\r\n            className = elem.className.baseVal,\r\n            curClasses = className.match(rgNotSpace) || [];\r\n        return !!~curClasses.indexOf(value);\r\n    };\r\n    /*\\\r\n     * Element.toggleClass\r\n     [ method ]\r\n     **\r\n     * Add or remove one or more classes from the element, depending on either\r\n     * the class’s presence or the value of the `flag` argument.\r\n     - value (string) class name or space separated list of class names\r\n     - flag (boolean) value to determine whether the class should be added or removed\r\n     **\r\n     = (Element) original element.\r\n    \\*/\r\n    elproto.toggleClass = function (value, flag) {\r\n        if (flag != null) {\r\n            if (flag) {\r\n                return this.addClass(value);\r\n            } else {\r\n                return this.removeClass(value);\r\n            }\r\n        }\r\n        var classes = (value || \"\").match(rgNotSpace) || [],\r\n            elem = this.node,\r\n            className = elem.className.baseVal,\r\n            curClasses = className.match(rgNotSpace) || [],\r\n            j,\r\n            pos,\r\n            clazz,\r\n            finalValue;\r\n        j = 0;\r\n        while (clazz = classes[j++]) {\r\n            pos = curClasses.indexOf(clazz);\r\n            if (~pos) {\r\n                curClasses.splice(pos, 1);\r\n            } else {\r\n                curClasses.push(clazz);\r\n            }\r\n        }\r\n\r\n        finalValue = curClasses.join(\" \");\r\n        if (className != finalValue) {\r\n            elem.className.baseVal = finalValue;\r\n        }\r\n        return this;\r\n    };\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var operators = {\r\n            \"+\": function (x, y) {\r\n                    return x + y;\r\n                },\r\n            \"-\": function (x, y) {\r\n                    return x - y;\r\n                },\r\n            \"/\": function (x, y) {\r\n                    return x / y;\r\n                },\r\n            \"*\": function (x, y) {\r\n                    return x * y;\r\n                }\r\n        },\r\n        Str = String,\r\n        reUnit = /[a-z]+$/i,\r\n        reAddon = /^\\s*([+\\-\\/*])\\s*=\\s*([\\d.eE+\\-]+)\\s*([^\\d\\s]+)?\\s*$/;\r\n    function getNumber(val) {\r\n        return val;\r\n    }\r\n    function getUnit(unit) {\r\n        return function (val) {\r\n            return +val.toFixed(3) + unit;\r\n        };\r\n    }\r\n    eve.on(\"snap.util.attr\", function (val) {\r\n        var plus = Str(val).match(reAddon);\r\n        if (plus) {\r\n            var evnt = eve.nt(),\r\n                name = evnt.substring(evnt.lastIndexOf(\".\") + 1),\r\n                a = this.attr(name),\r\n                atr = {};\r\n            eve.stop();\r\n            var unit = plus[3] || \"\",\r\n                aUnit = a.match(reUnit),\r\n                op = operators[plus[1]];\r\n            if (aUnit && aUnit == unit) {\r\n                val = op(parseFloat(a), +plus[2]);\r\n            } else {\r\n                a = this.asPX(name);\r\n                val = op(this.asPX(name), this.asPX(name, plus[2] + unit));\r\n            }\r\n            if (isNaN(a) || isNaN(val)) {\r\n                return;\r\n            }\r\n            atr[name] = val;\r\n            this.attr(atr);\r\n        }\r\n    })(-10);\r\n    eve.on(\"snap.util.equal\", function (name, b) {\r\n        var A, B, a = Str(this.attr(name) || \"\"),\r\n            el = this,\r\n            bplus = Str(b).match(reAddon);\r\n        if (bplus) {\r\n            eve.stop();\r\n            var unit = bplus[3] || \"\",\r\n                aUnit = a.match(reUnit),\r\n                op = operators[bplus[1]];\r\n            if (aUnit && aUnit == unit) {\r\n                return {\r\n                    from: parseFloat(a),\r\n                    to: op(parseFloat(a), +bplus[2]),\r\n                    f: getUnit(aUnit)\r\n                };\r\n            } else {\r\n                a = this.asPX(name);\r\n                return {\r\n                    from: a,\r\n                    to: op(a, this.asPX(name, bplus[2] + unit)),\r\n                    f: getNumber\r\n                };\r\n            }\r\n        }\r\n    })(-10);\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var proto = Paper.prototype,\r\n        is = Snap.is;\r\n    /*\\\r\n     * Paper.rect\r\n     [ method ]\r\n     *\r\n     * Draws a rectangle\r\n     **\r\n     - x (number) x coordinate of the top left corner\r\n     - y (number) y coordinate of the top left corner\r\n     - width (number) width\r\n     - height (number) height\r\n     - rx (number) #optional horizontal radius for rounded corners, default is 0\r\n     - ry (number) #optional vertical radius for rounded corners, default is rx or 0\r\n     = (object) the `rect` element\r\n     **\r\n     > Usage\r\n     | // regular rectangle\r\n     | var c = paper.rect(10, 10, 50, 50);\r\n     | // rectangle with rounded corners\r\n     | var c = paper.rect(40, 40, 50, 50, 10);\r\n    \\*/\r\n    proto.rect = function (x, y, w, h, rx, ry) {\r\n        var attr;\r\n        if (ry == null) {\r\n            ry = rx;\r\n        }\r\n        if (is(x, \"object\") && x == \"[object Object]\") {\r\n            attr = x;\r\n        } else if (x != null) {\r\n            attr = {\r\n                x: x,\r\n                y: y,\r\n                width: w,\r\n                height: h\r\n            };\r\n            if (rx != null) {\r\n                attr.rx = rx;\r\n                attr.ry = ry;\r\n            }\r\n        }\r\n        return this.el(\"rect\", attr);\r\n    };\r\n    /*\\\r\n     * Paper.circle\r\n     [ method ]\r\n     **\r\n     * Draws a circle\r\n     **\r\n     - x (number) x coordinate of the centre\r\n     - y (number) y coordinate of the centre\r\n     - r (number) radius\r\n     = (object) the `circle` element\r\n     **\r\n     > Usage\r\n     | var c = paper.circle(50, 50, 40);\r\n    \\*/\r\n    proto.circle = function (cx, cy, r) {\r\n        var attr;\r\n        if (is(cx, \"object\") && cx == \"[object Object]\") {\r\n            attr = cx;\r\n        } else if (cx != null) {\r\n            attr = {\r\n                cx: cx,\r\n                cy: cy,\r\n                r: r\r\n            };\r\n        }\r\n        return this.el(\"circle\", attr);\r\n    };\r\n\r\n    var preload = (function () {\r\n        function onerror() {\r\n            this.parentNode.removeChild(this);\r\n        }\r\n        return function (src, f) {\r\n            var img = glob.doc.createElement(\"img\"),\r\n                body = glob.doc.body;\r\n            img.style.cssText = \"position:absolute;left:-9999em;top:-9999em\";\r\n            img.onload = function () {\r\n                f.call(img);\r\n                img.onload = img.onerror = null;\r\n                body.removeChild(img);\r\n            };\r\n            img.onerror = onerror;\r\n            body.appendChild(img);\r\n            img.src = src;\r\n        };\r\n    }());\r\n\r\n    /*\\\r\n     * Paper.image\r\n     [ method ]\r\n     **\r\n     * Places an image on the surface\r\n     **\r\n     - src (string) URI of the source image\r\n     - x (number) x offset position\r\n     - y (number) y offset position\r\n     - width (number) width of the image\r\n     - height (number) height of the image\r\n     = (object) the `image` element\r\n     * or\r\n     = (object) Snap element object with type `image`\r\n     **\r\n     > Usage\r\n     | var c = paper.image(\"apple.png\", 10, 10, 80, 80);\r\n    \\*/\r\n    proto.image = function (src, x, y, width, height) {\r\n        var el = this.el(\"image\");\r\n        if (is(src, \"object\") && \"src\" in src) {\r\n            el.attr(src);\r\n        } else if (src != null) {\r\n            var set = {\r\n                \"xlink:href\": src,\r\n                preserveAspectRatio: \"none\"\r\n            };\r\n            if (x != null && y != null) {\r\n                set.x = x;\r\n                set.y = y;\r\n            }\r\n            if (width != null && height != null) {\r\n                set.width = width;\r\n                set.height = height;\r\n            } else {\r\n                preload(src, function () {\r\n                    Snap._.$(el.node, {\r\n                        width: this.offsetWidth,\r\n                        height: this.offsetHeight\r\n                    });\r\n                });\r\n            }\r\n            Snap._.$(el.node, set);\r\n        }\r\n        return el;\r\n    };\r\n    /*\\\r\n     * Paper.ellipse\r\n     [ method ]\r\n     **\r\n     * Draws an ellipse\r\n     **\r\n     - x (number) x coordinate of the centre\r\n     - y (number) y coordinate of the centre\r\n     - rx (number) horizontal radius\r\n     - ry (number) vertical radius\r\n     = (object) the `ellipse` element\r\n     **\r\n     > Usage\r\n     | var c = paper.ellipse(50, 50, 40, 20);\r\n    \\*/\r\n    proto.ellipse = function (cx, cy, rx, ry) {\r\n        var attr;\r\n        if (is(cx, \"object\") && cx == \"[object Object]\") {\r\n            attr = cx;\r\n        } else if (cx != null) {\r\n            attr ={\r\n                cx: cx,\r\n                cy: cy,\r\n                rx: rx,\r\n                ry: ry\r\n            };\r\n        }\r\n        return this.el(\"ellipse\", attr);\r\n    };\r\n    // SIERRA Paper.path(): Unclear from the link what a Catmull-Rom curveto is, and why it would make life any easier.\r\n    /*\\\r\n     * Paper.path\r\n     [ method ]\r\n     **\r\n     * Creates a `<path>` element using the given string as the path's definition\r\n     - pathString (string) #optional path string in SVG format\r\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numerical form. Example:\r\n     | \"M10,20L30,40\"\r\n     * This example features two commands: `M`, with arguments `(10, 20)` and `L` with arguments `(30, 40)`. Uppercase letter commands express coordinates in absolute terms, while lowercase commands express them in relative terms from the most recently declared coordinates.\r\n     *\r\n     # <p>Here is short list of commands available, for more details see <a href=\"http://www.w3.org/TR/SVG/paths.html#PathData\" title=\"Details of a path's data attribute's format are described in the SVG specification.\">SVG path string format</a> or <a href=\"https://developer.mozilla.org/en/SVG/Tutorial/Paths\">article about path strings at MDN</a>.</p>\r\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\r\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\r\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\r\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\r\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\r\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\r\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\r\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\r\n     # <tr><td>Q</td><td>quadratic Bézier curveto</td><td>(x1 y1 x y)+</td></tr>\r\n     # <tr><td>T</td><td>smooth quadratic Bézier curveto</td><td>(x y)+</td></tr>\r\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\r\n     # <tr><td>R</td><td><a href=\"http://en.wikipedia.org/wiki/Catmull–Rom_spline#Catmull.E2.80.93Rom_spline\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\r\n     * * _Catmull-Rom curveto_ is a not standard SVG command and added to make life easier.\r\n     * Note: there is a special case when a path consists of only three commands: `M10,10R…z`. In this case the path connects back to its starting point.\r\n     > Usage\r\n     | var c = paper.path(\"M10 10L90 90\");\r\n     | // draw a diagonal line:\r\n     | // move to 10,10, line to 90,90\r\n    \\*/\r\n    proto.path = function (d) {\r\n        var attr;\r\n        if (is(d, \"object\") && !is(d, \"array\")) {\r\n            attr = d;\r\n        } else if (d) {\r\n            attr = {d: d};\r\n        }\r\n        return this.el(\"path\", attr);\r\n    };\r\n    /*\\\r\n     * Paper.g\r\n     [ method ]\r\n     **\r\n     * Creates a group element\r\n     **\r\n     - varargs (…) #optional elements to nest within the group\r\n     = (object) the `g` element\r\n     **\r\n     > Usage\r\n     | var c1 = paper.circle(),\r\n     |     c2 = paper.rect(),\r\n     |     g = paper.g(c2, c1); // note that the order of elements is different\r\n     * or\r\n     | var c1 = paper.circle(),\r\n     |     c2 = paper.rect(),\r\n     |     g = paper.g();\r\n     | g.add(c2, c1);\r\n    \\*/\r\n    /*\\\r\n     * Paper.group\r\n     [ method ]\r\n     **\r\n     * See @Paper.g\r\n    \\*/\r\n    proto.group = proto.g = function (first) {\r\n        var attr,\r\n            el = this.el(\"g\");\r\n        if (arguments.length == 1 && first && !first.type) {\r\n            el.attr(first);\r\n        } else if (arguments.length) {\r\n            el.add(Array.prototype.slice.call(arguments, 0));\r\n        }\r\n        return el;\r\n    };\r\n    /*\\\r\n     * Paper.svg\r\n     [ method ]\r\n     **\r\n     * Creates a nested SVG element.\r\n     - x (number) @optional X of the element\r\n     - y (number) @optional Y of the element\r\n     - width (number) @optional width of the element\r\n     - height (number) @optional height of the element\r\n     - vbx (number) @optional viewbox X\r\n     - vby (number) @optional viewbox Y\r\n     - vbw (number) @optional viewbox width\r\n     - vbh (number) @optional viewbox height\r\n     **\r\n     = (object) the `svg` element\r\n     **\r\n    \\*/\r\n    proto.svg = function (x, y, width, height, vbx, vby, vbw, vbh) {\r\n        var attrs = {};\r\n        if (is(x, \"object\") && y == null) {\r\n            attrs = x;\r\n        } else {\r\n            if (x != null) {\r\n                attrs.x = x;\r\n            }\r\n            if (y != null) {\r\n                attrs.y = y;\r\n            }\r\n            if (width != null) {\r\n                attrs.width = width;\r\n            }\r\n            if (height != null) {\r\n                attrs.height = height;\r\n            }\r\n            if (vbx != null && vby != null && vbw != null && vbh != null) {\r\n                attrs.viewBox = [vbx, vby, vbw, vbh];\r\n            }\r\n        }\r\n        return this.el(\"svg\", attrs);\r\n    };\r\n    /*\\\r\n     * Paper.mask\r\n     [ method ]\r\n     **\r\n     * Equivalent in behaviour to @Paper.g, except it’s a mask.\r\n     **\r\n     = (object) the `mask` element\r\n     **\r\n    \\*/\r\n    proto.mask = function (first) {\r\n        var attr,\r\n            el = this.el(\"mask\");\r\n        if (arguments.length == 1 && first && !first.type) {\r\n            el.attr(first);\r\n        } else if (arguments.length) {\r\n            el.add(Array.prototype.slice.call(arguments, 0));\r\n        }\r\n        return el;\r\n    };\r\n    /*\\\r\n     * Paper.ptrn\r\n     [ method ]\r\n     **\r\n     * Equivalent in behaviour to @Paper.g, except it’s a pattern.\r\n     - x (number) @optional X of the element\r\n     - y (number) @optional Y of the element\r\n     - width (number) @optional width of the element\r\n     - height (number) @optional height of the element\r\n     - vbx (number) @optional viewbox X\r\n     - vby (number) @optional viewbox Y\r\n     - vbw (number) @optional viewbox width\r\n     - vbh (number) @optional viewbox height\r\n     **\r\n     = (object) the `pattern` element\r\n     **\r\n    \\*/\r\n    proto.ptrn = function (x, y, width, height, vx, vy, vw, vh) {\r\n        if (is(x, \"object\")) {\r\n            var attr = x;\r\n        } else {\r\n            attr = {patternUnits: \"userSpaceOnUse\"};\r\n            if (x) {\r\n                attr.x = x;\r\n            }\r\n            if (y) {\r\n                attr.y = y;\r\n            }\r\n            if (width != null) {\r\n                attr.width = width;\r\n            }\r\n            if (height != null) {\r\n                attr.height = height;\r\n            }\r\n            if (vx != null && vy != null && vw != null && vh != null) {\r\n                attr.viewBox = [vx, vy, vw, vh];\r\n            } else {\r\n                attr.viewBox = [x || 0, y || 0, width || 0, height || 0];\r\n            }\r\n        }\r\n        return this.el(\"pattern\", attr);\r\n    };\r\n    /*\\\r\n     * Paper.use\r\n     [ method ]\r\n     **\r\n     * Creates a <use> element.\r\n     - id (string) @optional id of element to link\r\n     * or\r\n     - id (Element) @optional element to link\r\n     **\r\n     = (object) the `use` element\r\n     **\r\n    \\*/\r\n    proto.use = function (id) {\r\n        if (id != null) {\r\n            if (id instanceof Element) {\r\n                if (!id.attr(\"id\")) {\r\n                    id.attr({id: Snap._.id(id)});\r\n                }\r\n                id = id.attr(\"id\");\r\n            }\r\n            if (String(id).charAt() == \"#\") {\r\n                id = id.substring(1);\r\n            }\r\n            return this.el(\"use\", {\"xlink:href\": \"#\" + id});\r\n        } else {\r\n            return Element.prototype.use.call(this);\r\n        }\r\n    };\r\n    /*\\\r\n     * Paper.symbol\r\n     [ method ]\r\n     **\r\n     * Creates a <symbol> element.\r\n     - vbx (number) @optional viewbox X\r\n     - vby (number) @optional viewbox Y\r\n     - vbw (number) @optional viewbox width\r\n     - vbh (number) @optional viewbox height\r\n     = (object) the `symbol` element\r\n     **\r\n    \\*/\r\n    proto.symbol = function (vx, vy, vw, vh) {\r\n        var attr = {};\r\n        if (vx != null && vy != null && vw != null && vh != null) {\r\n            attr.viewBox = [vx, vy, vw, vh];\r\n        }\r\n\r\n        return this.el(\"symbol\", attr);\r\n    };\r\n    /*\\\r\n     * Paper.text\r\n     [ method ]\r\n     **\r\n     * Draws a text string\r\n     **\r\n     - x (number) x coordinate position\r\n     - y (number) y coordinate position\r\n     - text (string|array) The text string to draw or array of strings to nest within separate `<tspan>` elements\r\n     = (object) the `text` element\r\n     **\r\n     > Usage\r\n     | var t1 = paper.text(50, 50, \"Snap\");\r\n     | var t2 = paper.text(50, 50, [\"S\",\"n\",\"a\",\"p\"]);\r\n     | // Text path usage\r\n     | t1.attr({textpath: \"M10,10L100,100\"});\r\n     | // or\r\n     | var pth = paper.path(\"M10,10L100,100\");\r\n     | t1.attr({textpath: pth});\r\n    \\*/\r\n    proto.text = function (x, y, text) {\r\n        var attr = {};\r\n        if (is(x, \"object\")) {\r\n            attr = x;\r\n        } else if (x != null) {\r\n            attr = {\r\n                x: x,\r\n                y: y,\r\n                text: text || \"\"\r\n            };\r\n        }\r\n        return this.el(\"text\", attr);\r\n    };\r\n    /*\\\r\n     * Paper.line\r\n     [ method ]\r\n     **\r\n     * Draws a line\r\n     **\r\n     - x1 (number) x coordinate position of the start\r\n     - y1 (number) y coordinate position of the start\r\n     - x2 (number) x coordinate position of the end\r\n     - y2 (number) y coordinate position of the end\r\n     = (object) the `line` element\r\n     **\r\n     > Usage\r\n     | var t1 = paper.line(50, 50, 100, 100);\r\n    \\*/\r\n    proto.line = function (x1, y1, x2, y2) {\r\n        var attr = {};\r\n        if (is(x1, \"object\")) {\r\n            attr = x1;\r\n        } else if (x1 != null) {\r\n            attr = {\r\n                x1: x1,\r\n                x2: x2,\r\n                y1: y1,\r\n                y2: y2\r\n            };\r\n        }\r\n        return this.el(\"line\", attr);\r\n    };\r\n    /*\\\r\n     * Paper.polyline\r\n     [ method ]\r\n     **\r\n     * Draws a polyline\r\n     **\r\n     - points (array) array of points\r\n     * or\r\n     - varargs (…) points\r\n     = (object) the `polyline` element\r\n     **\r\n     > Usage\r\n     | var p1 = paper.polyline([10, 10, 100, 100]);\r\n     | var p2 = paper.polyline(10, 10, 100, 100);\r\n    \\*/\r\n    proto.polyline = function (points) {\r\n        if (arguments.length > 1) {\r\n            points = Array.prototype.slice.call(arguments, 0);\r\n        }\r\n        var attr = {};\r\n        if (is(points, \"object\") && !is(points, \"array\")) {\r\n            attr = points;\r\n        } else if (points != null) {\r\n            attr = {points: points};\r\n        }\r\n        return this.el(\"polyline\", attr);\r\n    };\r\n    /*\\\r\n     * Paper.polygon\r\n     [ method ]\r\n     **\r\n     * Draws a polygon. See @Paper.polyline\r\n    \\*/\r\n    proto.polygon = function (points) {\r\n        if (arguments.length > 1) {\r\n            points = Array.prototype.slice.call(arguments, 0);\r\n        }\r\n        var attr = {};\r\n        if (is(points, \"object\") && !is(points, \"array\")) {\r\n            attr = points;\r\n        } else if (points != null) {\r\n            attr = {points: points};\r\n        }\r\n        return this.el(\"polygon\", attr);\r\n    };\r\n    // gradients\r\n    (function () {\r\n        var $ = Snap._.$;\r\n        // gradients' helpers\r\n        /*\\\r\n         * Element.stops\r\n         [ method ]\r\n         **\r\n         * Only for gradients!\r\n         * Returns array of gradient stops elements.\r\n         = (array) the stops array.\r\n        \\*/\r\n        function Gstops() {\r\n            return this.selectAll(\"stop\");\r\n        }\r\n        /*\\\r\n         * Element.addStop\r\n         [ method ]\r\n         **\r\n         * Only for gradients!\r\n         * Adds another stop to the gradient.\r\n         - color (string) stops color\r\n         - offset (number) stops offset 0..100\r\n         = (object) gradient element\r\n        \\*/\r\n        function GaddStop(color, offset) {\r\n            var stop = $(\"stop\"),\r\n                attr = {\r\n                    offset: +offset + \"%\"\r\n                };\r\n            color = Snap.color(color);\r\n            attr[\"stop-color\"] = color.hex;\r\n            if (color.opacity < 1) {\r\n                attr[\"stop-opacity\"] = color.opacity;\r\n            }\r\n            $(stop, attr);\r\n            var stops = this.stops(),\r\n                inserted;\r\n            for (var i = 0; i < stops.length; i++) {\r\n                var stopOffset = parseFloat(stops[i].attr(\"offset\"));\r\n                if (stopOffset > offset) {\r\n                    this.node.insertBefore(stop, stops[i].node);\r\n                    inserted = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!inserted) {\r\n                this.node.appendChild(stop);\r\n            }\r\n            return this;\r\n        }\r\n        function GgetBBox() {\r\n            if (this.type == \"linearGradient\") {\r\n                var x1 = $(this.node, \"x1\") || 0,\r\n                    x2 = $(this.node, \"x2\") || 1,\r\n                    y1 = $(this.node, \"y1\") || 0,\r\n                    y2 = $(this.node, \"y2\") || 0;\r\n                return Snap._.box(x1, y1, math.abs(x2 - x1), math.abs(y2 - y1));\r\n            } else {\r\n                var cx = this.node.cx || .5,\r\n                    cy = this.node.cy || .5,\r\n                    r = this.node.r || 0;\r\n                return Snap._.box(cx - r, cy - r, r * 2, r * 2);\r\n            }\r\n        }\r\n        /*\\\r\n         * Element.setStops\r\n         [ method ]\r\n         **\r\n         * Only for gradients!\r\n         * Updates stops of the gradient based on passed gradient descriptor. See @Ppaer.gradient\r\n         - str (string) gradient descriptor part after `()`.\r\n         = (object) gradient element\r\n         | var g = paper.gradient(\"l(0, 0, 1, 1)#000-#f00-#fff\");\r\n         | g.setStops(\"#fff-#000-#f00-#fc0\");\r\n        \\*/\r\n        function GsetStops(str) {\r\n            var grad = str,\r\n                stops = this.stops();\r\n            if (typeof str == \"string\") {\r\n                grad = eve(\"snap.util.grad.parse\", null, \"l(0,0,0,1)\" + str).firstDefined().stops;\r\n            }\r\n            if (!Snap.is(grad, \"array\")) {\r\n                return;\r\n            }\r\n            for (var i = 0; i < stops.length; i++) {\r\n                if (grad[i]) {\r\n                    var color = Snap.color(grad[i].color),\r\n                        attr = {\"offset\": grad[i].offset + \"%\"};\r\n                    attr[\"stop-color\"] = color.hex;\r\n                    if (color.opacity < 1) {\r\n                        attr[\"stop-opacity\"] = color.opacity;\r\n                    }\r\n                    stops[i].attr(attr);\r\n                } else {\r\n                    stops[i].remove();\r\n                }\r\n            }\r\n            for (i = stops.length; i < grad.length; i++) {\r\n                this.addStop(grad[i].color, grad[i].offset);\r\n            }\r\n            return this;\r\n        }\r\n        function gradient(defs, str) {\r\n            var grad = eve(\"snap.util.grad.parse\", null, str).firstDefined(),\r\n                el;\r\n            if (!grad) {\r\n                return null;\r\n            }\r\n            grad.params.unshift(defs);\r\n            if (grad.type.toLowerCase() == \"l\") {\r\n                el = gradientLinear.apply(0, grad.params);\r\n            } else {\r\n                el = gradientRadial.apply(0, grad.params);\r\n            }\r\n            if (grad.type != grad.type.toLowerCase()) {\r\n                $(el.node, {\r\n                    gradientUnits: \"userSpaceOnUse\"\r\n                });\r\n            }\r\n            var stops = grad.stops,\r\n                len = stops.length;\r\n            for (var i = 0; i < len; i++) {\r\n                var stop = stops[i];\r\n                el.addStop(stop.color, stop.offset);\r\n            }\r\n            return el;\r\n        }\r\n        function gradientLinear(defs, x1, y1, x2, y2) {\r\n            var el = Snap._.make(\"linearGradient\", defs);\r\n            el.stops = Gstops;\r\n            el.addStop = GaddStop;\r\n            el.getBBox = GgetBBox;\r\n            el.setStops = GsetStops;\r\n            if (x1 != null) {\r\n                $(el.node, {\r\n                    x1: x1,\r\n                    y1: y1,\r\n                    x2: x2,\r\n                    y2: y2\r\n                });\r\n            }\r\n            return el;\r\n        }\r\n        function gradientRadial(defs, cx, cy, r, fx, fy) {\r\n            var el = Snap._.make(\"radialGradient\", defs);\r\n            el.stops = Gstops;\r\n            el.addStop = GaddStop;\r\n            el.getBBox = GgetBBox;\r\n            if (cx != null) {\r\n                $(el.node, {\r\n                    cx: cx,\r\n                    cy: cy,\r\n                    r: r\r\n                });\r\n            }\r\n            if (fx != null && fy != null) {\r\n                $(el.node, {\r\n                    fx: fx,\r\n                    fy: fy\r\n                });\r\n            }\r\n            return el;\r\n        }\r\n        /*\\\r\n         * Paper.gradient\r\n         [ method ]\r\n         **\r\n         * Creates a gradient element\r\n         **\r\n         - gradient (string) gradient descriptor\r\n         > Gradient Descriptor\r\n         * The gradient descriptor is an expression formatted as\r\n         * follows: `<type>(<coords>)<colors>`.  The `<type>` can be\r\n         * either linear or radial.  The uppercase `L` or `R` letters\r\n         * indicate absolute coordinates offset from the SVG surface.\r\n         * Lowercase `l` or `r` letters indicate coordinates\r\n         * calculated relative to the element to which the gradient is\r\n         * applied.  Coordinates specify a linear gradient vector as\r\n         * `x1`, `y1`, `x2`, `y2`, or a radial gradient as `cx`, `cy`,\r\n         * `r` and optional `fx`, `fy` specifying a focal point away\r\n         * from the center of the circle. Specify `<colors>` as a list\r\n         * of dash-separated CSS color values.  Each color may be\r\n         * followed by a custom offset value, separated with a colon\r\n         * character.\r\n         > Examples\r\n         * Linear gradient, relative from top-left corner to bottom-right\r\n         * corner, from black through red to white:\r\n         | var g = paper.gradient(\"l(0, 0, 1, 1)#000-#f00-#fff\");\r\n         * Linear gradient, absolute from (0, 0) to (100, 100), from black\r\n         * through red at 25% to white:\r\n         | var g = paper.gradient(\"L(0, 0, 100, 100)#000-#f00:25-#fff\");\r\n         * Radial gradient, relative from the center of the element with radius\r\n         * half the width, from black to white:\r\n         | var g = paper.gradient(\"r(0.5, 0.5, 0.5)#000-#fff\");\r\n         * To apply the gradient:\r\n         | paper.circle(50, 50, 40).attr({\r\n         |     fill: g\r\n         | });\r\n         = (object) the `gradient` element\r\n        \\*/\r\n        proto.gradient = function (str) {\r\n            return gradient(this.defs, str);\r\n        };\r\n        proto.gradientLinear = function (x1, y1, x2, y2) {\r\n            return gradientLinear(this.defs, x1, y1, x2, y2);\r\n        };\r\n        proto.gradientRadial = function (cx, cy, r, fx, fy) {\r\n            return gradientRadial(this.defs, cx, cy, r, fx, fy);\r\n        };\r\n        /*\\\r\n         * Paper.toString\r\n         [ method ]\r\n         **\r\n         * Returns SVG code for the @Paper\r\n         = (string) SVG code for the @Paper\r\n        \\*/\r\n        proto.toString = function () {\r\n            var doc = this.node.ownerDocument,\r\n                f = doc.createDocumentFragment(),\r\n                d = doc.createElement(\"div\"),\r\n                svg = this.node.cloneNode(true),\r\n                res;\r\n            f.appendChild(d);\r\n            d.appendChild(svg);\r\n            Snap._.$(svg, {xmlns: \"http://www.w3.org/2000/svg\"});\r\n            res = d.innerHTML;\r\n            f.removeChild(f.firstChild);\r\n            return res;\r\n        };\r\n        /*\\\r\n         * Paper.toDataURL\r\n         [ method ]\r\n         **\r\n         * Returns SVG code for the @Paper as Data URI string.\r\n         = (string) Data URI string\r\n        \\*/\r\n        proto.toDataURL = function () {\r\n            if (window && window.btoa) {\r\n                return \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(this)));\r\n            }\r\n        };\r\n        /*\\\r\n         * Paper.clear\r\n         [ method ]\r\n         **\r\n         * Removes all child nodes of the paper, except <defs>.\r\n        \\*/\r\n        proto.clear = function () {\r\n            var node = this.node.firstChild,\r\n                next;\r\n            while (node) {\r\n                next = node.nextSibling;\r\n                if (node.tagName != \"defs\") {\r\n                    node.parentNode.removeChild(node);\r\n                } else {\r\n                    proto.clear.call({node: node});\r\n                }\r\n                node = next;\r\n            }\r\n        };\r\n    }());\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob) {\r\n    var elproto = Element.prototype,\r\n        is = Snap.is,\r\n        clone = Snap._.clone,\r\n        has = \"hasOwnProperty\",\r\n        p2s = /,?([a-z]),?/gi,\r\n        toFloat = parseFloat,\r\n        math = Math,\r\n        PI = math.PI,\r\n        mmin = math.min,\r\n        mmax = math.max,\r\n        pow = math.pow,\r\n        abs = math.abs;\r\n    function paths(ps) {\r\n        var p = paths.ps = paths.ps || {};\r\n        if (p[ps]) {\r\n            p[ps].sleep = 100;\r\n        } else {\r\n            p[ps] = {\r\n                sleep: 100\r\n            };\r\n        }\r\n        setTimeout(function () {\r\n            for (var key in p) if (p[has](key) && key != ps) {\r\n                p[key].sleep--;\r\n                !p[key].sleep && delete p[key];\r\n            }\r\n        });\r\n        return p[ps];\r\n    }\r\n    function box(x, y, width, height) {\r\n        if (x == null) {\r\n            x = y = width = height = 0;\r\n        }\r\n        if (y == null) {\r\n            y = x.y;\r\n            width = x.width;\r\n            height = x.height;\r\n            x = x.x;\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            width: width,\r\n            w: width,\r\n            height: height,\r\n            h: height,\r\n            x2: x + width,\r\n            y2: y + height,\r\n            cx: x + width / 2,\r\n            cy: y + height / 2,\r\n            r1: math.min(width, height) / 2,\r\n            r2: math.max(width, height) / 2,\r\n            r0: math.sqrt(width * width + height * height) / 2,\r\n            path: rectPath(x, y, width, height),\r\n            vb: [x, y, width, height].join(\" \")\r\n        };\r\n    }\r\n    function toString() {\r\n        return this.join(\",\").replace(p2s, \"$1\");\r\n    }\r\n    function pathClone(pathArray) {\r\n        var res = clone(pathArray);\r\n        res.toString = toString;\r\n        return res;\r\n    }\r\n    function getPointAtSegmentLength(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\r\n        if (length == null) {\r\n            return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\r\n        } else {\r\n            return findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y,\r\n                getTotLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\r\n        }\r\n    }\r\n    function getLengthFactory(istotal, subpath) {\r\n        function O(val) {\r\n            return +(+val).toFixed(3);\r\n        }\r\n        return Snap._.cacher(function (path, length, onlystart) {\r\n            if (path instanceof Element) {\r\n                path = path.attr(\"d\");\r\n            }\r\n            path = path2curve(path);\r\n            var x, y, p, l, sp = \"\", subpaths = {}, point,\r\n                len = 0;\r\n            for (var i = 0, ii = path.length; i < ii; i++) {\r\n                p = path[i];\r\n                if (p[0] == \"M\") {\r\n                    x = +p[1];\r\n                    y = +p[2];\r\n                } else {\r\n                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\r\n                    if (len + l > length) {\r\n                        if (subpath && !subpaths.start) {\r\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\r\n                            sp += [\r\n                                \"C\" + O(point.start.x),\r\n                                O(point.start.y),\r\n                                O(point.m.x),\r\n                                O(point.m.y),\r\n                                O(point.x),\r\n                                O(point.y)\r\n                            ];\r\n                            if (onlystart) {return sp;}\r\n                            subpaths.start = sp;\r\n                            sp = [\r\n                                \"M\" + O(point.x),\r\n                                O(point.y) + \"C\" + O(point.n.x),\r\n                                O(point.n.y),\r\n                                O(point.end.x),\r\n                                O(point.end.y),\r\n                                O(p[5]),\r\n                                O(p[6])\r\n                            ].join();\r\n                            len += l;\r\n                            x = +p[5];\r\n                            y = +p[6];\r\n                            continue;\r\n                        }\r\n                        if (!istotal && !subpath) {\r\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\r\n                            return point;\r\n                        }\r\n                    }\r\n                    len += l;\r\n                    x = +p[5];\r\n                    y = +p[6];\r\n                }\r\n                sp += p.shift() + p;\r\n            }\r\n            subpaths.end = sp;\r\n            point = istotal ? len : subpath ? subpaths : findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\r\n            return point;\r\n        }, null, Snap._.clone);\r\n    }\r\n    var getTotalLength = getLengthFactory(1),\r\n        getPointAtLength = getLengthFactory(),\r\n        getSubpathsAtLength = getLengthFactory(0, 1);\r\n    function findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\r\n        var t1 = 1 - t,\r\n            t13 = pow(t1, 3),\r\n            t12 = pow(t1, 2),\r\n            t2 = t * t,\r\n            t3 = t2 * t,\r\n            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\r\n            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\r\n            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\r\n            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\r\n            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\r\n            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\r\n            ax = t1 * p1x + t * c1x,\r\n            ay = t1 * p1y + t * c1y,\r\n            cx = t1 * c2x + t * p2x,\r\n            cy = t1 * c2y + t * p2y,\r\n            alpha = 90 - math.atan2(mx - nx, my - ny) * 180 / PI;\r\n        // (mx > nx || my < ny) && (alpha += 180);\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            m: {x: mx, y: my},\r\n            n: {x: nx, y: ny},\r\n            start: {x: ax, y: ay},\r\n            end: {x: cx, y: cy},\r\n            alpha: alpha\r\n        };\r\n    }\r\n    function bezierBBox(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\r\n        if (!Snap.is(p1x, \"array\")) {\r\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\r\n        }\r\n        var bbox = curveDim.apply(null, p1x);\r\n        return box(\r\n            bbox.min.x,\r\n            bbox.min.y,\r\n            bbox.max.x - bbox.min.x,\r\n            bbox.max.y - bbox.min.y\r\n        );\r\n    }\r\n    function isPointInsideBBox(bbox, x, y) {\r\n        return  x >= bbox.x &&\r\n                x <= bbox.x + bbox.width &&\r\n                y >= bbox.y &&\r\n                y <= bbox.y + bbox.height;\r\n    }\r\n    function isBBoxIntersect(bbox1, bbox2) {\r\n        bbox1 = box(bbox1);\r\n        bbox2 = box(bbox2);\r\n        return isPointInsideBBox(bbox2, bbox1.x, bbox1.y)\r\n            || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y)\r\n            || isPointInsideBBox(bbox2, bbox1.x, bbox1.y2)\r\n            || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y2)\r\n            || isPointInsideBBox(bbox1, bbox2.x, bbox2.y)\r\n            || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y)\r\n            || isPointInsideBBox(bbox1, bbox2.x, bbox2.y2)\r\n            || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y2)\r\n            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x\r\n                || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)\r\n            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y\r\n                || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\r\n    }\r\n    function base3(t, p1, p2, p3, p4) {\r\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\r\n            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\r\n        return t * t2 - 3 * p1 + 3 * p2;\r\n    }\r\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\r\n        if (z == null) {\r\n            z = 1;\r\n        }\r\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\r\n        var z2 = z / 2,\r\n            n = 12,\r\n            Tvalues = [-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],\r\n            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],\r\n            sum = 0;\r\n        for (var i = 0; i < n; i++) {\r\n            var ct = z2 * Tvalues[i] + z2,\r\n                xbase = base3(ct, x1, x2, x3, x4),\r\n                ybase = base3(ct, y1, y2, y3, y4),\r\n                comb = xbase * xbase + ybase * ybase;\r\n            sum += Cvalues[i] * math.sqrt(comb);\r\n        }\r\n        return z2 * sum;\r\n    }\r\n    function getTotLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\r\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\r\n            return;\r\n        }\r\n        var t = 1,\r\n            step = t / 2,\r\n            t2 = t - step,\r\n            l,\r\n            e = .01;\r\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\r\n        while (abs(l - ll) > e) {\r\n            step /= 2;\r\n            t2 += (l < ll ? 1 : -1) * step;\r\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\r\n        }\r\n        return t2;\r\n    }\r\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\r\n        if (\r\n            mmax(x1, x2) < mmin(x3, x4) ||\r\n            mmin(x1, x2) > mmax(x3, x4) ||\r\n            mmax(y1, y2) < mmin(y3, y4) ||\r\n            mmin(y1, y2) > mmax(y3, y4)\r\n        ) {\r\n            return;\r\n        }\r\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\r\n            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\r\n            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\r\n\r\n        if (!denominator) {\r\n            return;\r\n        }\r\n        var px = nx / denominator,\r\n            py = ny / denominator,\r\n            px2 = +px.toFixed(2),\r\n            py2 = +py.toFixed(2);\r\n        if (\r\n            px2 < +mmin(x1, x2).toFixed(2) ||\r\n            px2 > +mmax(x1, x2).toFixed(2) ||\r\n            px2 < +mmin(x3, x4).toFixed(2) ||\r\n            px2 > +mmax(x3, x4).toFixed(2) ||\r\n            py2 < +mmin(y1, y2).toFixed(2) ||\r\n            py2 > +mmax(y1, y2).toFixed(2) ||\r\n            py2 < +mmin(y3, y4).toFixed(2) ||\r\n            py2 > +mmax(y3, y4).toFixed(2)\r\n        ) {\r\n            return;\r\n        }\r\n        return {x: px, y: py};\r\n    }\r\n    function inter(bez1, bez2) {\r\n        return interHelper(bez1, bez2);\r\n    }\r\n    function interCount(bez1, bez2) {\r\n        return interHelper(bez1, bez2, 1);\r\n    }\r\n    function interHelper(bez1, bez2, justCount) {\r\n        var bbox1 = bezierBBox(bez1),\r\n            bbox2 = bezierBBox(bez2);\r\n        if (!isBBoxIntersect(bbox1, bbox2)) {\r\n            return justCount ? 0 : [];\r\n        }\r\n        var l1 = bezlen.apply(0, bez1),\r\n            l2 = bezlen.apply(0, bez2),\r\n            n1 = ~~(l1 / 8),\r\n            n2 = ~~(l2 / 8),\r\n            dots1 = [],\r\n            dots2 = [],\r\n            xy = {},\r\n            res = justCount ? 0 : [];\r\n        for (var i = 0; i < n1 + 1; i++) {\r\n            var p = findDotsAtSegment.apply(0, bez1.concat(i / n1));\r\n            dots1.push({x: p.x, y: p.y, t: i / n1});\r\n        }\r\n        for (i = 0; i < n2 + 1; i++) {\r\n            p = findDotsAtSegment.apply(0, bez2.concat(i / n2));\r\n            dots2.push({x: p.x, y: p.y, t: i / n2});\r\n        }\r\n        for (i = 0; i < n1; i++) {\r\n            for (var j = 0; j < n2; j++) {\r\n                var di = dots1[i],\r\n                    di1 = dots1[i + 1],\r\n                    dj = dots2[j],\r\n                    dj1 = dots2[j + 1],\r\n                    ci = abs(di1.x - di.x) < .001 ? \"y\" : \"x\",\r\n                    cj = abs(dj1.x - dj.x) < .001 ? \"y\" : \"x\",\r\n                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\r\n                if (is) {\r\n                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\r\n                        continue;\r\n                    }\r\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\r\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\r\n                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\r\n                    if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {\r\n                        if (justCount) {\r\n                            res++;\r\n                        } else {\r\n                            res.push({\r\n                                x: is.x,\r\n                                y: is.y,\r\n                                t1: t1,\r\n                                t2: t2\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    function pathIntersection(path1, path2) {\r\n        return interPathHelper(path1, path2);\r\n    }\r\n    function pathIntersectionNumber(path1, path2) {\r\n        return interPathHelper(path1, path2, 1);\r\n    }\r\n    function interPathHelper(path1, path2, justCount) {\r\n        path1 = path2curve(path1);\r\n        path2 = path2curve(path2);\r\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\r\n            res = justCount ? 0 : [];\r\n        for (var i = 0, ii = path1.length; i < ii; i++) {\r\n            var pi = path1[i];\r\n            if (pi[0] == \"M\") {\r\n                x1 = x1m = pi[1];\r\n                y1 = y1m = pi[2];\r\n            } else {\r\n                if (pi[0] == \"C\") {\r\n                    bez1 = [x1, y1].concat(pi.slice(1));\r\n                    x1 = bez1[6];\r\n                    y1 = bez1[7];\r\n                } else {\r\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\r\n                    x1 = x1m;\r\n                    y1 = y1m;\r\n                }\r\n                for (var j = 0, jj = path2.length; j < jj; j++) {\r\n                    var pj = path2[j];\r\n                    if (pj[0] == \"M\") {\r\n                        x2 = x2m = pj[1];\r\n                        y2 = y2m = pj[2];\r\n                    } else {\r\n                        if (pj[0] == \"C\") {\r\n                            bez2 = [x2, y2].concat(pj.slice(1));\r\n                            x2 = bez2[6];\r\n                            y2 = bez2[7];\r\n                        } else {\r\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\r\n                            x2 = x2m;\r\n                            y2 = y2m;\r\n                        }\r\n                        var intr = interHelper(bez1, bez2, justCount);\r\n                        if (justCount) {\r\n                            res += intr;\r\n                        } else {\r\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\r\n                                intr[k].segment1 = i;\r\n                                intr[k].segment2 = j;\r\n                                intr[k].bez1 = bez1;\r\n                                intr[k].bez2 = bez2;\r\n                            }\r\n                            res = res.concat(intr);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    function isPointInsidePath(path, x, y) {\r\n        var bbox = pathBBox(path);\r\n        return isPointInsideBBox(bbox, x, y) &&\r\n               interPathHelper(path, [[\"M\", x, y], [\"H\", bbox.x2 + 10]], 1) % 2 == 1;\r\n    }\r\n    function pathBBox(path) {\r\n        var pth = paths(path);\r\n        if (pth.bbox) {\r\n            return clone(pth.bbox);\r\n        }\r\n        if (!path) {\r\n            return box();\r\n        }\r\n        path = path2curve(path);\r\n        var x = 0,\r\n            y = 0,\r\n            X = [],\r\n            Y = [],\r\n            p;\r\n        for (var i = 0, ii = path.length; i < ii; i++) {\r\n            p = path[i];\r\n            if (p[0] == \"M\") {\r\n                x = p[1];\r\n                y = p[2];\r\n                X.push(x);\r\n                Y.push(y);\r\n            } else {\r\n                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\r\n                X = X.concat(dim.min.x, dim.max.x);\r\n                Y = Y.concat(dim.min.y, dim.max.y);\r\n                x = p[5];\r\n                y = p[6];\r\n            }\r\n        }\r\n        var xmin = mmin.apply(0, X),\r\n            ymin = mmin.apply(0, Y),\r\n            xmax = mmax.apply(0, X),\r\n            ymax = mmax.apply(0, Y),\r\n            bb = box(xmin, ymin, xmax - xmin, ymax - ymin);\r\n        pth.bbox = clone(bb);\r\n        return bb;\r\n    }\r\n    function rectPath(x, y, w, h, r) {\r\n        if (r) {\r\n            return [\r\n                [\"M\", +x + +r, y],\r\n                [\"l\", w - r * 2, 0],\r\n                [\"a\", r, r, 0, 0, 1, r, r],\r\n                [\"l\", 0, h - r * 2],\r\n                [\"a\", r, r, 0, 0, 1, -r, r],\r\n                [\"l\", r * 2 - w, 0],\r\n                [\"a\", r, r, 0, 0, 1, -r, -r],\r\n                [\"l\", 0, r * 2 - h],\r\n                [\"a\", r, r, 0, 0, 1, r, -r],\r\n                [\"z\"]\r\n            ];\r\n        }\r\n        var res = [[\"M\", x, y], [\"l\", w, 0], [\"l\", 0, h], [\"l\", -w, 0], [\"z\"]];\r\n        res.toString = toString;\r\n        return res;\r\n    }\r\n    function ellipsePath(x, y, rx, ry, a) {\r\n        if (a == null && ry == null) {\r\n            ry = rx;\r\n        }\r\n        x = +x;\r\n        y = +y;\r\n        rx = +rx;\r\n        ry = +ry;\r\n        if (a != null) {\r\n            var rad = Math.PI / 180,\r\n                x1 = x + rx * Math.cos(-ry * rad),\r\n                x2 = x + rx * Math.cos(-a * rad),\r\n                y1 = y + rx * Math.sin(-ry * rad),\r\n                y2 = y + rx * Math.sin(-a * rad),\r\n                res = [[\"M\", x1, y1], [\"A\", rx, rx, 0, +(a - ry > 180), 0, x2, y2]];\r\n        } else {\r\n            res = [\r\n                [\"M\", x, y],\r\n                [\"m\", 0, -ry],\r\n                [\"a\", rx, ry, 0, 1, 1, 0, 2 * ry],\r\n                [\"a\", rx, ry, 0, 1, 1, 0, -2 * ry],\r\n                [\"z\"]\r\n            ];\r\n        }\r\n        res.toString = toString;\r\n        return res;\r\n    }\r\n    var unit2px = Snap._unit2px,\r\n        getPath = {\r\n        path: function (el) {\r\n            return el.attr(\"path\");\r\n        },\r\n        circle: function (el) {\r\n            var attr = unit2px(el);\r\n            return ellipsePath(attr.cx, attr.cy, attr.r);\r\n        },\r\n        ellipse: function (el) {\r\n            var attr = unit2px(el);\r\n            return ellipsePath(attr.cx || 0, attr.cy || 0, attr.rx, attr.ry);\r\n        },\r\n        rect: function (el) {\r\n            var attr = unit2px(el);\r\n            return rectPath(attr.x || 0, attr.y || 0, attr.width, attr.height, attr.rx, attr.ry);\r\n        },\r\n        image: function (el) {\r\n            var attr = unit2px(el);\r\n            return rectPath(attr.x || 0, attr.y || 0, attr.width, attr.height);\r\n        },\r\n        line: function (el) {\r\n            return \"M\" + [el.attr(\"x1\") || 0, el.attr(\"y1\") || 0, el.attr(\"x2\"), el.attr(\"y2\")];\r\n        },\r\n        polyline: function (el) {\r\n            return \"M\" + el.attr(\"points\");\r\n        },\r\n        polygon: function (el) {\r\n            return \"M\" + el.attr(\"points\") + \"z\";\r\n        },\r\n        deflt: function (el) {\r\n            var bbox = el.node.getBBox();\r\n            return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\r\n        }\r\n    };\r\n    function pathToRelative(pathArray) {\r\n        var pth = paths(pathArray),\r\n            lowerCase = String.prototype.toLowerCase;\r\n        if (pth.rel) {\r\n            return pathClone(pth.rel);\r\n        }\r\n        if (!Snap.is(pathArray, \"array\") || !Snap.is(pathArray && pathArray[0], \"array\")) {\r\n            pathArray = Snap.parsePathString(pathArray);\r\n        }\r\n        var res = [],\r\n            x = 0,\r\n            y = 0,\r\n            mx = 0,\r\n            my = 0,\r\n            start = 0;\r\n        if (pathArray[0][0] == \"M\") {\r\n            x = pathArray[0][1];\r\n            y = pathArray[0][2];\r\n            mx = x;\r\n            my = y;\r\n            start++;\r\n            res.push([\"M\", x, y]);\r\n        }\r\n        for (var i = start, ii = pathArray.length; i < ii; i++) {\r\n            var r = res[i] = [],\r\n                pa = pathArray[i];\r\n            if (pa[0] != lowerCase.call(pa[0])) {\r\n                r[0] = lowerCase.call(pa[0]);\r\n                switch (r[0]) {\r\n                    case \"a\":\r\n                        r[1] = pa[1];\r\n                        r[2] = pa[2];\r\n                        r[3] = pa[3];\r\n                        r[4] = pa[4];\r\n                        r[5] = pa[5];\r\n                        r[6] = +(pa[6] - x).toFixed(3);\r\n                        r[7] = +(pa[7] - y).toFixed(3);\r\n                        break;\r\n                    case \"v\":\r\n                        r[1] = +(pa[1] - y).toFixed(3);\r\n                        break;\r\n                    case \"m\":\r\n                        mx = pa[1];\r\n                        my = pa[2];\r\n                    default:\r\n                        for (var j = 1, jj = pa.length; j < jj; j++) {\r\n                            r[j] = +(pa[j] - (j % 2 ? x : y)).toFixed(3);\r\n                        }\r\n                }\r\n            } else {\r\n                r = res[i] = [];\r\n                if (pa[0] == \"m\") {\r\n                    mx = pa[1] + x;\r\n                    my = pa[2] + y;\r\n                }\r\n                for (var k = 0, kk = pa.length; k < kk; k++) {\r\n                    res[i][k] = pa[k];\r\n                }\r\n            }\r\n            var len = res[i].length;\r\n            switch (res[i][0]) {\r\n                case \"z\":\r\n                    x = mx;\r\n                    y = my;\r\n                    break;\r\n                case \"h\":\r\n                    x += +res[i][len - 1];\r\n                    break;\r\n                case \"v\":\r\n                    y += +res[i][len - 1];\r\n                    break;\r\n                default:\r\n                    x += +res[i][len - 2];\r\n                    y += +res[i][len - 1];\r\n            }\r\n        }\r\n        res.toString = toString;\r\n        pth.rel = pathClone(res);\r\n        return res;\r\n    }\r\n    function pathToAbsolute(pathArray) {\r\n        var pth = paths(pathArray);\r\n        if (pth.abs) {\r\n            return pathClone(pth.abs);\r\n        }\r\n        if (!is(pathArray, \"array\") || !is(pathArray && pathArray[0], \"array\")) { // rough assumption\r\n            pathArray = Snap.parsePathString(pathArray);\r\n        }\r\n        if (!pathArray || !pathArray.length) {\r\n            return [[\"M\", 0, 0]];\r\n        }\r\n        var res = [],\r\n            x = 0,\r\n            y = 0,\r\n            mx = 0,\r\n            my = 0,\r\n            start = 0,\r\n            pa0;\r\n        if (pathArray[0][0] == \"M\") {\r\n            x = +pathArray[0][1];\r\n            y = +pathArray[0][2];\r\n            mx = x;\r\n            my = y;\r\n            start++;\r\n            res[0] = [\"M\", x, y];\r\n        }\r\n        var crz = pathArray.length == 3 &&\r\n            pathArray[0][0] == \"M\" &&\r\n            pathArray[1][0].toUpperCase() == \"R\" &&\r\n            pathArray[2][0].toUpperCase() == \"Z\";\r\n        for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\r\n            res.push(r = []);\r\n            pa = pathArray[i];\r\n            pa0 = pa[0];\r\n            if (pa0 != pa0.toUpperCase()) {\r\n                r[0] = pa0.toUpperCase();\r\n                switch (r[0]) {\r\n                    case \"A\":\r\n                        r[1] = pa[1];\r\n                        r[2] = pa[2];\r\n                        r[3] = pa[3];\r\n                        r[4] = pa[4];\r\n                        r[5] = pa[5];\r\n                        r[6] = +pa[6] + x;\r\n                        r[7] = +pa[7] + y;\r\n                        break;\r\n                    case \"V\":\r\n                        r[1] = +pa[1] + y;\r\n                        break;\r\n                    case \"H\":\r\n                        r[1] = +pa[1] + x;\r\n                        break;\r\n                    case \"R\":\r\n                        var dots = [x, y].concat(pa.slice(1));\r\n                        for (var j = 2, jj = dots.length; j < jj; j++) {\r\n                            dots[j] = +dots[j] + x;\r\n                            dots[++j] = +dots[j] + y;\r\n                        }\r\n                        res.pop();\r\n                        res = res.concat(catmullRom2bezier(dots, crz));\r\n                        break;\r\n                    case \"O\":\r\n                        res.pop();\r\n                        dots = ellipsePath(x, y, pa[1], pa[2]);\r\n                        dots.push(dots[0]);\r\n                        res = res.concat(dots);\r\n                        break;\r\n                    case \"U\":\r\n                        res.pop();\r\n                        res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\r\n                        r = [\"U\"].concat(res[res.length - 1].slice(-2));\r\n                        break;\r\n                    case \"M\":\r\n                        mx = +pa[1] + x;\r\n                        my = +pa[2] + y;\r\n                    default:\r\n                        for (j = 1, jj = pa.length; j < jj; j++) {\r\n                            r[j] = +pa[j] + (j % 2 ? x : y);\r\n                        }\r\n                }\r\n            } else if (pa0 == \"R\") {\r\n                dots = [x, y].concat(pa.slice(1));\r\n                res.pop();\r\n                res = res.concat(catmullRom2bezier(dots, crz));\r\n                r = [\"R\"].concat(pa.slice(-2));\r\n            } else if (pa0 == \"O\") {\r\n                res.pop();\r\n                dots = ellipsePath(x, y, pa[1], pa[2]);\r\n                dots.push(dots[0]);\r\n                res = res.concat(dots);\r\n            } else if (pa0 == \"U\") {\r\n                res.pop();\r\n                res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\r\n                r = [\"U\"].concat(res[res.length - 1].slice(-2));\r\n            } else {\r\n                for (var k = 0, kk = pa.length; k < kk; k++) {\r\n                    r[k] = pa[k];\r\n                }\r\n            }\r\n            pa0 = pa0.toUpperCase();\r\n            if (pa0 != \"O\") {\r\n                switch (r[0]) {\r\n                    case \"Z\":\r\n                        x = +mx;\r\n                        y = +my;\r\n                        break;\r\n                    case \"H\":\r\n                        x = r[1];\r\n                        break;\r\n                    case \"V\":\r\n                        y = r[1];\r\n                        break;\r\n                    case \"M\":\r\n                        mx = r[r.length - 2];\r\n                        my = r[r.length - 1];\r\n                    default:\r\n                        x = r[r.length - 2];\r\n                        y = r[r.length - 1];\r\n                }\r\n            }\r\n        }\r\n        res.toString = toString;\r\n        pth.abs = pathClone(res);\r\n        return res;\r\n    }\r\n    function l2c(x1, y1, x2, y2) {\r\n        return [x1, y1, x2, y2, x2, y2];\r\n    }\r\n    function q2c(x1, y1, ax, ay, x2, y2) {\r\n        var _13 = 1 / 3,\r\n            _23 = 2 / 3;\r\n        return [\r\n                _13 * x1 + _23 * ax,\r\n                _13 * y1 + _23 * ay,\r\n                _13 * x2 + _23 * ax,\r\n                _13 * y2 + _23 * ay,\r\n                x2,\r\n                y2\r\n            ];\r\n    }\r\n    function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\r\n        // for more information of where this math came from visit:\r\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\r\n        var _120 = PI * 120 / 180,\r\n            rad = PI / 180 * (+angle || 0),\r\n            res = [],\r\n            xy,\r\n            rotate = Snap._.cacher(function (x, y, rad) {\r\n                var X = x * math.cos(rad) - y * math.sin(rad),\r\n                    Y = x * math.sin(rad) + y * math.cos(rad);\r\n                return {x: X, y: Y};\r\n            });\r\n        if (!rx || !ry) {\r\n            return [x1, y1, x2, y2, x2, y2];\r\n        }\r\n        if (!recursive) {\r\n            xy = rotate(x1, y1, -rad);\r\n            x1 = xy.x;\r\n            y1 = xy.y;\r\n            xy = rotate(x2, y2, -rad);\r\n            x2 = xy.x;\r\n            y2 = xy.y;\r\n            var cos = math.cos(PI / 180 * angle),\r\n                sin = math.sin(PI / 180 * angle),\r\n                x = (x1 - x2) / 2,\r\n                y = (y1 - y2) / 2;\r\n            var h = x * x / (rx * rx) + y * y / (ry * ry);\r\n            if (h > 1) {\r\n                h = math.sqrt(h);\r\n                rx = h * rx;\r\n                ry = h * ry;\r\n            }\r\n            var rx2 = rx * rx,\r\n                ry2 = ry * ry,\r\n                k = (large_arc_flag == sweep_flag ? -1 : 1) *\r\n                    math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\r\n                cx = k * rx * y / ry + (x1 + x2) / 2,\r\n                cy = k * -ry * x / rx + (y1 + y2) / 2,\r\n                f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\r\n                f2 = math.asin(((y2 - cy) / ry).toFixed(9));\r\n\r\n            f1 = x1 < cx ? PI - f1 : f1;\r\n            f2 = x2 < cx ? PI - f2 : f2;\r\n            f1 < 0 && (f1 = PI * 2 + f1);\r\n            f2 < 0 && (f2 = PI * 2 + f2);\r\n            if (sweep_flag && f1 > f2) {\r\n                f1 = f1 - PI * 2;\r\n            }\r\n            if (!sweep_flag && f2 > f1) {\r\n                f2 = f2 - PI * 2;\r\n            }\r\n        } else {\r\n            f1 = recursive[0];\r\n            f2 = recursive[1];\r\n            cx = recursive[2];\r\n            cy = recursive[3];\r\n        }\r\n        var df = f2 - f1;\r\n        if (abs(df) > _120) {\r\n            var f2old = f2,\r\n                x2old = x2,\r\n                y2old = y2;\r\n            f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\r\n            x2 = cx + rx * math.cos(f2);\r\n            y2 = cy + ry * math.sin(f2);\r\n            res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\r\n        }\r\n        df = f2 - f1;\r\n        var c1 = math.cos(f1),\r\n            s1 = math.sin(f1),\r\n            c2 = math.cos(f2),\r\n            s2 = math.sin(f2),\r\n            t = math.tan(df / 4),\r\n            hx = 4 / 3 * rx * t,\r\n            hy = 4 / 3 * ry * t,\r\n            m1 = [x1, y1],\r\n            m2 = [x1 + hx * s1, y1 - hy * c1],\r\n            m3 = [x2 + hx * s2, y2 - hy * c2],\r\n            m4 = [x2, y2];\r\n        m2[0] = 2 * m1[0] - m2[0];\r\n        m2[1] = 2 * m1[1] - m2[1];\r\n        if (recursive) {\r\n            return [m2, m3, m4].concat(res);\r\n        } else {\r\n            res = [m2, m3, m4].concat(res).join().split(\",\");\r\n            var newres = [];\r\n            for (var i = 0, ii = res.length; i < ii; i++) {\r\n                newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\r\n            }\r\n            return newres;\r\n        }\r\n    }\r\n    function findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\r\n        var t1 = 1 - t;\r\n        return {\r\n            x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\r\n            y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\r\n        };\r\n    }\r\n\r\n    // Returns bounding box of cubic bezier curve.\r\n    // Source: http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\r\n    // Original version: NISHIO Hirokazu\r\n    // Modifications: https://github.com/timo22345\r\n    function curveDim(x0, y0, x1, y1, x2, y2, x3, y3) {\r\n        var tvalues = [],\r\n            bounds = [[], []],\r\n            a, b, c, t, t1, t2, b2ac, sqrtb2ac;\r\n        for (var i = 0; i < 2; ++i) {\r\n            if (i == 0) {\r\n                b = 6 * x0 - 12 * x1 + 6 * x2;\r\n                a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\r\n                c = 3 * x1 - 3 * x0;\r\n            } else {\r\n                b = 6 * y0 - 12 * y1 + 6 * y2;\r\n                a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\r\n                c = 3 * y1 - 3 * y0;\r\n            }\r\n            if (abs(a) < 1e-12) {\r\n                if (abs(b) < 1e-12) {\r\n                    continue;\r\n                }\r\n                t = -c / b;\r\n                if (0 < t && t < 1) {\r\n                    tvalues.push(t);\r\n                }\r\n                continue;\r\n            }\r\n            b2ac = b * b - 4 * c * a;\r\n            sqrtb2ac = math.sqrt(b2ac);\r\n            if (b2ac < 0) {\r\n                continue;\r\n            }\r\n            t1 = (-b + sqrtb2ac) / (2 * a);\r\n            if (0 < t1 && t1 < 1) {\r\n                tvalues.push(t1);\r\n            }\r\n            t2 = (-b - sqrtb2ac) / (2 * a);\r\n            if (0 < t2 && t2 < 1) {\r\n                tvalues.push(t2);\r\n            }\r\n        }\r\n\r\n        var x, y, j = tvalues.length,\r\n            jlen = j,\r\n            mt;\r\n        while (j--) {\r\n            t = tvalues[j];\r\n            mt = 1 - t;\r\n            bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\r\n            bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\r\n        }\r\n\r\n        bounds[0][jlen] = x0;\r\n        bounds[1][jlen] = y0;\r\n        bounds[0][jlen + 1] = x3;\r\n        bounds[1][jlen + 1] = y3;\r\n        bounds[0].length = bounds[1].length = jlen + 2;\r\n\r\n\r\n        return {\r\n          min: {x: mmin.apply(0, bounds[0]), y: mmin.apply(0, bounds[1])},\r\n          max: {x: mmax.apply(0, bounds[0]), y: mmax.apply(0, bounds[1])}\r\n        };\r\n    }\r\n\r\n    function path2curve(path, path2) {\r\n        var pth = !path2 && paths(path);\r\n        if (!path2 && pth.curve) {\r\n            return pathClone(pth.curve);\r\n        }\r\n        var p = pathToAbsolute(path),\r\n            p2 = path2 && pathToAbsolute(path2),\r\n            attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\r\n            attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\r\n            processPath = function (path, d, pcom) {\r\n                var nx, ny;\r\n                if (!path) {\r\n                    return [\"C\", d.x, d.y, d.x, d.y, d.x, d.y];\r\n                }\r\n                !(path[0] in {T: 1, Q: 1}) && (d.qx = d.qy = null);\r\n                switch (path[0]) {\r\n                    case \"M\":\r\n                        d.X = path[1];\r\n                        d.Y = path[2];\r\n                        break;\r\n                    case \"A\":\r\n                        path = [\"C\"].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\r\n                        break;\r\n                    case \"S\":\r\n                        if (pcom == \"C\" || pcom == \"S\") { // In \"S\" case we have to take into account, if the previous command is C/S.\r\n                            nx = d.x * 2 - d.bx;          // And reflect the previous\r\n                            ny = d.y * 2 - d.by;          // command's control point relative to the current point.\r\n                        }\r\n                        else {                            // or some else or nothing\r\n                            nx = d.x;\r\n                            ny = d.y;\r\n                        }\r\n                        path = [\"C\", nx, ny].concat(path.slice(1));\r\n                        break;\r\n                    case \"T\":\r\n                        if (pcom == \"Q\" || pcom == \"T\") { // In \"T\" case we have to take into account, if the previous command is Q/T.\r\n                            d.qx = d.x * 2 - d.qx;        // And make a reflection similar\r\n                            d.qy = d.y * 2 - d.qy;        // to case \"S\".\r\n                        }\r\n                        else {                            // or something else or nothing\r\n                            d.qx = d.x;\r\n                            d.qy = d.y;\r\n                        }\r\n                        path = [\"C\"].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\r\n                        break;\r\n                    case \"Q\":\r\n                        d.qx = path[1];\r\n                        d.qy = path[2];\r\n                        path = [\"C\"].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\r\n                        break;\r\n                    case \"L\":\r\n                        path = [\"C\"].concat(l2c(d.x, d.y, path[1], path[2]));\r\n                        break;\r\n                    case \"H\":\r\n                        path = [\"C\"].concat(l2c(d.x, d.y, path[1], d.y));\r\n                        break;\r\n                    case \"V\":\r\n                        path = [\"C\"].concat(l2c(d.x, d.y, d.x, path[1]));\r\n                        break;\r\n                    case \"Z\":\r\n                        path = [\"C\"].concat(l2c(d.x, d.y, d.X, d.Y));\r\n                        break;\r\n                }\r\n                return path;\r\n            },\r\n            fixArc = function (pp, i) {\r\n                if (pp[i].length > 7) {\r\n                    pp[i].shift();\r\n                    var pi = pp[i];\r\n                    while (pi.length) {\r\n                        pcoms1[i] = \"A\"; // if created multiple C:s, their original seg is saved\r\n                        p2 && (pcoms2[i] = \"A\"); // the same as above\r\n                        pp.splice(i++, 0, [\"C\"].concat(pi.splice(0, 6)));\r\n                    }\r\n                    pp.splice(i, 1);\r\n                    ii = mmax(p.length, p2 && p2.length || 0);\r\n                }\r\n            },\r\n            fixM = function (path1, path2, a1, a2, i) {\r\n                if (path1 && path2 && path1[i][0] == \"M\" && path2[i][0] != \"M\") {\r\n                    path2.splice(i, 0, [\"M\", a2.x, a2.y]);\r\n                    a1.bx = 0;\r\n                    a1.by = 0;\r\n                    a1.x = path1[i][1];\r\n                    a1.y = path1[i][2];\r\n                    ii = mmax(p.length, p2 && p2.length || 0);\r\n                }\r\n            },\r\n            pcoms1 = [], // path commands of original path p\r\n            pcoms2 = [], // path commands of original path p2\r\n            pfirst = \"\", // temporary holder for original path command\r\n            pcom = \"\"; // holder for previous path command of original path\r\n        for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\r\n            p[i] && (pfirst = p[i][0]); // save current path command\r\n\r\n            if (pfirst != \"C\") // C is not saved yet, because it may be result of conversion\r\n            {\r\n                pcoms1[i] = pfirst; // Save current path command\r\n                i && ( pcom = pcoms1[i - 1]); // Get previous path command pcom\r\n            }\r\n            p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\r\n\r\n            if (pcoms1[i] != \"A\" && pfirst == \"C\") pcoms1[i] = \"C\"; // A is the only command\r\n            // which may produce multiple C:s\r\n            // so we have to make sure that C is also C in original path\r\n\r\n            fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\r\n\r\n            if (p2) { // the same procedures is done to p2\r\n                p2[i] && (pfirst = p2[i][0]);\r\n                if (pfirst != \"C\") {\r\n                    pcoms2[i] = pfirst;\r\n                    i && (pcom = pcoms2[i - 1]);\r\n                }\r\n                p2[i] = processPath(p2[i], attrs2, pcom);\r\n\r\n                if (pcoms2[i] != \"A\" && pfirst == \"C\") {\r\n                    pcoms2[i] = \"C\";\r\n                }\r\n\r\n                fixArc(p2, i);\r\n            }\r\n            fixM(p, p2, attrs, attrs2, i);\r\n            fixM(p2, p, attrs2, attrs, i);\r\n            var seg = p[i],\r\n                seg2 = p2 && p2[i],\r\n                seglen = seg.length,\r\n                seg2len = p2 && seg2.length;\r\n            attrs.x = seg[seglen - 2];\r\n            attrs.y = seg[seglen - 1];\r\n            attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\r\n            attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\r\n            attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\r\n            attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\r\n            attrs2.x = p2 && seg2[seg2len - 2];\r\n            attrs2.y = p2 && seg2[seg2len - 1];\r\n        }\r\n        if (!p2) {\r\n            pth.curve = pathClone(p);\r\n        }\r\n        return p2 ? [p, p2] : p;\r\n    }\r\n    function mapPath(path, matrix) {\r\n        if (!matrix) {\r\n            return path;\r\n        }\r\n        var x, y, i, j, ii, jj, pathi;\r\n        path = path2curve(path);\r\n        for (i = 0, ii = path.length; i < ii; i++) {\r\n            pathi = path[i];\r\n            for (j = 1, jj = pathi.length; j < jj; j += 2) {\r\n                x = matrix.x(pathi[j], pathi[j + 1]);\r\n                y = matrix.y(pathi[j], pathi[j + 1]);\r\n                pathi[j] = x;\r\n                pathi[j + 1] = y;\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n\r\n    // http://schepers.cc/getting-to-the-point\r\n    function catmullRom2bezier(crp, z) {\r\n        var d = [];\r\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\r\n            var p = [\r\n                        {x: +crp[i - 2], y: +crp[i - 1]},\r\n                        {x: +crp[i],     y: +crp[i + 1]},\r\n                        {x: +crp[i + 2], y: +crp[i + 3]},\r\n                        {x: +crp[i + 4], y: +crp[i + 5]}\r\n                    ];\r\n            if (z) {\r\n                if (!i) {\r\n                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};\r\n                } else if (iLen - 4 == i) {\r\n                    p[3] = {x: +crp[0], y: +crp[1]};\r\n                } else if (iLen - 2 == i) {\r\n                    p[2] = {x: +crp[0], y: +crp[1]};\r\n                    p[3] = {x: +crp[2], y: +crp[3]};\r\n                }\r\n            } else {\r\n                if (iLen - 4 == i) {\r\n                    p[3] = p[2];\r\n                } else if (!i) {\r\n                    p[0] = {x: +crp[i], y: +crp[i + 1]};\r\n                }\r\n            }\r\n            d.push([\"C\",\r\n                  (-p[0].x + 6 * p[1].x + p[2].x) / 6,\r\n                  (-p[0].y + 6 * p[1].y + p[2].y) / 6,\r\n                  (p[1].x + 6 * p[2].x - p[3].x) / 6,\r\n                  (p[1].y + 6*p[2].y - p[3].y) / 6,\r\n                  p[2].x,\r\n                  p[2].y\r\n            ]);\r\n        }\r\n\r\n        return d;\r\n    }\r\n\r\n    // export\r\n    Snap.path = paths;\r\n\r\n    /*\\\r\n     * Snap.path.getTotalLength\r\n     [ method ]\r\n     **\r\n     * Returns the length of the given path in pixels\r\n     **\r\n     - path (string) SVG path string\r\n     **\r\n     = (number) length\r\n    \\*/\r\n    Snap.path.getTotalLength = getTotalLength;\r\n    /*\\\r\n     * Snap.path.getPointAtLength\r\n     [ method ]\r\n     **\r\n     * Returns the coordinates of the point located at the given length along the given path\r\n     **\r\n     - path (string) SVG path string\r\n     - length (number) length, in pixels, from the start of the path, excluding non-rendering jumps\r\n     **\r\n     = (object) representation of the point:\r\n     o {\r\n     o     x: (number) x coordinate,\r\n     o     y: (number) y coordinate,\r\n     o     alpha: (number) angle of derivative\r\n     o }\r\n    \\*/\r\n    Snap.path.getPointAtLength = getPointAtLength;\r\n    /*\\\r\n     * Snap.path.getSubpath\r\n     [ method ]\r\n     **\r\n     * Returns the subpath of a given path between given start and end lengths\r\n     **\r\n     - path (string) SVG path string\r\n     - from (number) length, in pixels, from the start of the path to the start of the segment\r\n     - to (number) length, in pixels, from the start of the path to the end of the segment\r\n     **\r\n     = (string) path string definition for the segment\r\n    \\*/\r\n    Snap.path.getSubpath = function (path, from, to) {\r\n        if (this.getTotalLength(path) - to < 1e-6) {\r\n            return getSubpathsAtLength(path, from).end;\r\n        }\r\n        var a = getSubpathsAtLength(path, to, 1);\r\n        return from ? getSubpathsAtLength(a, from).end : a;\r\n    };\r\n    /*\\\r\n     * Element.getTotalLength\r\n     [ method ]\r\n     **\r\n     * Returns the length of the path in pixels (only works for `path` elements)\r\n     = (number) length\r\n    \\*/\r\n    elproto.getTotalLength = function () {\r\n        if (this.node.getTotalLength) {\r\n            return this.node.getTotalLength();\r\n        }\r\n    };\r\n    // SIERRA Element.getPointAtLength()/Element.getTotalLength(): If a <path> is broken into different segments, is the jump distance to the new coordinates set by the _M_ or _m_ commands calculated as part of the path's total length?\r\n    /*\\\r\n     * Element.getPointAtLength\r\n     [ method ]\r\n     **\r\n     * Returns coordinates of the point located at the given length on the given path (only works for `path` elements)\r\n     **\r\n     - length (number) length, in pixels, from the start of the path, excluding non-rendering jumps\r\n     **\r\n     = (object) representation of the point:\r\n     o {\r\n     o     x: (number) x coordinate,\r\n     o     y: (number) y coordinate,\r\n     o     alpha: (number) angle of derivative\r\n     o }\r\n    \\*/\r\n    elproto.getPointAtLength = function (length) {\r\n        return getPointAtLength(this.attr(\"d\"), length);\r\n    };\r\n    // SIERRA Element.getSubpath(): Similar to the problem for Element.getPointAtLength(). Unclear how this would work for a segmented path. Overall, the concept of _subpath_ and what I'm calling a _segment_ (series of non-_M_ or _Z_ commands) is unclear.\r\n    /*\\\r\n     * Element.getSubpath\r\n     [ method ]\r\n     **\r\n     * Returns subpath of a given element from given start and end lengths (only works for `path` elements)\r\n     **\r\n     - from (number) length, in pixels, from the start of the path to the start of the segment\r\n     - to (number) length, in pixels, from the start of the path to the end of the segment\r\n     **\r\n     = (string) path string definition for the segment\r\n    \\*/\r\n    elproto.getSubpath = function (from, to) {\r\n        return Snap.path.getSubpath(this.attr(\"d\"), from, to);\r\n    };\r\n    Snap._.box = box;\r\n    /*\\\r\n     * Snap.path.findDotsAtSegment\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Finds dot coordinates on the given cubic beziér curve at the given t\r\n     - p1x (number) x of the first point of the curve\r\n     - p1y (number) y of the first point of the curve\r\n     - c1x (number) x of the first anchor of the curve\r\n     - c1y (number) y of the first anchor of the curve\r\n     - c2x (number) x of the second anchor of the curve\r\n     - c2y (number) y of the second anchor of the curve\r\n     - p2x (number) x of the second point of the curve\r\n     - p2y (number) y of the second point of the curve\r\n     - t (number) position on the curve (0..1)\r\n     = (object) point information in format:\r\n     o {\r\n     o     x: (number) x coordinate of the point,\r\n     o     y: (number) y coordinate of the point,\r\n     o     m: {\r\n     o         x: (number) x coordinate of the left anchor,\r\n     o         y: (number) y coordinate of the left anchor\r\n     o     },\r\n     o     n: {\r\n     o         x: (number) x coordinate of the right anchor,\r\n     o         y: (number) y coordinate of the right anchor\r\n     o     },\r\n     o     start: {\r\n     o         x: (number) x coordinate of the start of the curve,\r\n     o         y: (number) y coordinate of the start of the curve\r\n     o     },\r\n     o     end: {\r\n     o         x: (number) x coordinate of the end of the curve,\r\n     o         y: (number) y coordinate of the end of the curve\r\n     o     },\r\n     o     alpha: (number) angle of the curve derivative at the point\r\n     o }\r\n    \\*/\r\n    Snap.path.findDotsAtSegment = findDotsAtSegment;\r\n    /*\\\r\n     * Snap.path.bezierBBox\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Returns the bounding box of a given cubic beziér curve\r\n     - p1x (number) x of the first point of the curve\r\n     - p1y (number) y of the first point of the curve\r\n     - c1x (number) x of the first anchor of the curve\r\n     - c1y (number) y of the first anchor of the curve\r\n     - c2x (number) x of the second anchor of the curve\r\n     - c2y (number) y of the second anchor of the curve\r\n     - p2x (number) x of the second point of the curve\r\n     - p2y (number) y of the second point of the curve\r\n     * or\r\n     - bez (array) array of six points for beziér curve\r\n     = (object) bounding box\r\n     o {\r\n     o     x: (number) x coordinate of the left top point of the box,\r\n     o     y: (number) y coordinate of the left top point of the box,\r\n     o     x2: (number) x coordinate of the right bottom point of the box,\r\n     o     y2: (number) y coordinate of the right bottom point of the box,\r\n     o     width: (number) width of the box,\r\n     o     height: (number) height of the box\r\n     o }\r\n    \\*/\r\n    Snap.path.bezierBBox = bezierBBox;\r\n    /*\\\r\n     * Snap.path.isPointInsideBBox\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Returns `true` if given point is inside bounding box\r\n     - bbox (string) bounding box\r\n     - x (string) x coordinate of the point\r\n     - y (string) y coordinate of the point\r\n     = (boolean) `true` if point is inside\r\n    \\*/\r\n    Snap.path.isPointInsideBBox = isPointInsideBBox;\r\n    Snap.closest = function (x, y, X, Y) {\r\n        var r = 100,\r\n            b = box(x - r / 2, y - r / 2, r, r),\r\n            inside = [],\r\n            getter = X[0].hasOwnProperty(\"x\") ? function (i) {\r\n                return {\r\n                    x: X[i].x,\r\n                    y: X[i].y\r\n                };\r\n            } : function (i) {\r\n                return {\r\n                    x: X[i],\r\n                    y: Y[i]\r\n                };\r\n            },\r\n            found = 0;\r\n        while (r <= 1e6 && !found) {\r\n            for (var i = 0, ii = X.length; i < ii; i++) {\r\n                var xy = getter(i);\r\n                if (isPointInsideBBox(b, xy.x, xy.y)) {\r\n                    found++;\r\n                    inside.push(xy);\r\n                    break;\r\n                }\r\n            }\r\n            if (!found) {\r\n                r *= 2;\r\n                b = box(x - r / 2, y - r / 2, r, r)\r\n            }\r\n        }\r\n        if (r == 1e6) {\r\n            return;\r\n        }\r\n        var len = Infinity,\r\n            res;\r\n        for (i = 0, ii = inside.length; i < ii; i++) {\r\n            var l = Snap.len(x, y, inside[i].x, inside[i].y);\r\n            if (len > l) {\r\n                len = l;\r\n                inside[i].len = l;\r\n                res = inside[i];\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    /*\\\r\n     * Snap.path.isBBoxIntersect\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Returns `true` if two bounding boxes intersect\r\n     - bbox1 (string) first bounding box\r\n     - bbox2 (string) second bounding box\r\n     = (boolean) `true` if bounding boxes intersect\r\n    \\*/\r\n    Snap.path.isBBoxIntersect = isBBoxIntersect;\r\n    /*\\\r\n     * Snap.path.intersection\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Finds intersections of two paths\r\n     - path1 (string) path string\r\n     - path2 (string) path string\r\n     = (array) dots of intersection\r\n     o [\r\n     o     {\r\n     o         x: (number) x coordinate of the point,\r\n     o         y: (number) y coordinate of the point,\r\n     o         t1: (number) t value for segment of path1,\r\n     o         t2: (number) t value for segment of path2,\r\n     o         segment1: (number) order number for segment of path1,\r\n     o         segment2: (number) order number for segment of path2,\r\n     o         bez1: (array) eight coordinates representing beziér curve for the segment of path1,\r\n     o         bez2: (array) eight coordinates representing beziér curve for the segment of path2\r\n     o     }\r\n     o ]\r\n    \\*/\r\n    Snap.path.intersection = pathIntersection;\r\n    Snap.path.intersectionNumber = pathIntersectionNumber;\r\n    /*\\\r\n     * Snap.path.isPointInside\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Returns `true` if given point is inside a given closed path.\r\n     *\r\n     * Note: fill mode doesn’t affect the result of this method.\r\n     - path (string) path string\r\n     - x (number) x of the point\r\n     - y (number) y of the point\r\n     = (boolean) `true` if point is inside the path\r\n    \\*/\r\n    Snap.path.isPointInside = isPointInsidePath;\r\n    /*\\\r\n     * Snap.path.getBBox\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Returns the bounding box of a given path\r\n     - path (string) path string\r\n     = (object) bounding box\r\n     o {\r\n     o     x: (number) x coordinate of the left top point of the box,\r\n     o     y: (number) y coordinate of the left top point of the box,\r\n     o     x2: (number) x coordinate of the right bottom point of the box,\r\n     o     y2: (number) y coordinate of the right bottom point of the box,\r\n     o     width: (number) width of the box,\r\n     o     height: (number) height of the box\r\n     o }\r\n    \\*/\r\n    Snap.path.getBBox = pathBBox;\r\n    Snap.path.get = getPath;\r\n    /*\\\r\n     * Snap.path.toRelative\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Converts path coordinates into relative values\r\n     - path (string) path string\r\n     = (array) path string\r\n    \\*/\r\n    Snap.path.toRelative = pathToRelative;\r\n    /*\\\r\n     * Snap.path.toAbsolute\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Converts path coordinates into absolute values\r\n     - path (string) path string\r\n     = (array) path string\r\n    \\*/\r\n    Snap.path.toAbsolute = pathToAbsolute;\r\n    /*\\\r\n     * Snap.path.toCubic\r\n     [ method ]\r\n     **\r\n     * Utility method\r\n     **\r\n     * Converts path to a new path where all segments are cubic beziér curves\r\n     - pathString (string|array) path string or array of segments\r\n     = (array) array of segments\r\n    \\*/\r\n    Snap.path.toCubic = path2curve;\r\n    /*\\\r\n     * Snap.path.map\r\n     [ method ]\r\n     **\r\n     * Transform the path string with the given matrix\r\n     - path (string) path string\r\n     - matrix (object) see @Matrix\r\n     = (string) transformed path string\r\n    \\*/\r\n    Snap.path.map = mapPath;\r\n    Snap.path.toString = toString;\r\n    Snap.path.clone = pathClone;\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob) {\r\n    var mmax = Math.max,\r\n        mmin = Math.min;\r\n\r\n    // Set\r\n    var Set = function (items) {\r\n        this.items = [];\r\n\tthis.bindings = {};\r\n        this.length = 0;\r\n        this.type = \"set\";\r\n        if (items) {\r\n            for (var i = 0, ii = items.length; i < ii; i++) {\r\n                if (items[i]) {\r\n                    this[this.items.length] = this.items[this.items.length] = items[i];\r\n                    this.length++;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setproto = Set.prototype;\r\n    /*\\\r\n     * Set.push\r\n     [ method ]\r\n     **\r\n     * Adds each argument to the current set\r\n     = (object) original element\r\n    \\*/\r\n    setproto.push = function () {\r\n        var item,\r\n            len;\r\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\r\n            item = arguments[i];\r\n            if (item) {\r\n                len = this.items.length;\r\n                this[len] = this.items[len] = item;\r\n                this.length++;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Set.pop\r\n     [ method ]\r\n     **\r\n     * Removes last element and returns it\r\n     = (object) element\r\n    \\*/\r\n    setproto.pop = function () {\r\n        this.length && delete this[this.length--];\r\n        return this.items.pop();\r\n    };\r\n    /*\\\r\n     * Set.forEach\r\n     [ method ]\r\n     **\r\n     * Executes given function for each element in the set\r\n     *\r\n     * If the function returns `false`, the loop stops running.\r\n     **\r\n     - callback (function) function to run\r\n     - thisArg (object) context object for the callback\r\n     = (object) Set object\r\n    \\*/\r\n    setproto.forEach = function (callback, thisArg) {\r\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\r\n            if (callback.call(thisArg, this.items[i], i) === false) {\r\n                return this;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Set.animate\r\n     [ method ]\r\n     **\r\n     * Animates each element in set in sync.\r\n     *\r\n     **\r\n     - attrs (object) key-value pairs of destination attributes\r\n     - duration (number) duration of the animation in milliseconds\r\n     - easing (function) #optional easing function from @mina or custom\r\n     - callback (function) #optional callback function that executes when the animation ends\r\n     * or\r\n     - animation (array) array of animation parameter for each element in set in format `[attrs, duration, easing, callback]`\r\n     > Usage\r\n     | // animate all elements in set to radius 10\r\n     | set.animate({r: 10}, 500, mina.easein);\r\n     | // or\r\n     | // animate first element to radius 10, but second to radius 20 and in different time\r\n     | set.animate([{r: 10}, 500, mina.easein], [{r: 20}, 1500, mina.easein]);\r\n     = (Element) the current element\r\n    \\*/\r\n    setproto.animate = function (attrs, ms, easing, callback) {\r\n        if (typeof easing == \"function\" && !easing.length) {\r\n            callback = easing;\r\n            easing = mina.linear;\r\n        }\r\n        if (attrs instanceof Snap._.Animation) {\r\n            callback = attrs.callback;\r\n            easing = attrs.easing;\r\n            ms = easing.dur;\r\n            attrs = attrs.attr;\r\n        }\r\n        var args = arguments;\r\n        if (Snap.is(attrs, \"array\") && Snap.is(args[args.length - 1], \"array\")) {\r\n            var each = true;\r\n        }\r\n        var begin,\r\n            handler = function () {\r\n                if (begin) {\r\n                    this.b = begin;\r\n                } else {\r\n                    begin = this.b;\r\n                }\r\n            },\r\n            cb = 0,\r\n            set = this,\r\n            callbacker = callback && function () {\r\n                if (++cb == set.length) {\r\n                    callback.call(this);\r\n                }\r\n            };\r\n        return this.forEach(function (el, i) {\r\n            eve.once(\"snap.animcreated.\" + el.id, handler);\r\n            if (each) {\r\n                args[i] && el.animate.apply(el, args[i]);\r\n            } else {\r\n                el.animate(attrs, ms, easing, callbacker);\r\n            }\r\n        });\r\n    };\r\n    /*\\\r\n     * Set.remove\r\n     [ method ]\r\n     **\r\n     * Removes all children of the set.\r\n     *\r\n     = (object) Set object\r\n    \\*/\r\n    setproto.remove = function () {\r\n        while (this.length) {\r\n            this.pop().remove();\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Set.bind\r\n     [ method ]\r\n     **\r\n     * Specifies how to handle a specific attribute when applied\r\n     * to a set.\r\n     *\r\n     **\r\n     - attr (string) attribute name\r\n     - callback (function) function to run\r\n     * or\r\n     - attr (string) attribute name\r\n     - element (Element) specific element in the set to apply the attribute to\r\n     * or\r\n     - attr (string) attribute name\r\n     - element (Element) specific element in the set to apply the attribute to\r\n     - eattr (string) attribute on the element to bind the attribute to\r\n     = (object) Set object\r\n    \\*/\r\n    setproto.bind = function (attr, a, b) {\r\n        var data = {};\r\n        if (typeof a == \"function\") {\r\n            this.bindings[attr] = a;\r\n        } else {\r\n            var aname = b || attr;\r\n            this.bindings[attr] = function (v) {\r\n                data[aname] = v;\r\n                a.attr(data);\r\n            };\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Set.attr\r\n     [ method ]\r\n     **\r\n     * Equivalent of @Element.attr.\r\n     = (object) Set object\r\n    \\*/\r\n    setproto.attr = function (value) {\r\n        var unbound = {};\r\n        for (var k in value) {\r\n            if (this.bindings[k]) {\r\n                this.bindings[k](value[k]);\r\n            } else {\r\n                unbound[k] = value[k];\r\n            }\r\n        }\r\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\r\n            this.items[i].attr(unbound);\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Set.clear\r\n     [ method ]\r\n     **\r\n     * Removes all elements from the set\r\n    \\*/\r\n    setproto.clear = function () {\r\n        while (this.length) {\r\n            this.pop();\r\n        }\r\n    };\r\n    /*\\\r\n     * Set.splice\r\n     [ method ]\r\n     **\r\n     * Removes range of elements from the set\r\n     **\r\n     - index (number) position of the deletion\r\n     - count (number) number of element to remove\r\n     - insertion… (object) #optional elements to insert\r\n     = (object) set elements that were deleted\r\n    \\*/\r\n    setproto.splice = function (index, count, insertion) {\r\n        index = index < 0 ? mmax(this.length + index, 0) : index;\r\n        count = mmax(0, mmin(this.length - index, count));\r\n        var tail = [],\r\n            todel = [],\r\n            args = [],\r\n            i;\r\n        for (i = 2; i < arguments.length; i++) {\r\n            args.push(arguments[i]);\r\n        }\r\n        for (i = 0; i < count; i++) {\r\n            todel.push(this[index + i]);\r\n        }\r\n        for (; i < this.length - index; i++) {\r\n            tail.push(this[index + i]);\r\n        }\r\n        var arglen = args.length;\r\n        for (i = 0; i < arglen + tail.length; i++) {\r\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\r\n        }\r\n        i = this.items.length = this.length -= count - arglen;\r\n        while (this[i]) {\r\n            delete this[i++];\r\n        }\r\n        return new Set(todel);\r\n    };\r\n    /*\\\r\n     * Set.exclude\r\n     [ method ]\r\n     **\r\n     * Removes given element from the set\r\n     **\r\n     - element (object) element to remove\r\n     = (boolean) `true` if object was found and removed from the set\r\n    \\*/\r\n    setproto.exclude = function (el) {\r\n        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {\r\n            this.splice(i, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /*\\\r\n     * Set.insertAfter\r\n     [ method ]\r\n     **\r\n     * Inserts set elements after given element.\r\n     **\r\n     - element (object) set will be inserted after this element\r\n     = (object) Set object\r\n    \\*/\r\n    setproto.insertAfter = function (el) {\r\n        var i = this.items.length;\r\n        while (i--) {\r\n            this.items[i].insertAfter(el);\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Set.getBBox\r\n     [ method ]\r\n     **\r\n     * Union of all bboxes of the set. See @Element.getBBox.\r\n     = (object) bounding box descriptor. See @Element.getBBox.\r\n    \\*/\r\n    setproto.getBBox = function () {\r\n        var x = [],\r\n            y = [],\r\n            x2 = [],\r\n            y2 = [];\r\n        for (var i = this.items.length; i--;) if (!this.items[i].removed) {\r\n            var box = this.items[i].getBBox();\r\n            x.push(box.x);\r\n            y.push(box.y);\r\n            x2.push(box.x + box.width);\r\n            y2.push(box.y + box.height);\r\n        }\r\n        x = mmin.apply(0, x);\r\n        y = mmin.apply(0, y);\r\n        x2 = mmax.apply(0, x2);\r\n        y2 = mmax.apply(0, y2);\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            x2: x2,\r\n            y2: y2,\r\n            width: x2 - x,\r\n            height: y2 - y,\r\n            cx: x + (x2 - x) / 2,\r\n            cy: y + (y2 - y) / 2\r\n        };\r\n    };\r\n    /*\\\r\n     * Set.insertAfter\r\n     [ method ]\r\n     **\r\n     * Creates a clone of the set.\r\n     **\r\n     = (object) New Set object\r\n    \\*/\r\n    setproto.clone = function (s) {\r\n        s = new Set;\r\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\r\n            s.push(this.items[i].clone());\r\n        }\r\n        return s;\r\n    };\r\n    setproto.toString = function () {\r\n        return \"Snap\\u2018s set\";\r\n    };\r\n    setproto.type = \"set\";\r\n    // export\r\n    /*\\\r\n     * Snap.Set\r\n     [ property ]\r\n     **\r\n     * Set constructor.\r\n    \\*/\r\n    Snap.Set = Set;\r\n    /*\\\r\n     * Snap.set\r\n     [ method ]\r\n     **\r\n     * Creates a set and fills it with list of arguments.\r\n     **\r\n     = (object) New Set object\r\n     | var r = paper.rect(0, 0, 10, 10),\r\n     |     s1 = Snap.set(), // empty set\r\n     |     s2 = Snap.set(r, paper.circle(100, 100, 20)); // prefilled set\r\n    \\*/\r\n    Snap.set = function () {\r\n        var set = new Set;\r\n        if (arguments.length) {\r\n            set.push.apply(set, Array.prototype.slice.call(arguments, 0));\r\n        }\r\n        return set;\r\n    };\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob) {\r\n    var names = {},\r\n        reUnit = /[%a-z]+$/i,\r\n        Str = String;\r\n    names.stroke = names.fill = \"colour\";\r\n    function getEmpty(item) {\r\n        var l = item[0];\r\n        switch (l.toLowerCase()) {\r\n            case \"t\": return [l, 0, 0];\r\n            case \"m\": return [l, 1, 0, 0, 1, 0, 0];\r\n            case \"r\": if (item.length == 4) {\r\n                return [l, 0, item[2], item[3]];\r\n            } else {\r\n                return [l, 0];\r\n            }\r\n            case \"s\": if (item.length == 5) {\r\n                return [l, 1, 1, item[3], item[4]];\r\n            } else if (item.length == 3) {\r\n                return [l, 1, 1];\r\n            } else {\r\n                return [l, 1];\r\n            }\r\n        }\r\n    }\r\n    function equaliseTransform(t1, t2, getBBox) {\r\n        t1 = t1 || new Snap.Matrix;\r\n        t2 = t2 || new Snap.Matrix;\r\n        t1 = Snap.parseTransformString(t1.toTransformString()) || [];\r\n        t2 = Snap.parseTransformString(t2.toTransformString()) || [];\r\n        var maxlength = Math.max(t1.length, t2.length),\r\n            from = [],\r\n            to = [],\r\n            i = 0, j, jj,\r\n            tt1, tt2;\r\n        for (; i < maxlength; i++) {\r\n            tt1 = t1[i] || getEmpty(t2[i]);\r\n            tt2 = t2[i] || getEmpty(tt1);\r\n            if (tt1[0] != tt2[0] ||\r\n                tt1[0].toLowerCase() == \"r\" && (tt1[2] != tt2[2] || tt1[3] != tt2[3]) ||\r\n                tt1[0].toLowerCase() == \"s\" && (tt1[3] != tt2[3] || tt1[4] != tt2[4])\r\n                ) {\r\n                    t1 = Snap._.transform2matrix(t1, getBBox());\r\n                    t2 = Snap._.transform2matrix(t2, getBBox());\r\n                    from = [[\"m\", t1.a, t1.b, t1.c, t1.d, t1.e, t1.f]];\r\n                    to = [[\"m\", t2.a, t2.b, t2.c, t2.d, t2.e, t2.f]];\r\n                    break;\r\n            }\r\n            from[i] = [];\r\n            to[i] = [];\r\n            for (j = 0, jj = Math.max(tt1.length, tt2.length); j < jj; j++) {\r\n                j in tt1 && (from[i][j] = tt1[j]);\r\n                j in tt2 && (to[i][j] = tt2[j]);\r\n            }\r\n        }\r\n        return {\r\n            from: path2array(from),\r\n            to: path2array(to),\r\n            f: getPath(from)\r\n        };\r\n    }\r\n    function getNumber(val) {\r\n        return val;\r\n    }\r\n    function getUnit(unit) {\r\n        return function (val) {\r\n            return +val.toFixed(3) + unit;\r\n        };\r\n    }\r\n    function getViewBox(val) {\r\n        return val.join(\" \");\r\n    }\r\n    function getColour(clr) {\r\n        return Snap.rgb(clr[0], clr[1], clr[2], clr[3]);\r\n    }\r\n    function getPath(path) {\r\n        var k = 0, i, ii, j, jj, out, a, b = [];\r\n        for (i = 0, ii = path.length; i < ii; i++) {\r\n            out = \"[\";\r\n            a = ['\"' + path[i][0] + '\"'];\r\n            for (j = 1, jj = path[i].length; j < jj; j++) {\r\n                a[j] = \"val[\" + k++ + \"]\";\r\n            }\r\n            out += a + \"]\";\r\n            b[i] = out;\r\n        }\r\n        return Function(\"val\", \"return Snap.path.toString.call([\" + b + \"])\");\r\n    }\r\n    function path2array(path) {\r\n        var out = [];\r\n        for (var i = 0, ii = path.length; i < ii; i++) {\r\n            for (var j = 1, jj = path[i].length; j < jj; j++) {\r\n                out.push(path[i][j]);\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n    function isNumeric(obj) {\r\n        return isFinite(obj);\r\n    }\r\n    function arrayEqual(arr1, arr2) {\r\n        if (!Snap.is(arr1, \"array\") || !Snap.is(arr2, \"array\")) {\r\n            return false;\r\n        }\r\n        return arr1.toString() == arr2.toString();\r\n    }\r\n    Element.prototype.equal = function (name, b) {\r\n        return eve(\"snap.util.equal\", this, name, b).firstDefined();\r\n    };\r\n    eve.on(\"snap.util.equal\", function (name, b) {\r\n        var A, B, a = Str(this.attr(name) || \"\"),\r\n            el = this;\r\n        if (names[name] == \"colour\") {\r\n            A = Snap.color(a);\r\n            B = Snap.color(b);\r\n            return {\r\n                from: [A.r, A.g, A.b, A.opacity],\r\n                to: [B.r, B.g, B.b, B.opacity],\r\n                f: getColour\r\n            };\r\n        }\r\n        if (name == \"viewBox\") {\r\n            A = this.attr(name).vb.split(\" \").map(Number);\r\n            B = b.split(\" \").map(Number);\r\n            return {\r\n                from: A,\r\n                to: B,\r\n                f: getViewBox\r\n            };\r\n        }\r\n        if (name == \"transform\" || name == \"gradientTransform\" || name == \"patternTransform\") {\r\n            if (typeof b == \"string\") {\r\n                b = Str(b).replace(/\\.{3}|\\u2026/g, a);\r\n            }\r\n            a = this.matrix;\r\n            if (!Snap._.rgTransform.test(b)) {\r\n                b = Snap._.transform2matrix(Snap._.svgTransform2string(b), this.getBBox());\r\n            } else {\r\n                b = Snap._.transform2matrix(b, this.getBBox());\r\n            }\r\n            return equaliseTransform(a, b, function () {\r\n                return el.getBBox(1);\r\n            });\r\n        }\r\n        if (name == \"d\" || name == \"path\") {\r\n            A = Snap.path.toCubic(a, b);\r\n            return {\r\n                from: path2array(A[0]),\r\n                to: path2array(A[1]),\r\n                f: getPath(A[0])\r\n            };\r\n        }\r\n        if (name == \"points\") {\r\n            A = Str(a).split(Snap._.separator);\r\n            B = Str(b).split(Snap._.separator);\r\n            return {\r\n                from: A,\r\n                to: B,\r\n                f: function (val) { return val; }\r\n            };\r\n        }\r\n        if (isNumeric(a) && isNumeric(b)) {\r\n            return {\r\n                from: parseFloat(a),\r\n                to: parseFloat(b),\r\n                f: getNumber\r\n            };\r\n        }\r\n        var aUnit = a.match(reUnit),\r\n            bUnit = Str(b).match(reUnit);\r\n        if (aUnit && arrayEqual(aUnit, bUnit)) {\r\n            return {\r\n                from: parseFloat(a),\r\n                to: parseFloat(b),\r\n                f: getUnit(aUnit)\r\n            };\r\n        } else {\r\n            return {\r\n                from: this.asPX(name),\r\n                to: this.asPX(name, b),\r\n                f: getNumber\r\n            };\r\n        }\r\n    });\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n// \r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n// \r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n// \r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob) {\r\n    var elproto = Element.prototype,\r\n    has = \"hasOwnProperty\",\r\n    supportsTouch = \"createTouch\" in glob.doc,\r\n    events = [\r\n        \"click\", \"dblclick\", \"mousedown\", \"mousemove\", \"mouseout\",\r\n        \"mouseover\", \"mouseup\", \"touchstart\", \"touchmove\", \"touchend\",\r\n        \"touchcancel\"\r\n    ],\r\n    touchMap = {\r\n        mousedown: \"touchstart\",\r\n        mousemove: \"touchmove\",\r\n        mouseup: \"touchend\"\r\n    },\r\n    getScroll = function (xy, el) {\r\n        var name = xy == \"y\" ? \"scrollTop\" : \"scrollLeft\",\r\n            doc = el && el.node ? el.node.ownerDocument : glob.doc;\r\n        return doc[name in doc.documentElement ? \"documentElement\" : \"body\"][name];\r\n    },\r\n    preventDefault = function () {\r\n        this.returnValue = false;\r\n    },\r\n    preventTouch = function () {\r\n        return this.originalEvent.preventDefault();\r\n    },\r\n    stopPropagation = function () {\r\n        this.cancelBubble = true;\r\n    },\r\n    stopTouch = function () {\r\n        return this.originalEvent.stopPropagation();\r\n    },\r\n    addEvent = function (obj, type, fn, element) {\r\n        var realName = supportsTouch && touchMap[type] ? touchMap[type] : type,\r\n            f = function (e) {\r\n                var scrollY = getScroll(\"y\", element),\r\n                    scrollX = getScroll(\"x\", element);\r\n                if (supportsTouch && touchMap[has](type)) {\r\n                    for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\r\n                        if (e.targetTouches[i].target == obj || obj.contains(e.targetTouches[i].target)) {\r\n                            var olde = e;\r\n                            e = e.targetTouches[i];\r\n                            e.originalEvent = olde;\r\n                            e.preventDefault = preventTouch;\r\n                            e.stopPropagation = stopTouch;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                var x = e.clientX + scrollX,\r\n                    y = e.clientY + scrollY;\r\n                return fn.call(element, e, x, y);\r\n            };\r\n\r\n        if (type !== realName) {\r\n            obj.addEventListener(type, f, false);\r\n        }\r\n\r\n        obj.addEventListener(realName, f, false);\r\n\r\n        return function () {\r\n            if (type !== realName) {\r\n                obj.removeEventListener(type, f, false);\r\n            }\r\n\r\n            obj.removeEventListener(realName, f, false);\r\n            return true;\r\n        };\r\n    },\r\n    drag = [],\r\n    dragMove = function (e) {\r\n        var x = e.clientX,\r\n            y = e.clientY,\r\n            scrollY = getScroll(\"y\"),\r\n            scrollX = getScroll(\"x\"),\r\n            dragi,\r\n            j = drag.length;\r\n        while (j--) {\r\n            dragi = drag[j];\r\n            if (supportsTouch) {\r\n                var i = e.touches && e.touches.length,\r\n                    touch;\r\n                while (i--) {\r\n                    touch = e.touches[i];\r\n                    if (touch.identifier == dragi.el._drag.id || dragi.el.node.contains(touch.target)) {\r\n                        x = touch.clientX;\r\n                        y = touch.clientY;\r\n                        (e.originalEvent ? e.originalEvent : e).preventDefault();\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                e.preventDefault();\r\n            }\r\n            var node = dragi.el.node,\r\n                o,\r\n                next = node.nextSibling,\r\n                parent = node.parentNode,\r\n                display = node.style.display;\r\n            // glob.win.opera && parent.removeChild(node);\r\n            // node.style.display = \"none\";\r\n            // o = dragi.el.paper.getElementByPoint(x, y);\r\n            // node.style.display = display;\r\n            // glob.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\r\n            // o && eve(\"snap.drag.over.\" + dragi.el.id, dragi.el, o);\r\n            x += scrollX;\r\n            y += scrollY;\r\n            eve(\"snap.drag.move.\" + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\r\n        }\r\n    },\r\n    dragUp = function (e) {\r\n        Snap.unmousemove(dragMove).unmouseup(dragUp);\r\n        var i = drag.length,\r\n            dragi;\r\n        while (i--) {\r\n            dragi = drag[i];\r\n            dragi.el._drag = {};\r\n            eve(\"snap.drag.end.\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\r\n            eve.off(\"snap.drag.*.\" + dragi.el.id);\r\n        }\r\n        drag = [];\r\n    };\r\n    /*\\\r\n     * Element.click\r\n     [ method ]\r\n     **\r\n     * Adds a click event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.unclick\r\n     [ method ]\r\n     **\r\n     * Removes a click event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.dblclick\r\n     [ method ]\r\n     **\r\n     * Adds a double click event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.undblclick\r\n     [ method ]\r\n     **\r\n     * Removes a double click event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.mousedown\r\n     [ method ]\r\n     **\r\n     * Adds a mousedown event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.unmousedown\r\n     [ method ]\r\n     **\r\n     * Removes a mousedown event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.mousemove\r\n     [ method ]\r\n     **\r\n     * Adds a mousemove event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.unmousemove\r\n     [ method ]\r\n     **\r\n     * Removes a mousemove event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.mouseout\r\n     [ method ]\r\n     **\r\n     * Adds a mouseout event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.unmouseout\r\n     [ method ]\r\n     **\r\n     * Removes a mouseout event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.mouseover\r\n     [ method ]\r\n     **\r\n     * Adds a mouseover event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.unmouseover\r\n     [ method ]\r\n     **\r\n     * Removes a mouseover event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.mouseup\r\n     [ method ]\r\n     **\r\n     * Adds a mouseup event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.unmouseup\r\n     [ method ]\r\n     **\r\n     * Removes a mouseup event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.touchstart\r\n     [ method ]\r\n     **\r\n     * Adds a touchstart event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.untouchstart\r\n     [ method ]\r\n     **\r\n     * Removes a touchstart event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.touchmove\r\n     [ method ]\r\n     **\r\n     * Adds a touchmove event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.untouchmove\r\n     [ method ]\r\n     **\r\n     * Removes a touchmove event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.touchend\r\n     [ method ]\r\n     **\r\n     * Adds a touchend event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.untouchend\r\n     [ method ]\r\n     **\r\n     * Removes a touchend event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    \r\n    /*\\\r\n     * Element.touchcancel\r\n     [ method ]\r\n     **\r\n     * Adds a touchcancel event handler to the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    /*\\\r\n     * Element.untouchcancel\r\n     [ method ]\r\n     **\r\n     * Removes a touchcancel event handler from the element\r\n     - handler (function) handler for the event\r\n     = (object) @Element\r\n    \\*/\r\n    for (var i = events.length; i--;) {\r\n        (function (eventName) {\r\n            Snap[eventName] = elproto[eventName] = function (fn, scope) {\r\n                if (Snap.is(fn, \"function\")) {\r\n                    this.events = this.events || [];\r\n                    this.events.push({\r\n                        name: eventName,\r\n                        f: fn,\r\n                        unbind: addEvent(this.node || document, eventName, fn, scope || this)\r\n                    });\r\n                } else {\r\n                    for (var i = 0, ii = this.events.length; i < ii; i++) if (this.events[i].name == eventName) {\r\n                        try {\r\n                            this.events[i].f.call(this);\r\n                        } catch (e) {}\r\n                    }\r\n                }\r\n                return this;\r\n            };\r\n            Snap[\"un\" + eventName] =\r\n            elproto[\"un\" + eventName] = function (fn) {\r\n                var events = this.events || [],\r\n                    l = events.length;\r\n                while (l--) if (events[l].name == eventName &&\r\n                               (events[l].f == fn || !fn)) {\r\n                    events[l].unbind();\r\n                    events.splice(l, 1);\r\n                    !events.length && delete this.events;\r\n                    return this;\r\n                }\r\n                return this;\r\n            };\r\n        })(events[i]);\r\n    }\r\n    /*\\\r\n     * Element.hover\r\n     [ method ]\r\n     **\r\n     * Adds hover event handlers to the element\r\n     - f_in (function) handler for hover in\r\n     - f_out (function) handler for hover out\r\n     - icontext (object) #optional context for hover in handler\r\n     - ocontext (object) #optional context for hover out handler\r\n     = (object) @Element\r\n    \\*/\r\n    elproto.hover = function (f_in, f_out, scope_in, scope_out) {\r\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\r\n    };\r\n    /*\\\r\n     * Element.unhover\r\n     [ method ]\r\n     **\r\n     * Removes hover event handlers from the element\r\n     - f_in (function) handler for hover in\r\n     - f_out (function) handler for hover out\r\n     = (object) @Element\r\n    \\*/\r\n    elproto.unhover = function (f_in, f_out) {\r\n        return this.unmouseover(f_in).unmouseout(f_out);\r\n    };\r\n    var draggable = [];\r\n    // SIERRA unclear what _context_ refers to for starting, ending, moving the drag gesture.\r\n    // SIERRA Element.drag(): _x position of the mouse_: Where are the x/y values offset from?\r\n    // SIERRA Element.drag(): much of this member's doc appears to be duplicated for some reason.\r\n    // SIERRA Unclear about this sentence: _Additionally following drag events will be triggered: drag.start.<id> on start, drag.end.<id> on end and drag.move.<id> on every move._ Is there a global _drag_ object to which you can assign handlers keyed by an element's ID?\r\n    /*\\\r\n     * Element.drag\r\n     [ method ]\r\n     **\r\n     * Adds event handlers for an element's drag gesture\r\n     **\r\n     - onmove (function) handler for moving\r\n     - onstart (function) handler for drag start\r\n     - onend (function) handler for drag end\r\n     - mcontext (object) #optional context for moving handler\r\n     - scontext (object) #optional context for drag start handler\r\n     - econtext (object) #optional context for drag end handler\r\n     * Additionaly following `drag` events are triggered: `drag.start.<id>` on start, \r\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element is dragged over another element \r\n     * `drag.over.<id>` fires as well.\r\n     *\r\n     * Start event and start handler are called in specified context or in context of the element with following parameters:\r\n     o x (number) x position of the mouse\r\n     o y (number) y position of the mouse\r\n     o event (object) DOM event object\r\n     * Move event and move handler are called in specified context or in context of the element with following parameters:\r\n     o dx (number) shift by x from the start point\r\n     o dy (number) shift by y from the start point\r\n     o x (number) x position of the mouse\r\n     o y (number) y position of the mouse\r\n     o event (object) DOM event object\r\n     * End event and end handler are called in specified context or in context of the element with following parameters:\r\n     o event (object) DOM event object\r\n     = (object) @Element\r\n    \\*/\r\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\r\n        var el = this;\r\n        if (!arguments.length) {\r\n            var origTransform;\r\n            return el.drag(function (dx, dy) {\r\n                this.attr({\r\n                    transform: origTransform + (origTransform ? \"T\" : \"t\") + [dx, dy]\r\n                });\r\n            }, function () {\r\n                origTransform = this.transform().local;\r\n            });\r\n        }\r\n        function start(e, x, y) {\r\n            (e.originalEvent || e).preventDefault();\r\n            el._drag.x = x;\r\n            el._drag.y = y;\r\n            el._drag.id = e.identifier;\r\n            !drag.length && Snap.mousemove(dragMove).mouseup(dragUp);\r\n            drag.push({el: el, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});\r\n            onstart && eve.on(\"snap.drag.start.\" + el.id, onstart);\r\n            onmove && eve.on(\"snap.drag.move.\" + el.id, onmove);\r\n            onend && eve.on(\"snap.drag.end.\" + el.id, onend);\r\n            eve(\"snap.drag.start.\" + el.id, start_scope || move_scope || el, x, y, e);\r\n        }\r\n        function init(e, x, y) {\r\n            eve(\"snap.draginit.\" + el.id, el, e, x, y);\r\n        }\r\n        eve.on(\"snap.draginit.\" + el.id, start);\r\n        el._drag = {};\r\n        draggable.push({el: el, start: start, init: init});\r\n        el.mousedown(init);\r\n        return el;\r\n    };\r\n    /*\r\n     * Element.onDragOver\r\n     [ method ]\r\n     **\r\n     * Shortcut to assign event handler for `drag.over.<id>` event, where `id` is the element's `id` (see @Element.id)\r\n     - f (function) handler for event, first argument would be the element you are dragging over\r\n    \\*/\r\n    // elproto.onDragOver = function (f) {\r\n    //     f ? eve.on(\"snap.drag.over.\" + this.id, f) : eve.unbind(\"snap.drag.over.\" + this.id);\r\n    // };\r\n    /*\\\r\n     * Element.undrag\r\n     [ method ]\r\n     **\r\n     * Removes all drag event handlers from the given element\r\n    \\*/\r\n    elproto.undrag = function () {\r\n        var i = draggable.length;\r\n        while (i--) if (draggable[i].el == this) {\r\n            this.unmousedown(draggable[i].init);\r\n            draggable.splice(i, 1);\r\n            eve.unbind(\"snap.drag.*.\" + this.id);\r\n            eve.unbind(\"snap.draginit.\" + this.id);\r\n        }\r\n        !draggable.length && Snap.unmousemove(dragMove).unmouseup(dragUp);\r\n        return this;\r\n    };\r\n});\r\n\r\n// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob) {\r\n    var elproto = Element.prototype,\r\n        pproto = Paper.prototype,\r\n        rgurl = /^\\s*url\\((.+)\\)/,\r\n        Str = String,\r\n        $ = Snap._.$;\r\n    Snap.filter = {};\r\n    /*\\\r\n     * Paper.filter\r\n     [ method ]\r\n     **\r\n     * Creates a `<filter>` element\r\n     **\r\n     - filstr (string) SVG fragment of filter provided as a string\r\n     = (object) @Element\r\n     * Note: It is recommended to use filters embedded into the page inside an empty SVG element.\r\n     > Usage\r\n     | var f = paper.filter('<feGaussianBlur stdDeviation=\"2\"/>'),\r\n     |     c = paper.circle(10, 10, 10).attr({\r\n     |         filter: f\r\n     |     });\r\n    \\*/\r\n    pproto.filter = function (filstr) {\r\n        var paper = this;\r\n        if (paper.type != \"svg\") {\r\n            paper = paper.paper;\r\n        }\r\n        var f = Snap.parse(Str(filstr)),\r\n            id = Snap._.id(),\r\n            width = paper.node.offsetWidth,\r\n            height = paper.node.offsetHeight,\r\n            filter = $(\"filter\");\r\n        $(filter, {\r\n            id: id,\r\n            filterUnits: \"userSpaceOnUse\"\r\n        });\r\n        filter.appendChild(f.node);\r\n        paper.defs.appendChild(filter);\r\n        return new Element(filter);\r\n    };\r\n\r\n    eve.on(\"snap.util.getattr.filter\", function () {\r\n        eve.stop();\r\n        var p = $(this.node, \"filter\");\r\n        if (p) {\r\n            var match = Str(p).match(rgurl);\r\n            return match && Snap.select(match[1]);\r\n        }\r\n    });\r\n    eve.on(\"snap.util.attr.filter\", function (value) {\r\n        if (value instanceof Element && value.type == \"filter\") {\r\n            eve.stop();\r\n            var id = value.node.id;\r\n            if (!id) {\r\n                $(value.node, {id: value.id});\r\n                id = value.id;\r\n            }\r\n            $(this.node, {\r\n                filter: Snap.url(id)\r\n            });\r\n        }\r\n        if (!value || value == \"none\") {\r\n            eve.stop();\r\n            this.node.removeAttribute(\"filter\");\r\n        }\r\n    });\r\n    /*\\\r\n     * Snap.filter.blur\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the blur filter\r\n     **\r\n     - x (number) amount of horizontal blur, in pixels\r\n     - y (number) #optional amount of vertical blur, in pixels\r\n     = (string) filter representation\r\n     > Usage\r\n     | var f = paper.filter(Snap.filter.blur(5, 10)),\r\n     |     c = paper.circle(10, 10, 10).attr({\r\n     |         filter: f\r\n     |     });\r\n    \\*/\r\n    Snap.filter.blur = function (x, y) {\r\n        if (x == null) {\r\n            x = 2;\r\n        }\r\n        var def = y == null ? x : [x, y];\r\n        return Snap.format('\\<feGaussianBlur stdDeviation=\"{def}\"/>', {\r\n            def: def\r\n        });\r\n    };\r\n    Snap.filter.blur.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.shadow\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the shadow filter\r\n     **\r\n     - dx (number) #optional horizontal shift of the shadow, in pixels\r\n     - dy (number) #optional vertical shift of the shadow, in pixels\r\n     - blur (number) #optional amount of blur\r\n     - color (string) #optional color of the shadow\r\n     - opacity (number) #optional `0..1` opacity of the shadow\r\n     * or\r\n     - dx (number) #optional horizontal shift of the shadow, in pixels\r\n     - dy (number) #optional vertical shift of the shadow, in pixels\r\n     - color (string) #optional color of the shadow\r\n     - opacity (number) #optional `0..1` opacity of the shadow\r\n     * which makes blur default to `4`. Or\r\n     - dx (number) #optional horizontal shift of the shadow, in pixels\r\n     - dy (number) #optional vertical shift of the shadow, in pixels\r\n     - opacity (number) #optional `0..1` opacity of the shadow\r\n     = (string) filter representation\r\n     > Usage\r\n     | var f = paper.filter(Snap.filter.shadow(0, 2, .3)),\r\n     |     c = paper.circle(10, 10, 10).attr({\r\n     |         filter: f\r\n     |     });\r\n    \\*/\r\n    Snap.filter.shadow = function (dx, dy, blur, color, opacity) {\r\n        if (opacity == null) {\r\n            if (color == null) {\r\n                opacity = blur;\r\n                blur = 4;\r\n                color = \"#000\";\r\n            } else {\r\n                opacity = color;\r\n                color = blur;\r\n                blur = 4;\r\n            }\r\n        }\r\n        if (blur == null) {\r\n            blur = 4;\r\n        }\r\n        if (opacity == null) {\r\n            opacity = 1;\r\n        }\r\n        if (dx == null) {\r\n            dx = 0;\r\n            dy = 2;\r\n        }\r\n        if (dy == null) {\r\n            dy = dx;\r\n        }\r\n        color = Snap.color(color);\r\n        return Snap.format('<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"{blur}\"/><feOffset dx=\"{dx}\" dy=\"{dy}\" result=\"offsetblur\"/><feFlood flood-color=\"{color}\"/><feComposite in2=\"offsetblur\" operator=\"in\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"{opacity}\"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge>', {\r\n            color: color,\r\n            dx: dx,\r\n            dy: dy,\r\n            blur: blur,\r\n            opacity: opacity\r\n        });\r\n    };\r\n    Snap.filter.shadow.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.grayscale\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the grayscale filter\r\n     **\r\n     - amount (number) amount of filter (`0..1`)\r\n     = (string) filter representation\r\n    \\*/\r\n    Snap.filter.grayscale = function (amount) {\r\n        if (amount == null) {\r\n            amount = 1;\r\n        }\r\n        return Snap.format('<feColorMatrix type=\"matrix\" values=\"{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0\"/>', {\r\n            a: 0.2126 + 0.7874 * (1 - amount),\r\n            b: 0.7152 - 0.7152 * (1 - amount),\r\n            c: 0.0722 - 0.0722 * (1 - amount),\r\n            d: 0.2126 - 0.2126 * (1 - amount),\r\n            e: 0.7152 + 0.2848 * (1 - amount),\r\n            f: 0.0722 - 0.0722 * (1 - amount),\r\n            g: 0.2126 - 0.2126 * (1 - amount),\r\n            h: 0.0722 + 0.9278 * (1 - amount)\r\n        });\r\n    };\r\n    Snap.filter.grayscale.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.sepia\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the sepia filter\r\n     **\r\n     - amount (number) amount of filter (`0..1`)\r\n     = (string) filter representation\r\n    \\*/\r\n    Snap.filter.sepia = function (amount) {\r\n        if (amount == null) {\r\n            amount = 1;\r\n        }\r\n        return Snap.format('<feColorMatrix type=\"matrix\" values=\"{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0\"/>', {\r\n            a: 0.393 + 0.607 * (1 - amount),\r\n            b: 0.769 - 0.769 * (1 - amount),\r\n            c: 0.189 - 0.189 * (1 - amount),\r\n            d: 0.349 - 0.349 * (1 - amount),\r\n            e: 0.686 + 0.314 * (1 - amount),\r\n            f: 0.168 - 0.168 * (1 - amount),\r\n            g: 0.272 - 0.272 * (1 - amount),\r\n            h: 0.534 - 0.534 * (1 - amount),\r\n            i: 0.131 + 0.869 * (1 - amount)\r\n        });\r\n    };\r\n    Snap.filter.sepia.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.saturate\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the saturate filter\r\n     **\r\n     - amount (number) amount of filter (`0..1`)\r\n     = (string) filter representation\r\n    \\*/\r\n    Snap.filter.saturate = function (amount) {\r\n        if (amount == null) {\r\n            amount = 1;\r\n        }\r\n        return Snap.format('<feColorMatrix type=\"saturate\" values=\"{amount}\"/>', {\r\n            amount: 1 - amount\r\n        });\r\n    };\r\n    Snap.filter.saturate.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.hueRotate\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the hue-rotate filter\r\n     **\r\n     - angle (number) angle of rotation\r\n     = (string) filter representation\r\n    \\*/\r\n    Snap.filter.hueRotate = function (angle) {\r\n        angle = angle || 0;\r\n        return Snap.format('<feColorMatrix type=\"hueRotate\" values=\"{angle}\"/>', {\r\n            angle: angle\r\n        });\r\n    };\r\n    Snap.filter.hueRotate.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.invert\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the invert filter\r\n     **\r\n     - amount (number) amount of filter (`0..1`)\r\n     = (string) filter representation\r\n    \\*/\r\n    Snap.filter.invert = function (amount) {\r\n        if (amount == null) {\r\n            amount = 1;\r\n        }\r\n//        <feColorMatrix type=\"matrix\" values=\"-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0\" color-interpolation-filters=\"sRGB\"/>\r\n        return Snap.format('<feComponentTransfer><feFuncR type=\"table\" tableValues=\"{amount} {amount2}\"/><feFuncG type=\"table\" tableValues=\"{amount} {amount2}\"/><feFuncB type=\"table\" tableValues=\"{amount} {amount2}\"/></feComponentTransfer>', {\r\n            amount: amount,\r\n            amount2: 1 - amount\r\n        });\r\n    };\r\n    Snap.filter.invert.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.brightness\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the brightness filter\r\n     **\r\n     - amount (number) amount of filter (`0..1`)\r\n     = (string) filter representation\r\n    \\*/\r\n    Snap.filter.brightness = function (amount) {\r\n        if (amount == null) {\r\n            amount = 1;\r\n        }\r\n        return Snap.format('<feComponentTransfer><feFuncR type=\"linear\" slope=\"{amount}\"/><feFuncG type=\"linear\" slope=\"{amount}\"/><feFuncB type=\"linear\" slope=\"{amount}\"/></feComponentTransfer>', {\r\n            amount: amount\r\n        });\r\n    };\r\n    Snap.filter.brightness.toString = function () {\r\n        return this();\r\n    };\r\n    /*\\\r\n     * Snap.filter.contrast\r\n     [ method ]\r\n     **\r\n     * Returns an SVG markup string for the contrast filter\r\n     **\r\n     - amount (number) amount of filter (`0..1`)\r\n     = (string) filter representation\r\n    \\*/\r\n    Snap.filter.contrast = function (amount) {\r\n        if (amount == null) {\r\n            amount = 1;\r\n        }\r\n        return Snap.format('<feComponentTransfer><feFuncR type=\"linear\" slope=\"{amount}\" intercept=\"{amount2}\"/><feFuncG type=\"linear\" slope=\"{amount}\" intercept=\"{amount2}\"/><feFuncB type=\"linear\" slope=\"{amount}\" intercept=\"{amount2}\"/></feComponentTransfer>', {\r\n            amount: amount,\r\n            amount2: .5 - amount / 2\r\n        });\r\n    };\r\n    Snap.filter.contrast.toString = function () {\r\n        return this();\r\n    };\r\n});\r\n\r\n// Copyright (c) 2014 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var box = Snap._.box,\r\n        is = Snap.is,\r\n        firstLetter = /^[^a-z]*([tbmlrc])/i,\r\n        toString = function () {\r\n            return \"T\" + this.dx + \",\" + this.dy;\r\n        };\r\n    /*\\\r\n     * Element.getAlign\r\n     [ method ]\r\n     **\r\n     * Returns shift needed to align the element relatively to given element.\r\n     * If no elements specified, parent `<svg>` container will be used.\r\n     - el (object) @optional alignment element\r\n     - way (string) one of six values: `\"top\"`, `\"middle\"`, `\"bottom\"`, `\"left\"`, `\"center\"`, `\"right\"`\r\n     = (object|string) Object in format `{dx: , dy: }` also has a string representation as a transformation string\r\n     > Usage\r\n     | el.transform(el.getAlign(el2, \"top\"));\r\n     * or\r\n     | var dy = el.getAlign(el2, \"top\").dy;\r\n    \\*/\r\n    Element.prototype.getAlign = function (el, way) {\r\n        if (way == null && is(el, \"string\")) {\r\n            way = el;\r\n            el = null;\r\n        }\r\n        el = el || this.paper;\r\n        var bx = el.getBBox ? el.getBBox() : box(el),\r\n            bb = this.getBBox(),\r\n            out = {};\r\n        way = way && way.match(firstLetter);\r\n        way = way ? way[1].toLowerCase() : \"c\";\r\n        switch (way) {\r\n            case \"t\":\r\n                out.dx = 0;\r\n                out.dy = bx.y - bb.y;\r\n            break;\r\n            case \"b\":\r\n                out.dx = 0;\r\n                out.dy = bx.y2 - bb.y2;\r\n            break;\r\n            case \"m\":\r\n                out.dx = 0;\r\n                out.dy = bx.cy - bb.cy;\r\n            break;\r\n            case \"l\":\r\n                out.dx = bx.x - bb.x;\r\n                out.dy = 0;\r\n            break;\r\n            case \"r\":\r\n                out.dx = bx.x2 - bb.x2;\r\n                out.dy = 0;\r\n            break;\r\n            default:\r\n                out.dx = bx.cx - bb.cx;\r\n                out.dy = 0;\r\n            break;\r\n        }\r\n        out.toString = toString;\r\n        return out;\r\n    };\r\n    /*\\\r\n     * Element.align\r\n     [ method ]\r\n     **\r\n     * Aligns the element relatively to given one via transformation.\r\n     * If no elements specified, parent `<svg>` container will be used.\r\n     - el (object) @optional alignment element\r\n     - way (string) one of six values: `\"top\"`, `\"middle\"`, `\"bottom\"`, `\"left\"`, `\"center\"`, `\"right\"`\r\n     = (object) this element\r\n     > Usage\r\n     | el.align(el2, \"top\");\r\n     * or\r\n     | el.align(\"middle\");\r\n    \\*/\r\n    Element.prototype.align = function (el, way) {\r\n        return this.transform(\"...\" + this.getAlign(el, way));\r\n    };\r\n});\r\n\r\n// Copyright (c) 2016 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob, Fragment) {\r\n    var elproto = Element.prototype,\r\n        is = Snap.is,\r\n        Str = String,\r\n        has = \"hasOwnProperty\";\r\n    function slice(from, to, f) {\r\n        return function (arr) {\r\n            var res = arr.slice(from, to);\r\n            if (res.length == 1) {\r\n                res = res[0];\r\n            }\r\n            return f ? f(res) : res;\r\n        };\r\n    }\r\n    var Animation = function (attr, ms, easing, callback) {\r\n        if (typeof easing == \"function\" && !easing.length) {\r\n            callback = easing;\r\n            easing = mina.linear;\r\n        }\r\n        this.attr = attr;\r\n        this.dur = ms;\r\n        easing && (this.easing = easing);\r\n        callback && (this.callback = callback);\r\n    };\r\n    Snap._.Animation = Animation;\r\n    /*\\\r\n     * Snap.animation\r\n     [ method ]\r\n     **\r\n     * Creates an animation object\r\n     **\r\n     - attr (object) attributes of final destination\r\n     - duration (number) duration of the animation, in milliseconds\r\n     - easing (function) #optional one of easing functions of @mina or custom one\r\n     - callback (function) #optional callback function that fires when animation ends\r\n     = (object) animation object\r\n    \\*/\r\n    Snap.animation = function (attr, ms, easing, callback) {\r\n        return new Animation(attr, ms, easing, callback);\r\n    };\r\n    /*\\\r\n     * Element.inAnim\r\n     [ method ]\r\n     **\r\n     * Returns a set of animations that may be able to manipulate the current element\r\n     **\r\n     = (object) in format:\r\n     o {\r\n     o     anim (object) animation object,\r\n     o     mina (object) @mina object,\r\n     o     curStatus (number) 0..1 — status of the animation: 0 — just started, 1 — just finished,\r\n     o     status (function) gets or sets the status of the animation,\r\n     o     stop (function) stops the animation\r\n     o }\r\n    \\*/\r\n    elproto.inAnim = function () {\r\n        var el = this,\r\n            res = [];\r\n        for (var id in el.anims) if (el.anims[has](id)) {\r\n            (function (a) {\r\n                res.push({\r\n                    anim: new Animation(a._attrs, a.dur, a.easing, a._callback),\r\n                    mina: a,\r\n                    curStatus: a.status(),\r\n                    status: function (val) {\r\n                        return a.status(val);\r\n                    },\r\n                    stop: function () {\r\n                        a.stop();\r\n                    }\r\n                });\r\n            }(el.anims[id]));\r\n        }\r\n        return res;\r\n    };\r\n    /*\\\r\n     * Snap.animate\r\n     [ method ]\r\n     **\r\n     * Runs generic animation of one number into another with a caring function\r\n     **\r\n     - from (number|array) number or array of numbers\r\n     - to (number|array) number or array of numbers\r\n     - setter (function) caring function that accepts one number argument\r\n     - duration (number) duration, in milliseconds\r\n     - easing (function) #optional easing function from @mina or custom\r\n     - callback (function) #optional callback function to execute when animation ends\r\n     = (object) animation object in @mina format\r\n     o {\r\n     o     id (string) animation id, consider it read-only,\r\n     o     duration (function) gets or sets the duration of the animation,\r\n     o     easing (function) easing,\r\n     o     speed (function) gets or sets the speed of the animation,\r\n     o     status (function) gets or sets the status of the animation,\r\n     o     stop (function) stops the animation\r\n     o }\r\n     | var rect = Snap().rect(0, 0, 10, 10);\r\n     | Snap.animate(0, 10, function (val) {\r\n     |     rect.attr({\r\n     |         x: val\r\n     |     });\r\n     | }, 1000);\r\n     | // in given context is equivalent to\r\n     | rect.animate({x: 10}, 1000);\r\n    \\*/\r\n    Snap.animate = function (from, to, setter, ms, easing, callback) {\r\n        if (typeof easing == \"function\" && !easing.length) {\r\n            callback = easing;\r\n            easing = mina.linear;\r\n        }\r\n        var now = mina.time(),\r\n            anim = mina(from, to, now, now + ms, mina.time, setter, easing);\r\n        callback && eve.once(\"mina.finish.\" + anim.id, callback);\r\n        return anim;\r\n    };\r\n    /*\\\r\n     * Element.stop\r\n     [ method ]\r\n     **\r\n     * Stops all the animations for the current element\r\n     **\r\n     = (Element) the current element\r\n    \\*/\r\n    elproto.stop = function () {\r\n        var anims = this.inAnim();\r\n        for (var i = 0, ii = anims.length; i < ii; i++) {\r\n            anims[i].stop();\r\n        }\r\n        return this;\r\n    };\r\n    /*\\\r\n     * Element.animate\r\n     [ method ]\r\n     **\r\n     * Animates the given attributes of the element\r\n     **\r\n     - attrs (object) key-value pairs of destination attributes\r\n     - duration (number) duration of the animation in milliseconds\r\n     - easing (function) #optional easing function from @mina or custom\r\n     - callback (function) #optional callback function that executes when the animation ends\r\n     = (Element) the current element\r\n    \\*/\r\n    elproto.animate = function (attrs, ms, easing, callback) {\r\n        if (typeof easing == \"function\" && !easing.length) {\r\n            callback = easing;\r\n            easing = mina.linear;\r\n        }\r\n        if (attrs instanceof Animation) {\r\n            callback = attrs.callback;\r\n            easing = attrs.easing;\r\n            ms = attrs.dur;\r\n            attrs = attrs.attr;\r\n        }\r\n        var fkeys = [], tkeys = [], keys = {}, from, to, f, eq,\r\n            el = this;\r\n        for (var key in attrs) if (attrs[has](key)) {\r\n            if (el.equal) {\r\n                eq = el.equal(key, Str(attrs[key]));\r\n                from = eq.from;\r\n                to = eq.to;\r\n                f = eq.f;\r\n            } else {\r\n                from = +el.attr(key);\r\n                to = +attrs[key];\r\n            }\r\n            var len = is(from, \"array\") ? from.length : 1;\r\n            keys[key] = slice(fkeys.length, fkeys.length + len, f);\r\n            fkeys = fkeys.concat(from);\r\n            tkeys = tkeys.concat(to);\r\n        }\r\n        var now = mina.time(),\r\n            anim = mina(fkeys, tkeys, now, now + ms, mina.time, function (val) {\r\n                var attr = {};\r\n                for (var key in keys) if (keys[has](key)) {\r\n                    attr[key] = keys[key](val);\r\n                }\r\n                el.attr(attr);\r\n            }, easing);\r\n        el.anims[anim.id] = anim;\r\n        anim._attrs = attrs;\r\n        anim._callback = callback;\r\n        eve(\"snap.animcreated.\" + el.id, anim);\r\n        eve.once(\"mina.finish.\" + anim.id, function () {\r\n            eve.off(\"mina.*.\" + anim.id);\r\n            delete el.anims[anim.id];\r\n            callback && callback.call(el);\r\n        });\r\n        eve.once(\"mina.stop.\" + anim.id, function () {\r\n            eve.off(\"mina.*.\" + anim.id);\r\n            delete el.anims[anim.id];\r\n        });\r\n        return el;\r\n    };\r\n});\r\n\r\n// Copyright (c) 2017 Adobe Systems Incorporated. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nSnap.plugin(function (Snap, Element, Paper, glob) {\r\n    // Colours are from https://www.materialui.co\r\n    var red         = \"#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000\",\r\n        pink        = \"#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162\",\r\n        purple      = \"#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF\",\r\n        deeppurple  = \"#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA\",\r\n        indigo      = \"#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE\",\r\n        blue        = \"#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF\",\r\n        lightblue   = \"#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA\",\r\n        cyan        = \"#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4\",\r\n        teal        = \"#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5\",\r\n        green       = \"#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853\",\r\n        lightgreen  = \"#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17\",\r\n        lime        = \"#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00\",\r\n        yellow      = \"#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600\",\r\n        amber       = \"#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00\",\r\n        orange      = \"#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00\",\r\n        deeporange  = \"#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00\",\r\n        brown       = \"#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723\",\r\n        grey        = \"#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121\",\r\n        bluegrey    = \"#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238\";\r\n    /*\\\r\n     * Snap.mui\r\n     [ property ]\r\n     **\r\n     * Contain Material UI colours.\r\n     | Snap().rect(0, 0, 10, 10).attr({fill: Snap.mui.deeppurple, stroke: Snap.mui.amber[600]});\r\n     # For colour reference: <a href=\"https://www.materialui.co\">https://www.materialui.co</a>.\r\n    \\*/\r\n    Snap.mui = {};\r\n    /*\\\r\n     * Snap.flat\r\n     [ property ]\r\n     **\r\n     * Contain Flat UI colours.\r\n     | Snap().rect(0, 0, 10, 10).attr({fill: Snap.flat.carrot, stroke: Snap.flat.wetasphalt});\r\n     # For colour reference: <a href=\"https://www.materialui.co\">https://www.materialui.co</a>.\r\n    \\*/\r\n    Snap.flat = {};\r\n    function saveColor(colors) {\r\n        colors = colors.split(/(?=#)/);\r\n        var color = new String(colors[5]);\r\n        color[50] = colors[0];\r\n        color[100] = colors[1];\r\n        color[200] = colors[2];\r\n        color[300] = colors[3];\r\n        color[400] = colors[4];\r\n        color[500] = colors[5];\r\n        color[600] = colors[6];\r\n        color[700] = colors[7];\r\n        color[800] = colors[8];\r\n        color[900] = colors[9];\r\n        if (colors[10]) {\r\n            color.A100 = colors[10];\r\n            color.A200 = colors[11];\r\n            color.A400 = colors[12];\r\n            color.A700 = colors[13];\r\n        }\r\n        return color;\r\n    }\r\n    Snap.mui.red = saveColor(red);\r\n    Snap.mui.pink = saveColor(pink);\r\n    Snap.mui.purple = saveColor(purple);\r\n    Snap.mui.deeppurple = saveColor(deeppurple);\r\n    Snap.mui.indigo = saveColor(indigo);\r\n    Snap.mui.blue = saveColor(blue);\r\n    Snap.mui.lightblue = saveColor(lightblue);\r\n    Snap.mui.cyan = saveColor(cyan);\r\n    Snap.mui.teal = saveColor(teal);\r\n    Snap.mui.green = saveColor(green);\r\n    Snap.mui.lightgreen = saveColor(lightgreen);\r\n    Snap.mui.lime = saveColor(lime);\r\n    Snap.mui.yellow = saveColor(yellow);\r\n    Snap.mui.amber = saveColor(amber);\r\n    Snap.mui.orange = saveColor(orange);\r\n    Snap.mui.deeporange = saveColor(deeporange);\r\n    Snap.mui.brown = saveColor(brown);\r\n    Snap.mui.grey = saveColor(grey);\r\n    Snap.mui.bluegrey = saveColor(bluegrey);\r\n    Snap.flat.turquoise = \"#1abc9c\";\r\n    Snap.flat.greensea = \"#16a085\";\r\n    Snap.flat.sunflower = \"#f1c40f\";\r\n    Snap.flat.orange = \"#f39c12\";\r\n    Snap.flat.emerland = \"#2ecc71\";\r\n    Snap.flat.nephritis = \"#27ae60\";\r\n    Snap.flat.carrot = \"#e67e22\";\r\n    Snap.flat.pumpkin = \"#d35400\";\r\n    Snap.flat.peterriver = \"#3498db\";\r\n    Snap.flat.belizehole = \"#2980b9\";\r\n    Snap.flat.alizarin = \"#e74c3c\";\r\n    Snap.flat.pomegranate = \"#c0392b\";\r\n    Snap.flat.amethyst = \"#9b59b6\";\r\n    Snap.flat.wisteria = \"#8e44ad\";\r\n    Snap.flat.clouds = \"#ecf0f1\";\r\n    Snap.flat.silver = \"#bdc3c7\";\r\n    Snap.flat.wetasphalt = \"#34495e\";\r\n    Snap.flat.midnightblue = \"#2c3e50\";\r\n    Snap.flat.concrete = \"#95a5a6\";\r\n    Snap.flat.asbestos = \"#7f8c8d\";\r\n    /*\\\r\n     * Snap.importMUIColors\r\n     [ method ]\r\n     **\r\n     * Imports Material UI colours into global object.\r\n     | Snap.importMUIColors();\r\n     | Snap().rect(0, 0, 10, 10).attr({fill: deeppurple, stroke: amber[600]});\r\n     # For colour reference: <a href=\"https://www.materialui.co\">https://www.materialui.co</a>.\r\n    \\*/\r\n    Snap.importMUIColors = function () {\r\n        for (var color in Snap.mui) {\r\n            if (Snap.mui.hasOwnProperty(color)) {\r\n                window[color] = Snap.mui[color];\r\n            }\r\n        }\r\n    };\r\n});\r\n\r\nmodule.exports = Snap\r\n"],"mappings":"AAAAA,MAAM,CAACC,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,IAAI,GAAI,UAAUF,GAAG,EAAE;EACvB,IAAIG,UAAU,GAAG,CAAC,CAAC;IACnBC,gBAAgB,GAAGL,MAAM,CAACM,qBAAqB,IAC5BN,MAAM,CAACO,2BAA2B,IAClCP,MAAM,CAACQ,wBAAwB,IAC/BR,MAAM,CAACS,sBAAsB,IAC7BT,MAAM,CAACU,uBAAuB,IAC9B,UAAUC,QAAQ,EAAE;MAChBC,UAAU,CAACD,QAAQ,EAAE,EAAE,EAAE,IAAIE,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC;MAC9C,OAAO,IAAI;IACf,CAAC;IACpBC,SAAS;IACTC,OAAO,GAAGC,KAAK,CAACD,OAAO,IAAI,UAAUE,CAAC,EAAE;MACpC,OAAOA,CAAC,YAAYD,KAAK,IACrBE,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACJ,CAAC,CAAC,IAAI,gBAAgB;IAC7D,CAAC;IACDK,KAAK,GAAG,CAAC;IACTC,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAC,IAAIX,IAAI,CAAD,CAAC,EAAEQ,QAAQ,CAAC,EAAE,CAAC;IACzCI,EAAE,GAAG,SAAAA,CAAA,EAAY;MACb,OAAOD,QAAQ,GAAG,CAACD,KAAK,EAAE,EAAEF,QAAQ,CAAC,EAAE,CAAC;IAC5C,CAAC;IACDK,IAAI,GAAG,SAAAA,CAAUR,CAAC,EAAES,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;MACzB,IAAIb,OAAO,CAACE,CAAC,CAAC,EAAE;QACZY,GAAG,GAAG,EAAE;QACR,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGd,CAAC,CAACe,MAAM,EAAEF,CAAC,GAAGC,EAAE,EAAED,CAAC,EAAE,EAAE;UACxCD,GAAG,CAACC,CAAC,CAAC,GAAGL,IAAI,CAACR,CAAC,CAACa,CAAC,CAAC,EAAEJ,CAAC,EAAEC,CAAC,CAACG,CAAC,CAAC,EAAEF,CAAC,CAAC;QACnC;QACA,OAAOC,GAAG;MACd;MACA,IAAII,GAAG,GAAG,CAACN,CAAC,GAAGV,CAAC,KAAKW,CAAC,GAAGF,CAAC,CAAC;MAC3B,OAAO,UAAUQ,EAAE,EAAE;QACjB,OAAOjB,CAAC,GAAGgB,GAAG,IAAIC,EAAE,GAAGR,CAAC,CAAC;MAC7B,CAAC;IACL,CAAC;IACDS,KAAK,GAAGvB,IAAI,CAACwB,GAAG,IAAI,YAAY;MAC5B,OAAO,CAAC,IAAIxB,IAAI,CAAD,CAAC;IACpB,CAAC;IACDyB,GAAG,GAAG,SAAAA,CAAUC,GAAG,EAAE;MACjB,IAAIrB,CAAC,GAAG,IAAI;MACZ,IAAIqB,GAAG,IAAI,IAAI,EAAE;QACb,OAAOrB,CAAC,CAACsB,CAAC;MACd;MACA,IAAIC,EAAE,GAAGvB,CAAC,CAACsB,CAAC,GAAGD,GAAG;MAClBrB,CAAC,CAACS,CAAC,IAAIT,CAAC,CAACwB,GAAG,GAAGD,EAAE;MACjBvB,CAAC,CAACW,CAAC,IAAIX,CAAC,CAACwB,GAAG,GAAGD,EAAE;MACjBvB,CAAC,CAACsB,CAAC,GAAGD,GAAG;IACb,CAAC;IACDI,KAAK,GAAG,SAAAA,CAAUJ,GAAG,EAAE;MACnB,IAAIrB,CAAC,GAAG,IAAI;MACZ,IAAIqB,GAAG,IAAI,IAAI,EAAE;QACb,OAAOrB,CAAC,CAAC0B,GAAG;MAChB;MACA1B,CAAC,CAAC0B,GAAG,GAAGL,GAAG;IACf,CAAC;IACDM,QAAQ,GAAG,SAAAA,CAAUN,GAAG,EAAE;MACtB,IAAIrB,CAAC,GAAG,IAAI;MACZ,IAAIqB,GAAG,IAAI,IAAI,EAAE;QACb,OAAOrB,CAAC,CAACwB,GAAG;MAChB;MACAxB,CAAC,CAACsB,CAAC,GAAGtB,CAAC,CAACsB,CAAC,GAAGD,GAAG,GAAGrB,CAAC,CAACwB,GAAG;MACvBxB,CAAC,CAACwB,GAAG,GAAGH,GAAG;IACf,CAAC;IACDO,MAAM,GAAG,SAAAA,CAAA,EAAY;MACjB,IAAI5B,CAAC,GAAG,IAAI;MACZ,OAAOd,UAAU,CAACc,CAAC,CAAC6B,EAAE,CAAC;MACvB7B,CAAC,CAAC8B,MAAM,CAAC,CAAC;MACV/C,GAAG,CAAC,YAAY,GAAGiB,CAAC,CAAC6B,EAAE,EAAE7B,CAAC,CAAC;IAC/B,CAAC;IACD+B,KAAK,GAAG,SAAAA,CAAA,EAAY;MAChB,IAAI/B,CAAC,GAAG,IAAI;MACZ,IAAIA,CAAC,CAACgC,IAAI,EAAE;QACR;MACJ;MACA,OAAO9C,UAAU,CAACc,CAAC,CAAC6B,EAAE,CAAC;MACvB7B,CAAC,CAAC8B,MAAM,CAAC,CAAC;MACV9B,CAAC,CAACgC,IAAI,GAAGhC,CAAC,CAACiC,GAAG,CAAC,CAAC,GAAGjC,CAAC,CAACS,CAAC;IAC1B,CAAC;IACDyB,MAAM,GAAG,SAAAA,CAAA,EAAY;MACjB,IAAIlC,CAAC,GAAG,IAAI;MACZ,IAAI,CAACA,CAAC,CAACgC,IAAI,EAAE;QACT;MACJ;MACAhC,CAAC,CAACS,CAAC,GAAGT,CAAC,CAACiC,GAAG,CAAC,CAAC,GAAGjC,CAAC,CAACgC,IAAI;MACtB,OAAOhC,CAAC,CAACgC,IAAI;MACb9C,UAAU,CAACc,CAAC,CAAC6B,EAAE,CAAC,GAAG7B,CAAC;MACpBmC,KAAK,CAAC,CAAC;IACX,CAAC;IACDL,MAAM,GAAG,SAAAA,CAAA,EAAY;MACjB,IAAI9B,CAAC,GAAG,IAAI;QACRY,GAAG;MACP,IAAId,OAAO,CAACE,CAAC,CAACoC,KAAK,CAAC,EAAE;QAClBxB,GAAG,GAAG,EAAE;QACR,KAAK,IAAIyB,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGtC,CAAC,CAACoC,KAAK,CAACrB,MAAM,EAAEsB,CAAC,GAAGC,EAAE,EAAED,CAAC,EAAE,EAAE;UAC9CzB,GAAG,CAACyB,CAAC,CAAC,GAAG,CAACrC,CAAC,CAACoC,KAAK,CAACC,CAAC,CAAC,GAChB,CAACrC,CAAC,CAACuC,GAAG,CAACF,CAAC,CAAC,GAAGrC,CAAC,CAACoC,KAAK,CAACC,CAAC,CAAC,IAAIrC,CAAC,CAACwC,MAAM,CAACxC,CAAC,CAACsB,CAAC,CAAC;QAC/C;MACJ,CAAC,MAAM;QACHV,GAAG,GAAG,CAACZ,CAAC,CAACoC,KAAK,GAAG,CAACpC,CAAC,CAACuC,GAAG,GAAGvC,CAAC,CAACoC,KAAK,IAAIpC,CAAC,CAACwC,MAAM,CAACxC,CAAC,CAACsB,CAAC,CAAC;MACtD;MACAtB,CAAC,CAACyC,GAAG,CAAC7B,GAAG,CAAC;IACd,CAAC;IACDuB,KAAK,GAAG,SAAAA,CAAUO,SAAS,EAAE;MACzB;MACA,IAAI,CAACA,SAAS,EAAE;QACZ;QACA,IAAI,CAAC7C,SAAS,EAAE;UACZ;UACAA,SAAS,GAAGV,gBAAgB,CAACgD,KAAK,CAAC;QACvC;QACA;MACJ;MACA,IAAIQ,GAAG,GAAG,CAAC;MACX,KAAK,IAAI9B,CAAC,IAAI3B,UAAU,EAAE,IAAIA,UAAU,CAAC0D,cAAc,CAAC/B,CAAC,CAAC,EAAE;QACxD,IAAIb,CAAC,GAAGd,UAAU,CAAC2B,CAAC,CAAC;UACjBJ,CAAC,GAAGT,CAAC,CAACiC,GAAG,CAAC,CAAC;UACXrB,GAAG;QACP+B,GAAG,EAAE;QACL3C,CAAC,CAACsB,CAAC,GAAG,CAACb,CAAC,GAAGT,CAAC,CAACS,CAAC,KAAKT,CAAC,CAACwB,GAAG,GAAGxB,CAAC,CAAC0B,GAAG,CAAC;QACjC,IAAI1B,CAAC,CAACsB,CAAC,IAAI,CAAC,EAAE;UACV,OAAOpC,UAAU,CAAC2B,CAAC,CAAC;UACpBb,CAAC,CAACsB,CAAC,GAAG,CAAC;UACPqB,GAAG,EAAE;UACJ,WAAU3C,CAAC,EAAE;YACVN,UAAU,CAAC,YAAY;cACnBX,GAAG,CAAC,cAAc,GAAGiB,CAAC,CAAC6B,EAAE,EAAE7B,CAAC,CAAC;YACjC,CAAC,CAAC;UACN,CAAC,EAACA,CAAC,CAAC;QACR;QACAA,CAAC,CAAC8B,MAAM,CAAC,CAAC;MACd;MACAjC,SAAS,GAAG8C,GAAG,GAAGxD,gBAAgB,CAACgD,KAAK,CAAC,GAAG,KAAK;IACrD,CAAC;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIlD,IAAI,GAAG,SAAAA,CAAUe,CAAC,EAAEU,CAAC,EAAED,CAAC,EAAEE,CAAC,EAAEsB,GAAG,EAAEQ,GAAG,EAAED,MAAM,EAAE;MAC3C,IAAIK,IAAI,GAAG;QACPhB,EAAE,EAAEtB,EAAE,CAAC,CAAC;QACR6B,KAAK,EAAEpC,CAAC;QACRuC,GAAG,EAAE7B,CAAC;QACND,CAAC,EAAEA,CAAC;QACJa,CAAC,EAAE,CAAC;QACJE,GAAG,EAAEb,CAAC,GAAGF,CAAC;QACViB,GAAG,EAAE,CAAC;QACNO,GAAG,EAAEA,GAAG;QACRQ,GAAG,EAAEA,GAAG;QACRD,MAAM,EAAEA,MAAM,IAAIvD,IAAI,CAAC6D,MAAM;QAC7BC,MAAM,EAAE3B,GAAG;QACXK,KAAK,EAAEA,KAAK;QACZE,QAAQ,EAAEA,QAAQ;QAClBqB,IAAI,EAAEpB,MAAM;QACZG,KAAK,EAAEA,KAAK;QACZG,MAAM,EAAEA,MAAM;QACdJ,MAAM,EAAEA;MACZ,CAAC;MACD5C,UAAU,CAAC2D,IAAI,CAAChB,EAAE,CAAC,GAAGgB,IAAI;MAC1B,IAAIF,GAAG,GAAG,CAAC;QAAE9B,CAAC;MACd,KAAKA,CAAC,IAAI3B,UAAU,EAAE,IAAIA,UAAU,CAAC0D,cAAc,CAAC/B,CAAC,CAAC,EAAE;QACpD8B,GAAG,EAAE;QACL,IAAIA,GAAG,IAAI,CAAC,EAAE;UACV;QACJ;MACJ;MACAA,GAAG,IAAI,CAAC,IAAIR,KAAK,CAAC,CAAC;MACnB,OAAOU,IAAI;IACf,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI5D,IAAI,CAACgE,IAAI,GAAG/B,KAAK;EACjB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIjC,IAAI,CAACiE,OAAO,GAAG,UAAUrB,EAAE,EAAE;IACzB,OAAO3C,UAAU,CAAC2C,EAAE,CAAC,IAAI,IAAI;EACjC,CAAC;;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI5C,IAAI,CAAC6D,MAAM,GAAG,UAAUK,CAAC,EAAE;IACvB,OAAOA,CAAC;EACZ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIlE,IAAI,CAACmE,OAAO,GAAG,UAAUD,CAAC,EAAE;IACxB,OAAOE,IAAI,CAACC,GAAG,CAACH,CAAC,EAAE,GAAG,CAAC;EAC3B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIlE,IAAI,CAACsE,MAAM,GAAG,UAAUJ,CAAC,EAAE;IACvB,OAAOE,IAAI,CAACC,GAAG,CAACH,CAAC,EAAE,GAAG,CAAC;EAC3B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIlE,IAAI,CAACuE,SAAS,GAAG,UAAUL,CAAC,EAAE;IAC1B,IAAIA,CAAC,IAAI,CAAC,EAAE;MACR,OAAO,CAAC;IACZ;IACA,IAAIA,CAAC,IAAI,CAAC,EAAE;MACR,OAAO,CAAC;IACZ;IACA,IAAIM,CAAC,GAAG,GAAG,GAAGN,CAAC,GAAG,IAAI;MAClBO,CAAC,GAAGL,IAAI,CAACM,IAAI,CAAC,KAAK,GAAGF,CAAC,GAAGA,CAAC,CAAC;MAC5BG,CAAC,GAAGF,CAAC,GAAGD,CAAC;MACTI,CAAC,GAAGR,IAAI,CAACC,GAAG,CAACD,IAAI,CAACS,GAAG,CAACF,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,IAAIA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;MACnDG,CAAC,GAAG,CAACL,CAAC,GAAGD,CAAC;MACVO,CAAC,GAAGX,IAAI,CAACC,GAAG,CAACD,IAAI,CAACS,GAAG,CAACC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,IAAIA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;MACnDE,CAAC,GAAGJ,CAAC,GAAGG,CAAC,GAAG,EAAE;IAClB,OAAO,CAAC,CAAC,GAAGC,CAAC,IAAI,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAC1C,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIhF,IAAI,CAACiF,MAAM,GAAG,UAAUf,CAAC,EAAE;IACvB,IAAIA,CAAC,IAAI,CAAC,EAAE;MACR,OAAO,CAAC;IACZ;IACA,IAAI7B,CAAC,GAAG,OAAO;IACf,OAAO6B,CAAC,GAAGA,CAAC,IAAI,CAAC7B,CAAC,GAAG,CAAC,IAAI6B,CAAC,GAAG7B,CAAC,CAAC;EACpC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIrC,IAAI,CAACkF,OAAO,GAAG,UAAUhB,CAAC,EAAE;IACxB,IAAIA,CAAC,IAAI,CAAC,EAAE;MACR,OAAO,CAAC;IACZ;IACAA,CAAC,GAAGA,CAAC,GAAG,CAAC;IACT,IAAI7B,CAAC,GAAG,OAAO;IACf,OAAO6B,CAAC,GAAGA,CAAC,IAAI,CAAC7B,CAAC,GAAG,CAAC,IAAI6B,CAAC,GAAG7B,CAAC,CAAC,GAAG,CAAC;EACxC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIrC,IAAI,CAACmF,OAAO,GAAG,UAAUjB,CAAC,EAAE;IACxB,IAAIA,CAAC,IAAI,CAAC,CAACA,CAAC,EAAE;MACV,OAAOA,CAAC;IACZ;IACA,OAAOE,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,GAAGH,CAAC,CAAC,GAAGE,IAAI,CAACgB,GAAG,CAAC,CAAClB,CAAC,GAAG,IAAI,KAC3C,CAAC,GAAGE,IAAI,CAACiB,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;EAC/B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIrF,IAAI,CAACsF,MAAM,GAAG,UAAUpB,CAAC,EAAE;IACvB,IAAI7B,CAAC,GAAG,MAAM;MACVkD,CAAC,GAAG,IAAI;MACRC,CAAC;IACL,IAAItB,CAAC,GAAG,CAAC,GAAGqB,CAAC,EAAE;MACXC,CAAC,GAAGnD,CAAC,GAAG6B,CAAC,GAAGA,CAAC;IACjB,CAAC,MAAM;MACH,IAAIA,CAAC,GAAG,CAAC,GAAGqB,CAAC,EAAE;QACXrB,CAAC,IAAI,GAAG,GAAGqB,CAAC;QACZC,CAAC,GAAGnD,CAAC,GAAG6B,CAAC,GAAGA,CAAC,GAAG,GAAG;MACvB,CAAC,MAAM;QACH,IAAIA,CAAC,GAAG,GAAG,GAAGqB,CAAC,EAAE;UACbrB,CAAC,IAAI,IAAI,GAAGqB,CAAC;UACbC,CAAC,GAAGnD,CAAC,GAAG6B,CAAC,GAAGA,CAAC,GAAG,KAAK;QACzB,CAAC,MAAM;UACHA,CAAC,IAAI,KAAK,GAAGqB,CAAC;UACdC,CAAC,GAAGnD,CAAC,GAAG6B,CAAC,GAAGA,CAAC,GAAG,OAAO;QAC3B;MACJ;IACJ;IACA,OAAOsB,CAAC;EACZ,CAAC;EACD3F,MAAM,CAACG,IAAI,GAAGA,IAAI;EAClB,OAAOA,IAAI;AACf,CAAC,CAAE,OAAOF,GAAG,IAAI,WAAW,GAAG,YAAY,CAAC,CAAC,GAAGA,GAAG,CAAC;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI2F,IAAI,GAAI,UAASC,IAAI,EAAE;EAC3BD,IAAI,CAACE,OAAO,GAAG,OAAO;EACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASF,IAAIA,CAACG,CAAC,EAAEC,CAAC,EAAE;IAChB,IAAID,CAAC,EAAE;MACH,IAAIA,CAAC,CAACE,QAAQ,EAAE;QACZ,OAAOC,IAAI,CAACH,CAAC,CAAC;MAClB;MACA,IAAII,EAAE,CAACJ,CAAC,EAAE,OAAO,CAAC,IAAIH,IAAI,CAACjC,GAAG,EAAE;QAC5B,OAAOiC,IAAI,CAACjC,GAAG,CAACyC,KAAK,CAACR,IAAI,EAAEG,CAAC,CAAC;MAClC;MACA,IAAIA,CAAC,YAAYM,OAAO,EAAE;QACtB,OAAON,CAAC;MACZ;MACA,IAAIC,CAAC,IAAI,IAAI,EAAE;QACX,IAAI;UACAD,CAAC,GAAGO,IAAI,CAACC,GAAG,CAACC,aAAa,CAACC,MAAM,CAACV,CAAC,CAAC,CAAC;UACrC,OAAOG,IAAI,CAACH,CAAC,CAAC;QAClB,CAAC,CAAC,OAAOW,CAAC,EAAE;UACR,OAAO,IAAI;QACf;MACJ;IACJ;IACAX,CAAC,GAAGA,CAAC,IAAI,IAAI,GAAG,MAAM,GAAGA,CAAC;IAC1BC,CAAC,GAAGA,CAAC,IAAI,IAAI,GAAG,MAAM,GAAGA,CAAC;IAC1B,OAAO,IAAIW,KAAK,CAACZ,CAAC,EAAEC,CAAC,CAAC;EAC1B;EACAJ,IAAI,CAACvE,QAAQ,GAAG,YAAY;IACxB,OAAO,QAAQ,GAAG,IAAI,CAACyE,OAAO;EAClC,CAAC;EACDF,IAAI,CAACgB,CAAC,GAAG,CAAC,CAAC;EACX,IAAIN,IAAI,GAAG;IACPO,GAAG,EAAEhB,IAAI,CAAC7F,MAAM;IAChBuG,GAAG,EAAEV,IAAI,CAAC7F,MAAM,CAAC8G;EACrB,CAAC;EACDlB,IAAI,CAACgB,CAAC,CAACN,IAAI,GAAGA,IAAI;EAClB,IAAIS,GAAG,GAAG,gBAAgB;IACtBC,GAAG,GAAGP,MAAM;IACZQ,OAAO,GAAGC,UAAU;IACpBC,KAAK,GAAGC,QAAQ;IAChBC,IAAI,GAAG9C,IAAI;IACX+C,IAAI,GAAGD,IAAI,CAACE,GAAG;IACfC,IAAI,GAAGH,IAAI,CAACI,GAAG;IACfzC,GAAG,GAAGqC,IAAI,CAACrC,GAAG;IACdR,GAAG,GAAG6C,IAAI,CAAC7C,GAAG;IACdgB,EAAE,GAAG6B,IAAI,CAAC7B,EAAE;IACZkC,KAAK,GAAGL,IAAI,CAACK,KAAK;IAClBC,CAAC,GAAG,EAAE;IACNC,CAAC,GAAG,GAAG;IACPC,cAAc,GAAG1G,MAAM,CAACC,SAAS,CAACC,QAAQ;IAC1CyG,KAAK,GAAG,+BAA+B;IACvCC,YAAY,GAAG,kTAAkT;IACjUC,QAAQ,GAAG,wDAAwD;IACnEC,SAAS,GAAGrC,IAAI,CAACgB,CAAC,CAACqB,SAAS,GAAG,QAAQ;IACvCC,UAAU,GAAG,OAAO;IACpBC,WAAW,GAAG,aAAa;IAC3BC,IAAI,GAAG;MAACC,EAAE,EAAE,CAAC;MAAEC,EAAE,EAAE;IAAC,CAAC;IACrBC,WAAW,GAAG,4DAA4D;IAC1EC,QAAQ,GAAG,6DAA6D;IACxEC,UAAU,GAAG,4CAA4C;IACzDlH,KAAK,GAAG,CAAC;IACTC,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAC,IAAIX,IAAI,CAAD,CAAC,EAAEQ,QAAQ,CAAC,EAAE,CAAC;IACzCI,EAAE,GAAG,SAAAA,CAAUiH,EAAE,EAAE;MACf,OAAO,CAACA,EAAE,IAAIA,EAAE,CAACC,IAAI,GAAGD,EAAE,CAACC,IAAI,GAAGhB,CAAC,IAAInG,QAAQ,GAAG,CAACD,KAAK,EAAE,EAAEF,QAAQ,CAAC,EAAE,CAAC;IAC5E,CAAC;IACDuH,KAAK,GAAG,8BAA8B;IACtCC,KAAK,GAAG,4BAA4B;IACpCC,GAAG,GAAG,CAAC,CAAC;IACR;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,GAAG,GAAGnD,IAAI,CAACoD,GAAG,GAAG,UAAUA,GAAG,EAAE;MAC5B,OAAO,QAAQ,GAAGA,GAAG,GAAG,IAAI;IAChC,CAAC;EAEL,SAASC,CAACA,CAACP,EAAE,EAAEQ,IAAI,EAAE;IACjB,IAAIA,IAAI,EAAE;MACN,IAAIR,EAAE,IAAI,OAAO,EAAE;QACfA,EAAE,GAAGpC,IAAI,CAACC,GAAG,CAAC4C,cAAc,CAACD,IAAI,CAACE,IAAI,IAAIF,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;MAClE;MACA,IAAIR,EAAE,IAAI,UAAU,EAAE;QAClBA,EAAE,GAAGpC,IAAI,CAACC,GAAG,CAAC8C,aAAa,CAACH,IAAI,CAACE,IAAI,IAAIF,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;MACjE;MACA,IAAI,OAAOR,EAAE,IAAI,QAAQ,EAAE;QACvBA,EAAE,GAAGO,CAAC,CAACP,EAAE,CAAC;MACd;MACA,IAAI,OAAOQ,IAAI,IAAI,QAAQ,EAAE;QACzB,IAAIR,EAAE,CAACzC,QAAQ,IAAI,CAAC,EAAE;UAClB,IAAIiD,IAAI,CAACI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,QAAQ,EAAE;YAClC,OAAOZ,EAAE,CAACa,cAAc,CAACX,KAAK,EAAEM,IAAI,CAACI,SAAS,CAAC,CAAC,CAAC,CAAC;UACtD;UACA,IAAIJ,IAAI,CAACI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,EAAE;YAChC,OAAOZ,EAAE,CAACa,cAAc,CAACV,KAAK,EAAEK,IAAI,CAACI,SAAS,CAAC,CAAC,CAAC,CAAC;UACtD;UACA,OAAOZ,EAAE,CAACc,YAAY,CAACN,IAAI,CAAC;QAChC,CAAC,MAAM,IAAIA,IAAI,IAAI,MAAM,EAAE;UACvB,OAAOR,EAAE,CAACe,SAAS;QACvB,CAAC,MAAM;UACH,OAAO,IAAI;QACf;MACJ;MACA,IAAIf,EAAE,CAACzC,QAAQ,IAAI,CAAC,EAAE;QAClB,KAAK,IAAIyD,GAAG,IAAIR,IAAI,EAAE,IAAIA,IAAI,CAACnC,GAAG,CAAC,CAAC2C,GAAG,CAAC,EAAE;UACtC,IAAInH,GAAG,GAAGyE,GAAG,CAACkC,IAAI,CAACQ,GAAG,CAAC,CAAC;UACxB,IAAInH,GAAG,EAAE;YACL,IAAImH,GAAG,CAACJ,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,QAAQ,EAAE;cACjCZ,EAAE,CAACiB,cAAc,CAACf,KAAK,EAAEc,GAAG,CAACJ,SAAS,CAAC,CAAC,CAAC,EAAE/G,GAAG,CAAC;YACnD,CAAC,MAAM,IAAImH,GAAG,CAACJ,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,EAAE;cACtCZ,EAAE,CAACiB,cAAc,CAACd,KAAK,EAAEa,GAAG,CAACJ,SAAS,CAAC,CAAC,CAAC,EAAE/G,GAAG,CAAC;YACnD,CAAC,MAAM;cACHmG,EAAE,CAACkB,YAAY,CAACF,GAAG,EAAEnH,GAAG,CAAC;YAC7B;UACJ,CAAC,MAAM;YACHmG,EAAE,CAACmB,eAAe,CAACH,GAAG,CAAC;UAC3B;QACJ;MACJ,CAAC,MAAM,IAAI,MAAM,IAAIR,IAAI,EAAE;QACvBR,EAAE,CAACe,SAAS,GAAGP,IAAI,CAACE,IAAI;MAC5B;IACJ,CAAC,MAAM;MACHV,EAAE,GAAGpC,IAAI,CAACC,GAAG,CAACuD,eAAe,CAACjB,KAAK,EAAEH,EAAE,CAAC;IAC5C;IACA,OAAOA,EAAE;EACb;EACA9C,IAAI,CAACgB,CAAC,CAACqC,CAAC,GAAGA,CAAC;EACZrD,IAAI,CAACgB,CAAC,CAAC7D,EAAE,GAAGtB,EAAE;EACd,SAASsI,QAAQA,CAACrB,EAAE,EAAE;IAClB,IAAIsB,KAAK,GAAGtB,EAAE,CAACuB,UAAU;MACrBC,IAAI;MACJC,GAAG,GAAG,CAAC,CAAC;IACZ,KAAK,IAAIpI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiI,KAAK,CAAC/H,MAAM,EAAEF,CAAC,EAAE,EAAE;MACnC,IAAIiI,KAAK,CAACjI,CAAC,CAAC,CAACqI,YAAY,IAAIxB,KAAK,EAAE;QAChCsB,IAAI,GAAG,QAAQ;MACnB,CAAC,MAAM;QACHA,IAAI,GAAG,EAAE;MACb;MACAA,IAAI,IAAIF,KAAK,CAACjI,CAAC,CAAC,CAACmI,IAAI;MACrBC,GAAG,CAACD,IAAI,CAAC,GAAGF,KAAK,CAACjI,CAAC,CAAC,CAACsI,WAAW;IACpC;IACA,OAAOF,GAAG;EACd;EACA,SAAShE,EAAEA,CAACmE,CAAC,EAAE3B,IAAI,EAAE;IACjBA,IAAI,GAAG3B,GAAG,CAAC5F,SAAS,CAACmJ,WAAW,CAACjJ,IAAI,CAACqH,IAAI,CAAC;IAC3C,IAAIA,IAAI,IAAI,QAAQ,EAAE;MAClB,OAAO6B,QAAQ,CAACF,CAAC,CAAC;IACtB;IACA,IAAI3B,IAAI,IAAI,OAAO,KACd2B,CAAC,YAAYrJ,KAAK,IAAIA,KAAK,CAACD,OAAO,IAAIC,KAAK,CAACD,OAAO,CAACsJ,CAAC,CAAC,CAAC,EAAE;MAC3D,OAAO,IAAI;IACf;IACA,OAAQ3B,IAAI,IAAI,MAAM,IAAI2B,CAAC,KAAK,IAAI,IAC5B3B,IAAI,IAAI,OAAO2B,CAAC,IAAIA,CAAC,KAAK,IAAI,IAC9B3B,IAAI,IAAI,QAAQ,IAAI2B,CAAC,KAAKnJ,MAAM,CAACmJ,CAAC,CAAC,IACnCzC,cAAc,CAACvG,IAAI,CAACgJ,CAAC,CAAC,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACF,WAAW,CAAC,CAAC,IAAI5B,IAAI;EACrE;EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA/C,IAAI,CAAC8E,MAAM,GAAI,YAAY;IACvB,IAAIC,UAAU,GAAG,eAAe;MAC5BC,gBAAgB,GAAG,0DAA0D;MAAE;MAC/EC,QAAQ,GAAG,SAAAA,CAAUC,GAAG,EAAEpB,GAAG,EAAEqB,GAAG,EAAE;QAChC,IAAIjJ,GAAG,GAAGiJ,GAAG;QACbrB,GAAG,CAACsB,OAAO,CAACJ,gBAAgB,EAAE,UAAUE,GAAG,EAAEZ,IAAI,EAAEe,KAAK,EAAEC,UAAU,EAAEC,MAAM,EAAE;UAC1EjB,IAAI,GAAGA,IAAI,IAAIgB,UAAU;UACzB,IAAIpJ,GAAG,EAAE;YACL,IAAIoI,IAAI,IAAIpI,GAAG,EAAE;cACbA,GAAG,GAAGA,GAAG,CAACoI,IAAI,CAAC;YACnB;YACA,OAAOpI,GAAG,IAAI,UAAU,IAAIqJ,MAAM,KAAKrJ,GAAG,GAAGA,GAAG,CAAC,CAAC,CAAC;UACvD;QACJ,CAAC,CAAC;QACFA,GAAG,GAAG,CAACA,GAAG,IAAI,IAAI,IAAIA,GAAG,IAAIiJ,GAAG,GAAGD,GAAG,GAAGhJ,GAAG,IAAI,EAAE;QAClD,OAAOA,GAAG;MACd,CAAC;IACL,OAAO,UAAUsJ,GAAG,EAAEL,GAAG,EAAE;MACvB,OAAO/D,GAAG,CAACoE,GAAG,CAAC,CAACJ,OAAO,CAACL,UAAU,EAAE,UAAUG,GAAG,EAAEpB,GAAG,EAAE;QACpD,OAAOmB,QAAQ,CAACC,GAAG,EAAEpB,GAAG,EAAEqB,GAAG,CAAC;MAClC,CAAC,CAAC;IACN,CAAC;EACL,CAAC,CAAE,CAAC;EACJ,SAASM,KAAKA,CAACN,GAAG,EAAE;IAChB,IAAI,OAAOA,GAAG,IAAI,UAAU,IAAI5J,MAAM,CAAC4J,GAAG,CAAC,KAAKA,GAAG,EAAE;MACjD,OAAOA,GAAG;IACd;IACA,IAAIjJ,GAAG,GAAG,IAAIiJ,GAAG,CAACO,WAAW,CAAD,CAAC;IAC7B,KAAK,IAAI5B,GAAG,IAAIqB,GAAG,EAAE,IAAIA,GAAG,CAAChE,GAAG,CAAC,CAAC2C,GAAG,CAAC,EAAE;MACpC5H,GAAG,CAAC4H,GAAG,CAAC,GAAG2B,KAAK,CAACN,GAAG,CAACrB,GAAG,CAAC,CAAC;IAC9B;IACA,OAAO5H,GAAG;EACd;EACA8D,IAAI,CAACgB,CAAC,CAACyE,KAAK,GAAGA,KAAK;EACpB,SAASE,MAAMA,CAACC,KAAK,EAAEC,IAAI,EAAE;IACzB,KAAK,IAAI1J,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGwJ,KAAK,CAACvJ,MAAM,EAAEF,CAAC,GAAGC,EAAE,EAAED,CAAC,EAAE,EAAE,IAAIyJ,KAAK,CAACzJ,CAAC,CAAC,KAAK0J,IAAI,EAAE;MACnE,OAAOD,KAAK,CAACE,IAAI,CAACF,KAAK,CAACG,MAAM,CAAC5J,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5C;EACJ;EACA,SAAS6J,MAAMA,CAACC,CAAC,EAAEC,KAAK,EAAEC,aAAa,EAAE;IACrC,SAASC,IAAIA,CAAA,EAAG;MACZ,IAAIC,GAAG,GAAGhL,KAAK,CAACG,SAAS,CAACqJ,KAAK,CAACnJ,IAAI,CAAC4K,SAAS,EAAE,CAAC,CAAC;QAC9CC,IAAI,GAAGF,GAAG,CAACG,IAAI,CAAC,QAAQ,CAAC;QACzBC,KAAK,GAAGL,IAAI,CAACK,KAAK,GAAGL,IAAI,CAACK,KAAK,IAAI,CAAC,CAAC;QACrCC,KAAK,GAAGN,IAAI,CAACM,KAAK,GAAGN,IAAI,CAACM,KAAK,IAAI,EAAE;MACzC,IAAID,KAAK,CAACtF,GAAG,CAAC,CAACoF,IAAI,CAAC,EAAE;QAClBZ,MAAM,CAACe,KAAK,EAAEH,IAAI,CAAC;QACnB,OAAOJ,aAAa,GAAGA,aAAa,CAACM,KAAK,CAACF,IAAI,CAAC,CAAC,GAAGE,KAAK,CAACF,IAAI,CAAC;MACnE;MACAG,KAAK,CAACrK,MAAM,IAAI,GAAG,IAAI,OAAOoK,KAAK,CAACC,KAAK,CAACC,KAAK,CAAC,CAAC,CAAC;MAClDD,KAAK,CAACZ,IAAI,CAACS,IAAI,CAAC;MAChBE,KAAK,CAACF,IAAI,CAAC,GAAGN,CAAC,CAACzF,KAAK,CAAC0F,KAAK,EAAEG,GAAG,CAAC;MACjC,OAAOF,aAAa,GAAGA,aAAa,CAACM,KAAK,CAACF,IAAI,CAAC,CAAC,GAAGE,KAAK,CAACF,IAAI,CAAC;IACnE;IACA,OAAOH,IAAI;EACf;EACApG,IAAI,CAACgB,CAAC,CAACgF,MAAM,GAAGA,MAAM;EACtB,SAASY,KAAKA,CAACC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE;IACnC,IAAID,EAAE,IAAI,IAAI,EAAE;MACZ,IAAI/H,CAAC,GAAG2H,EAAE,GAAGE,EAAE;QACX1H,CAAC,GAAGyH,EAAE,GAAGE,EAAE;MACf,IAAI,CAAC9H,CAAC,IAAI,CAACG,CAAC,EAAE;QACV,OAAO,CAAC;MACZ;MACA,OAAO,CAAC,GAAG,GAAGoC,IAAI,CAAC0F,KAAK,CAAC,CAAC9H,CAAC,EAAE,CAACH,CAAC,CAAC,GAAG,GAAG,GAAGU,EAAE,GAAG,GAAG,IAAI,GAAG;IAC5D,CAAC,MAAM;MACH,OAAOgH,KAAK,CAACC,EAAE,EAAEC,EAAE,EAAEG,EAAE,EAAEC,EAAE,CAAC,GAAGN,KAAK,CAACG,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,CAAC;IACxD;EACJ;EACA,SAASE,GAAGA,CAACC,GAAG,EAAE;IACd,OAAOA,GAAG,GAAG,GAAG,GAAGzH,EAAE,GAAG,GAAG;EAC/B;EACA,SAASyH,GAAGA,CAACD,GAAG,EAAE;IACd,OAAOA,GAAG,GAAG,GAAG,GAAGxH,EAAE,GAAG,GAAG;EAC/B;EACA,SAAS0H,GAAGA,CAAA,EAAG;IACX,OAAO,IAAI,CAACpI,CAAC,GAAG8C,CAAC,GAAG,IAAI,CAAC3C,CAAC;EAC9B;EACA,SAASkI,OAAOA,CAAA,EAAG;IACf,OAAO,IAAI,CAACrI,CAAC,GAAG8C,CAAC,GAAG,IAAI,CAAC3C,CAAC,GAAG2C,CAAC,GAAG,IAAI,CAACwF,KAAK,GAAG,QAAQ,GAAG,IAAI,CAACC,MAAM;EACxE;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAzH,IAAI,CAACoH,GAAG,GAAGA,GAAG;EACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACApH,IAAI,CAACqH,GAAG,GAAGA,GAAG;EACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACArH,IAAI,CAACL,GAAG,GAAG,UAAUiH,KAAK,EAAE;IACxB,OAAOnF,IAAI,CAAC9B,GAAG,CAACK,IAAI,CAACoH,GAAG,CAACR,KAAK,CAAC,CAAC;EACpC,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA5G,IAAI,CAAC0H,GAAG,GAAG,UAAUd,KAAK,EAAE;IACxB,OAAOnF,IAAI,CAACiG,GAAG,CAAC1H,IAAI,CAACoH,GAAG,CAACR,KAAK,CAAC,CAAC;EACpC,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA5G,IAAI,CAAC2H,GAAG,GAAG,UAAUf,KAAK,EAAE;IACxB,OAAOnF,IAAI,CAACkG,GAAG,CAAC3H,IAAI,CAACoH,GAAG,CAACR,KAAK,CAAC,CAAC;EACpC,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA5G,IAAI,CAAC4H,IAAI,GAAG,UAAUC,GAAG,EAAE;IACvB,OAAO7H,IAAI,CAACqH,GAAG,CAAC5F,IAAI,CAACmG,IAAI,CAACC,GAAG,CAAC,CAAC;EACnC,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA7H,IAAI,CAAC8H,IAAI,GAAG,UAAUD,GAAG,EAAE;IACvB,OAAO7H,IAAI,CAACqH,GAAG,CAAC5F,IAAI,CAACqG,IAAI,CAACD,GAAG,CAAC,CAAC;EACnC,CAAC;EACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA7H,IAAI,CAAC+H,IAAI,GAAG,UAAUF,GAAG,EAAE;IACvB,OAAO7H,IAAI,CAACqH,GAAG,CAAC5F,IAAI,CAACsG,IAAI,CAACF,GAAG,CAAC,CAAC;EACnC,CAAC;EACD;AACA;AACA;AACA;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D,CAAC,CAAC;MAChD,IAAIpB,GAAG,GAAG8B,CAAC,EAAE;QACT9B,GAAG,GAAG8B,CAAC;QACP0uB,MAAM,CAACtyB,CAAC,CAAC,CAAC8B,GAAG,GAAG8B,CAAC;QACjB7D,GAAG,GAAGuyB,MAAM,CAACtyB,CAAC,CAAC;MACnB;IACJ;IACA,OAAOD,GAAG;EACd,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI8D,IAAI,CAACkI,IAAI,CAACyd,eAAe,GAAGA,eAAe;EAC3C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI3lB,IAAI,CAACkI,IAAI,CAACymB,YAAY,GAAGpG,gBAAgB;EACzCvoB,IAAI,CAACkI,IAAI,CAAC0mB,kBAAkB,GAAGjG,sBAAsB;EACrD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI3oB,IAAI,CAACkI,IAAI,CAAC2mB,aAAa,GAAGvF,iBAAiB;EAC3C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACItpB,IAAI,CAACkI,IAAI,CAAC6H,OAAO,GAAGwZ,QAAQ;EAC5BvpB,IAAI,CAACkI,IAAI,CAAC3K,GAAG,GAAGusB,OAAO;EACvB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI9pB,IAAI,CAACkI,IAAI,CAAC4mB,UAAU,GAAG/E,cAAc;EACrC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI/pB,IAAI,CAACkI,IAAI,CAAC2U,UAAU,GAAGsN,cAAc;EACrC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACInqB,IAAI,CAACkI,IAAI,CAAC6mB,OAAO,GAAGxK,UAAU;EAC9B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIvk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CJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI,KAAK,IAAI92B,CAAC,GAAGq1B,MAAM,CAACn1B,MAAM,EAAEF,CAAC,EAAE,GAAG;IAC9B,CAAC,UAAU63B,SAAS,EAAE;MAClBh0B,IAAI,CAACg0B,SAAS,CAAC,GAAGre,OAAO,CAACqe,SAAS,CAAC,GAAG,UAAU1B,EAAE,EAAEpsB,KAAK,EAAE;QACxD,IAAIlG,IAAI,CAACO,EAAE,CAAC+xB,EAAE,EAAE,UAAU,CAAC,EAAE;UACzB,IAAI,CAACd,MAAM,GAAG,IAAI,CAACA,MAAM,IAAI,EAAE;UAC/B,IAAI,CAACA,MAAM,CAAC1rB,IAAI,CAAC;YACbxB,IAAI,EAAE0vB,SAAS;YACf/tB,CAAC,EAAEqsB,EA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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}